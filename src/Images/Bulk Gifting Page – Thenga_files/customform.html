<!DOCTYPE html>
<!-- saved from url=(0142)https://formbuilder.hulkapps.com/corepage/customform?id=R9ZAcuu8O_n4vOQArkYnwA&referrer_url=https://www.thengacoco.com/pages/bulk-gifting-page -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style type="text/css">.swal-icon--error{border-color:#f27474;-webkit-animation:animateErrorIcon .5s;animation:animateErrorIcon .5s}.swal-icon--error__x-mark{position:relative;display:block;-webkit-animation:animateXMark .5s;animation:animateXMark .5s}.swal-icon--error__line{position:absolute;height:5px;width:47px;background-color:#f27474;display:block;top:37px;border-radius:2px}.swal-icon--error__line--left{-webkit-transform:rotate(45deg);transform:rotate(45deg);left:17px}.swal-icon--error__line--right{-webkit-transform:rotate(-45deg);transform:rotate(-45deg);right:16px}@-webkit-keyframes animateErrorIcon{0%{-webkit-transform:rotateX(100deg);transform:rotateX(100deg);opacity:0}to{-webkit-transform:rotateX(0deg);transform:rotateX(0deg);opacity:1}}@keyframes animateErrorIcon{0%{-webkit-transform:rotateX(100deg);transform:rotateX(100deg);opacity:0}to{-webkit-transform:rotateX(0deg);transform:rotateX(0deg);opacity:1}}@-webkit-keyframes animateXMark{0%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}50%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}80%{-webkit-transform:scale(1.15);transform:scale(1.15);margin-top:-6px}to{-webkit-transform:scale(1);transform:scale(1);margin-top:0;opacity:1}}@keyframes animateXMark{0%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}50%{-webkit-transform:scale(.4);transform:scale(.4);margin-top:26px;opacity:0}80%{-webkit-transform:scale(1.15);transform:scale(1.15);margin-top:-6px}to{-webkit-transform:scale(1);transform:scale(1);margin-top:0;opacity:1}}.swal-icon--warning{border-color:#f8bb86;-webkit-animation:pulseWarning .75s infinite alternate;animation:pulseWarning .75s infinite alternate}.swal-icon--warning__body{width:5px;height:47px;top:10px;border-radius:2px;margin-left:-2px}.swal-icon--warning__body,.swal-icon--warning__dot{position:absolute;left:50%;background-color:#f8bb86}.swal-icon--warning__dot{width:7px;height:7px;border-radius:50%;margin-left:-4px;bottom:-11px}@-webkit-keyframes pulseWarning{0%{border-color:#f8d486}to{border-color:#f8bb86}}@keyframes pulseWarning{0%{border-color:#f8d486}to{border-color:#f8bb86}}.swal-icon--success{border-color:#a5dc86}.swal-icon--success:after,.swal-icon--success:before{content:"";border-radius:50%;position:absolute;width:60px;height:120px;background:#fff;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.swal-icon--success:before{border-radius:120px 0 0 120px;top:-7px;left:-33px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform-origin:60px 60px;transform-origin:60px 60px}.swal-icon--success:after{border-radius:0 120px 120px 0;top:-11px;left:30px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-transform-origin:0 60px;transform-origin:0 60px;-webkit-animation:rotatePlaceholder 4.25s ease-in;animation:rotatePlaceholder 4.25s ease-in}.swal-icon--success__ring{width:80px;height:80px;border:4px solid hsla(98,55%,69%,.2);border-radius:50%;box-sizing:content-box;position:absolute;left:-4px;top:-4px;z-index:2}.swal-icon--success__hide-corners{width:5px;height:90px;background-color:#fff;padding:1px;position:absolute;left:28px;top:8px;z-index:1;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.swal-icon--success__line{height:5px;background-color:#a5dc86;display:block;border-radius:2px;position:absolute;z-index:2}.swal-icon--success__line--tip{width:25px;left:14px;top:46px;-webkit-transform:rotate(45deg);transform:rotate(45deg);-webkit-animation:animateSuccessTip .75s;animation:animateSuccessTip .75s}.swal-icon--success__line--long{width:47px;right:8px;top:38px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);-webkit-animation:animateSuccessLong .75s;animation:animateSuccessLong .75s}@-webkit-keyframes rotatePlaceholder{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}5%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}12%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}to{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}}@keyframes rotatePlaceholder{0%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}5%{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}12%{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}to{-webkit-transform:rotate(-405deg);transform:rotate(-405deg)}}@-webkit-keyframes animateSuccessTip{0%{width:0;left:1px;top:19px}54%{width:0;left:1px;top:19px}70%{width:50px;left:-8px;top:37px}84%{width:17px;left:21px;top:48px}to{width:25px;left:14px;top:45px}}@keyframes animateSuccessTip{0%{width:0;left:1px;top:19px}54%{width:0;left:1px;top:19px}70%{width:50px;left:-8px;top:37px}84%{width:17px;left:21px;top:48px}to{width:25px;left:14px;top:45px}}@-webkit-keyframes animateSuccessLong{0%{width:0;right:46px;top:54px}65%{width:0;right:46px;top:54px}84%{width:55px;right:0;top:35px}to{width:47px;right:8px;top:38px}}@keyframes animateSuccessLong{0%{width:0;right:46px;top:54px}65%{width:0;right:46px;top:54px}84%{width:55px;right:0;top:35px}to{width:47px;right:8px;top:38px}}.swal-icon--info{border-color:#c9dae1}.swal-icon--info:before{width:5px;height:29px;bottom:17px;border-radius:2px;margin-left:-2px}.swal-icon--info:after,.swal-icon--info:before{content:"";position:absolute;left:50%;background-color:#c9dae1}.swal-icon--info:after{width:7px;height:7px;border-radius:50%;margin-left:-3px;top:19px}.swal-icon{width:80px;height:80px;border-width:4px;border-style:solid;border-radius:50%;padding:0;position:relative;box-sizing:content-box;margin:20px auto}.swal-icon:first-child{margin-top:32px}.swal-icon--custom{width:auto;height:auto;max-width:100%;border:none;border-radius:0}.swal-icon img{max-width:100%;max-height:100%}.swal-title{color:rgba(0,0,0,.65);font-weight:600;text-transform:none;position:relative;display:block;padding:13px 16px;font-size:27px;line-height:normal;text-align:center;margin-bottom:0}.swal-title:first-child{margin-top:26px}.swal-title:not(:first-child){padding-bottom:0}.swal-title:not(:last-child){margin-bottom:13px}.swal-text{font-size:16px;position:relative;float:none;line-height:normal;vertical-align:top;text-align:left;display:inline-block;margin:0;padding:0 10px;font-weight:400;color:rgba(0,0,0,.64);max-width:calc(100% - 20px);overflow-wrap:break-word;box-sizing:border-box}.swal-text:first-child{margin-top:45px}.swal-text:last-child{margin-bottom:45px}.swal-footer{text-align:right;padding-top:13px;margin-top:13px;padding:13px 16px;border-radius:inherit;border-top-left-radius:0;border-top-right-radius:0}.swal-button-container{margin:5px;display:inline-block;position:relative}.swal-button{background-color:#7cd1f9;color:#fff;border:none;box-shadow:none;border-radius:5px;font-weight:600;font-size:14px;padding:10px 24px;margin:0;cursor:pointer}.swal-button:not([disabled]):hover{background-color:#78cbf2}.swal-button:active{background-color:#70bce0}.swal-button:focus{outline:none;box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(43,114,165,.29)}.swal-button[disabled]{opacity:.5;cursor:default}.swal-button::-moz-focus-inner{border:0}.swal-button--cancel{color:#555;background-color:#efefef}.swal-button--cancel:not([disabled]):hover{background-color:#e8e8e8}.swal-button--cancel:active{background-color:#d7d7d7}.swal-button--cancel:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(116,136,150,.29)}.swal-button--danger{background-color:#e64942}.swal-button--danger:not([disabled]):hover{background-color:#df4740}.swal-button--danger:active{background-color:#cf423b}.swal-button--danger:focus{box-shadow:0 0 0 1px #fff,0 0 0 3px rgba(165,43,43,.29)}.swal-content{padding:0 20px;margin-top:20px;font-size:medium}.swal-content:last-child{margin-bottom:20px}.swal-content__input,.swal-content__textarea{-webkit-appearance:none;background-color:#fff;border:none;font-size:14px;display:block;box-sizing:border-box;width:100%;border:1px solid rgba(0,0,0,.14);padding:10px 13px;border-radius:2px;transition:border-color .2s}.swal-content__input:focus,.swal-content__textarea:focus{outline:none;border-color:#6db8ff}.swal-content__textarea{resize:vertical}.swal-button--loading{color:transparent}.swal-button--loading~.swal-button__loader{opacity:1}.swal-button__loader{position:absolute;height:auto;width:43px;z-index:2;left:50%;top:50%;-webkit-transform:translateX(-50%) translateY(-50%);transform:translateX(-50%) translateY(-50%);text-align:center;pointer-events:none;opacity:0}.swal-button__loader div{display:inline-block;float:none;vertical-align:baseline;width:9px;height:9px;padding:0;border:none;margin:2px;opacity:.4;border-radius:7px;background-color:hsla(0,0%,100%,.9);transition:background .2s;-webkit-animation:swal-loading-anim 1s infinite;animation:swal-loading-anim 1s infinite}.swal-button__loader div:nth-child(3n+2){-webkit-animation-delay:.15s;animation-delay:.15s}.swal-button__loader div:nth-child(3n+3){-webkit-animation-delay:.3s;animation-delay:.3s}@-webkit-keyframes swal-loading-anim{0%{opacity:.4}20%{opacity:.4}50%{opacity:1}to{opacity:.4}}@keyframes swal-loading-anim{0%{opacity:.4}20%{opacity:.4}50%{opacity:1}to{opacity:.4}}.swal-overlay{position:fixed;top:0;bottom:0;left:0;right:0;text-align:center;font-size:0;overflow-y:auto;background-color:rgba(0,0,0,.4);z-index:10000;pointer-events:none;opacity:0;transition:opacity .3s}.swal-overlay:before{content:" ";display:inline-block;vertical-align:middle;height:100%}.swal-overlay--show-modal{opacity:1;pointer-events:auto}.swal-overlay--show-modal .swal-modal{opacity:1;pointer-events:auto;box-sizing:border-box;-webkit-animation:showSweetAlert .3s;animation:showSweetAlert .3s;will-change:transform}.swal-modal{width:478px;opacity:0;pointer-events:none;background-color:#fff;text-align:center;border-radius:5px;position:static;margin:20px auto;display:inline-block;vertical-align:middle;-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;z-index:10001;transition:opacity .2s,-webkit-transform .3s;transition:transform .3s,opacity .2s;transition:transform .3s,opacity .2s,-webkit-transform .3s}@media (max-width:500px){.swal-modal{width:calc(100% - 20px)}}@-webkit-keyframes showSweetAlert{0%{-webkit-transform:scale(1);transform:scale(1)}1%{-webkit-transform:scale(.5);transform:scale(.5)}45%{-webkit-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);transform:scale(.95)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes showSweetAlert{0%{-webkit-transform:scale(1);transform:scale(1)}1%{-webkit-transform:scale(.5);transform:scale(.5)}45%{-webkit-transform:scale(1.05);transform:scale(1.05)}80%{-webkit-transform:scale(.95);transform:scale(.95)}to{-webkit-transform:scale(1);transform:scale(1)}}</style>
	<title>Bulk Order Form</title>
	
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
	<meta name="csrf-param" content="authenticity_token">
<meta name="csrf-token" content="6IODJDokwh5wi3JPkXIkmY9esML7FJ420wHM1YaHR7X_x_P3T41-xn3O8FeyQ4dLtFLZNdJAJ0Bvac8FX0XDPA">
	<meta name="robots" content="noindex,nofollow">
	<link rel="stylesheet" href="./bootstrap.css">
	
	<!-- <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"> -->
	<link rel="stylesheet" href="./styles.css">
	<link rel="stylesheet" href="./font-awesome.min.css">


  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.8.1/html2pdf.bundle.min.js" integrity="sha512-vDKWohFHe2vkVWXHp3tKvIxxXg0pJxeid5eo+UjdjME3DBFBn2F8yWOE0XmiFcFbXxrEOR1JriWEno5Ckpn15A==" crossorigin="anonymous">
  </script> %> -->
	<script type="text/javascript" src="./jquery.min.js.download"></script>
	<script type="text/javascript" src="./bootstrap.min.js.download"></script>

	<!--  taken js from  https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.1/sweetalert.min.js -->
  <script type="text/javascript" src="./sweetalert.min.js.download"></script>



	<!-- Google Analytics 4 Start -->
	<!-- Google Analytics 4 End -->

	<!-- Google Tag Manager Start -->
	<!-- Google Tag Manager End -->



  <script src="./libphonenumber-js.min.js.download" type="text/javascript"></script>

	<style id="form_builder_css">
		.sa-confirm-button-container .confirm {
			background-color: #f27474 !important
		}
		.rc-image-tile-wrapper{transition: auto !important}
		.form_generater_form_div{
			background: transparent; 
			max-width: 100%; 
			border: solid;
			border-width: 2px;
			border-color: #c7c7c7; 
			border-radius: 1px; 
			padding: 35px;
			
		}
		input,textarea, select, .image label, .file label, .signature label, .form-control[disabled], .form-control[readonly] {
			background: #fff;
			border-radius: 2px;
			border: 1px solid #ccc;
		}
		input:focus, textarea:focus, select:focus, .image label:focus,.signature label:focus,.file label:focus {
			background: #fff; 
			border: 1px solid #ccc;
		}
		input[type="text"]::placeholder,
		input[type="email"]::placeholder,
		input[type="password"]::placeholder,
		input[type="number"]::placeholder,
		textarea::placeholder, select{
		  color: ;
		  font-size: 12px !important;
			
		}
		input, textarea, select:focus, .checkbox-inline label, .checkbox-inline input[type="checkbox"] + label, .radio-inline label, .radio-inline input[type="radio"] + label, .image label,.file label, .signature label{
			color: #333333; 
			font-size: 12px;
			
		}
		textarea.form-control{
			resize: none;
		}
		.image label, .file label, .signature label{
			line-height: inherit;
		}
		div.form_submit_div button, div.form_submit_div button:hover{ 
			color : #fff !important; 
			background: #333333 !important; 
			border-radius: 2px; 
			width: 100%; 
			font-size: 16px;
			border:1px solid #333333;
			
		}
		.block_label, .header_column1, .header_column2 {
			color: #333333;
			font-size: 14px;
			
		}
		input:-moz-placeholder {
			color: #333333;
		} 
		input::-webkit-input-placeholder {
			color: #333333;
		}
		.radio, .checkbox-multi, .checkbox {
			margin-top: 0px; margin-bottom: 10px;
		}
		input[type="checkbox"] + label span,input[type="radio"] + label span { 
			background: #fff; 
			border: 1px solid #ccc; 
			border-radius: 2px;
			width: 14px;
		    height: 14px;
		}
		input[type="radio"]:checked + label span,input[type="checkbox"]:checked + label span {
			background: #333333;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			position: relative;
		}
		input[type="radio"]:checked + label span:after,input[type="checkbox"]:checked + label span:after{
			color: #fff; 
			font-size: 12px;
			margin-left: 1px;
			top: 50%;
			left: 50%;
			transform: translate(-50%,-50%);
		}
		.form_container input[type="radio"] + label span {
			border-radius: 50%;
		}
		.infoMessage, .fileres {
			color: #333333;
			font-size: 12px;
			
		}
		::-webkit-input-placeholder{ color: #333333; }
		:-moz-placeholder{color: #333333; }
		::-moz-placeholder{color: #333333; }
		:-ms-input-placeholder{color: #333333; }
		fileres{
			text-transform: capitalize;
		}

		@media only screen and (max-width : 769px){
			.form_generater_form_div{
				max-width: 100%; 
			}
		}
		.payment_cost_div {
			margin-top: 10px;
		}
		div#card-element {
			margin-top: 10px;
			background: #ededed;
			padding: 10px;
			border-radius: 3px;
		}
		.hulk-powered-wrapper {
			margin-top: 7px;
	    max-width: 600px;
	    margin-left: auto;
	    margin-right: auto;
		}

		.has-float-label {
		    position: relative
		}

		.has-float-label label,
		.has-float-label>span,
		.has-float-label .header_column2,
		.has-float-label .header_column1 {
		    position: absolute;
		    cursor: text;
		    font-size: 75%;
		    opacity: 1;
		    -webkit-transition: all .2s;
		    transition: all .2s;
		    top: -.5em;
		    left: 20px;
		    z-index: 3;
		    line-height: 1;
		    padding: 0 1px
		}

		.has-float-label .header_column2,
		.has-float-label .header_column1{
			white-space: nowrap; 
    	overflow: hidden; 
      text-overflow: ellipsis;
    	left: 4px;
		}
		
		.has-float-label label::after,
		.has-float-label>span::after {
		    content: " ";
		    display: block;
		    position: absolute;
		    background: #fff;
		    height: 2px;
		    top: 50%;
		    left: -.2em;
		    right: -.2em;
		    z-index: -1
		}

		.has-float-label .form-control::-webkit-input-placeholder {
		    opacity: 1;
		    -webkit-transition: all .2s;
		    transition: all .2s
		}

		.has-float-label .form-control::-moz-placeholder {
		    opacity: 1;
		    transition: all .2s
		}

		.has-float-label .form-control:-ms-input-placeholder {
		    opacity: 1;
		    transition: all .2s
		}

		.has-float-label .form-control::placeholder {
		    opacity: 1;
		    -webkit-transition: all .2s;
		    transition: all .2s
		}

		.has-float-label .form-control:placeholder-shown:not(:focus)::-webkit-input-placeholder {
		    opacity: 0
		}

		.has-float-label .form-control:placeholder-shown:not(:focus)::-moz-placeholder {
		    opacity: 0
		}

		.has-float-label .form-control:placeholder-shown:not(:focus):-ms-input-placeholder {
		    opacity: 0
		}

		.has-float-label .form-control:placeholder-shown:not(:focus)::placeholder {
		    opacity: 0
		}

		.has-float-label .form-control:placeholder-shown:not(:focus)+* {
		    font-size: 14px;
		    opacity: 1;
		    top: .3em;
		    line-height: 26px;
		    font-weight: 400
		}

		.input-group .has-float-label {
		    display: table-cell
		}

		.input-group .has-float-label .form-control {
		    border-radius: 4px
		}

		.input-group .has-float-label:not(:last-child) .form-control {
		    border-bottom-right-radius: 0;
		    border-top-right-radius: 0
		}

		.input-group .has-float-label:not(:first-child) .form-control {
		    border-bottom-left-radius: 0;
		    border-top-left-radius: 0;
		    margin-left: -1px
		}

		#regForm {
		  background-color: #ffffff;
		  margin: 100px auto;
		  font-family: Raleway;
		  padding: 40px;
		  width: 70%;
		  min-width: 300px;
		}

		/* Mark input boxes that gets an error on validation: */
		input.invalid {
		  background-color: #ffdddd;
		}

		/* Hide all steps by default: */
		.tab {
		  display: none;
		}

		.page_break{
			display: none;
		}

		.buttons {
		  border: none;
		  padding: 5px 10px;
		  font-size: 14px;
		  font-family: Raleway;
		  cursor: pointer;
		  border-radius: 5px;
		}

		.button:hover {
		  opacity: 0.8;
		}

		#prevBtn {
		  background-color: #bbbbbb;
		}

		/* Make circles that indicate the steps of the form: */
		.step {
		  height: 10px;
		  width: 10px;
		  margin: 0 2px;
		  background-color: #bbbbbb;
		  border: none;  
		  border-radius: 50%;
		  display: inline-block;
		  opacity: 0.5;
		}

		.step.active {
		  opacity: 1;
		}

		/* Mark the steps that are finished and valid: */
		.step.finish {
		  background-color: #04AA6D;
		}  

		.star-rating {
		  direction: rtl;
		  display: inline-block;
		  cursor: default;
		  margin-left: 5px;
		}
		.star-rating input[type="radio"] {
		    display: none;
		}

		.star-rating label {
		    color: #bbb;
		    font-size: 5rem;
		    padding: 10px;
		    cursor: pointer;
		    -webkit-transition: all 0.3s ease-in-out;
		    transition: all 0.3s ease-in-out;
		}

		.star-rating label:hover,
		.star-rating label:hover ~ label,
		.star-rating input[type="radio"]:checked ~ label {
		    color: #f2b600;
		}
		.error{
			border:2px solid red !important;
		}
		.phone input[type=number]::-webkit-inner-spin-button, 
		.phone input[type=number]::-webkit-outer-spin-button { 
		  -webkit-appearance: none; 
		}

		.phone input[type=number] {
		  -moz-appearance: textfield;
		}

		.emoji-feedback {
		  display: flex;
		  width:  fit-content;
		  justify-content: center;
		  align-items: center;
		}

		.ef-item {
		  width: 90px;
		  height: 50px;
		  display: flex;
		  justify-content: center;
		  align-items: center;
		  user-select: none;
		}
		.ef-radio {
		  display: none;
		}
		.ef-radio ~ span {
		  font-size: 3rem;
		  filter: grayscale(100);
		  cursor: pointer;
		  transition: 0.3s;
		}

		.ef-radio:checked ~ span {
      filter: grayscale(0);
      font-size: 4rem;
    }

		.picture_choice_img{
			height: 200px;
		}
		@media (max-width: 480px) {
			.picture_choice_img{
				height: 150px;
			}
		}

		.picture_choice [type=radio] { 
		  position: absolute;
		  opacity: 0;
		  width: 0;
		  height: 0;
		}

		.picture_choice [type=radio] + img {
		  cursor: pointer;
		}

		.picture_choice [type=radio]:checked + img {
		  outline: 2px solid #4aa759;
		}

		.picture_choice [type=checkbox] { 
		  position: absolute;
		  opacity: 0;
		  width: 0;
		  height: 0;
		}

		.picture_choice [type=checkbox] + img {
		  cursor: pointer;
		}
		.picture_choice [type=checkbox]:checked + img {
		  outline: 2px solid #4aa759;
		}
    input#hulkHoneypot { display: none; }

    .browse-files-btn{
  		background-color: #333333;
  		color: #fff;
  		pointer-events: none;
  		padding: 6px 12px;
  		border: none;
  		border-radius: 2px;
		}
		.dropzone p{
  		font-size: 12px;
		}

		/*********************** Product Choice CSS Start ***********************/
		.product-grid {
			display: flex;
			flex-wrap: wrap;
			/*margin: -10px;*/
			justify-content: flex-start;
		}

		.product-grid .col-sm-4 {
			flex-basis: calc(33.33% - 20px);
			margin: 10px;
			padding: 8px;
			text-align: center;
		}

		.product-grid .col-sm-3 {
			flex-basis: calc(24.63% - 20px);
			margin: 10px;
			padding: 8px;
			text-align: center;
		}

		.product-grid .col-sm-6 {
			flex-basis: calc(49.99% - 20px);
			margin: 10px;
			padding: 9px;
			text-align: center;
		}

		.product_choice img {
			width: 100%;
			display: flex;
			align-items: center;
			justify-content: center;
			outline: 2px solid #ccc;
			overflow: hidden;
		}

		.product-title {
			margin-top: 10px;
			word-break: break-word;
			text-align: center;
			font-size: 11px;
			height: 30px;
			line-height: 15px;
			overflow: hidden;
			text-overflow: ellipsis;
		}

		.product_choice [type="radio"]:checked + img,
		.product_choice [type="checkbox"]:checked + img {
			outline: 2px solid #4aa759;
		}

		.product_choice [type="radio"] + img,
		.product_choice [type="checkbox"] + img {
			cursor: pointer;
		}
		/*********************** Product Choice CSS End ***********************/
	</style>
	<style id="picture_choice_css"></style>
	<style id="product_choice_css"></style>
	<script type="text/javascript">
		var currentTab = 0;
	</script>
</head>

<body>
	<div id="wizard-validation-form" class="hulk_form_R9ZAcuu8O_n4vOQArkYnwA">
		<div class="formContainer">
			<form action="https://formbuilder.hulkapps.com/corepage/customform?id=R9ZAcuu8O_n4vOQArkYnwA&amp;referrer_url=https://www.thengacoco.com/pages/bulk-gifting-page#" method="post" id="formGeneratorForm">	
				<div class="form_generater_form_div">
					 <div class="tab" style="display: block;">
  <div class="row">
				<div class="col-md-12 clearfix">
				</div>
			<div class="col-md-12 clearfix">
				<div class="alert_message" style="display:none;">
						<div id="thank-you-alert" class="alert alert-success" role="alert" tabindex="0" aria-label="Thank you! The form was submitted successfully." aria-describedby="Form Suceess message" style="display: none;">
							<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
							<p tabindex="0" aria-label="Thank you! The form was submitted successfully." class="alert-success">
							Thank you! The form was submitted successfully.
						</p></div>
						<script type="text/javascript">
							$(document).ready(function() {
								var fadeOutTime = 5 * 1000;
								$("#thank-you-alert").fadeOut(fadeOutTime);
							});
						</script>
				</div>
			</div>

			<div class="col-md-12 form_element clearfix">
				<div class="row form_container">

								<div class="formElement_0 form-group fadeMe text clearfix col-sm-12 textfield paymentCount" data-count="0"><label class="fitText block_label" tabindex="0" for="form_input_0" aria-label="Name" style="display: block;">Name*</label><input class="form-control  required" aria-required="true" name="Name" id="form_input_0" type="text" aria-placeholder="" placeholder=""> </div> 
								<div class="formElement_1 form-group fadeMe text clearfix col-sm-12 textfield paymentCount" data-count="1"><label class="fitText block_label" for="form_input_1" tabindex="0" aria-label="Organisation Name (Optional)" style="display: block;">Organisation Name (Optional)</label><input class="form-control" aria-required="false" name="Organisation Name (Optional)" id="form_input_1" type="text" aria-placeholder="" placeholder=""> </div> 
								<div class="formElement_2 form-group fadeMe text clearfix col-sm-12 email paymentCount" data-count="2"><label class="fitText block_label" tabindex="0" for="form_input_2" aria-label="Email" style="display: block;">Email*</label><input class="form-control required email_confirm" aria-required="true" id="form_input_2" name="Email" type="email" aria-placeholder="" placeholder=""> </div> 
								<div class="formElement_3 form-group fadeMe text clearfix col-sm-12 phone paymentCount" data-count="3"><label class="fitText block_label" tabindex="0" for="form_input_3" aria-label="Contact" style="display: block;">Contact*</label><div class="row phone_div " id="form_input_3"><div class="col-sm-6" style="float: left; width: 50%"><select aria-label="Select Country" class="form-control" name="dial_code" style="outline: none; box-shadow: none;" placeholder=""><option data-country-code="AF" value="+93">Afghanistan +93</option><option data-country-code="AL" value="+355">Albania +355</option><option data-country-code="DZ" value="+213">Algeria +213</option><option data-country-code="AS" value="+1684">American Samoa +1684</option><option data-country-code="AD" value="+376">Andorra +376</option><option data-country-code="AO" value="+244">Angola +244</option><option data-country-code="AI" value="+1264">Anguilla +1264</option><option data-country-code="AQ" value="+0">Antarctica +0</option><option data-country-code="AG" value="+1268">Antigua And Barbuda +1268</option><option data-country-code="AR" value="+54">Argentina +54</option><option data-country-code="AM" value="+374">Armenia +374</option><option data-country-code="AW" value="+297">Aruba +297</option><option data-country-code="AU" value="+61">Australia +61</option><option data-country-code="AT" value="+43">Austria +43</option><option data-country-code="AZ" value="+994">Azerbaijan +994</option><option data-country-code="BS" value="+1242">The Bahamas +1242</option><option data-country-code="BH" value="+973">Bahrain +973</option><option data-country-code="BD" value="+880">Bangladesh +880</option><option data-country-code="BB" value="+1246">Barbados +1246</option><option data-country-code="BY" value="+375">Belarus +375</option><option data-country-code="BE" value="+32">Belgium +32</option><option data-country-code="BZ" value="+501">Belize +501</option><option data-country-code="BJ" value="+229">Benin +229</option><option data-country-code="BM" value="+1441">Bermuda +1441</option><option data-country-code="BT" value="+975">Bhutan +975</option><option data-country-code="BO" value="+591">Bolivia +591</option><option data-country-code="BA" value="+387">Bosnia and Herzegovina +387</option><option data-country-code="BW" value="+267">Botswana +267</option><option data-country-code="BV" value="+0">Bouvet Island +0</option><option data-country-code="BR" value="+55">Brazil +55</option><option data-country-code="IO" value="+246">British Indian Ocean Territory +246</option><option data-country-code="BN" value="+673">Brunei +673</option><option data-country-code="BG" value="+359">Bulgaria +359</option><option data-country-code="BF" value="+226">Burkina Faso +226</option><option data-country-code="BI" value="+257">Burundi +257</option><option data-country-code="KH" value="+855">Cambodia +855</option><option data-country-code="CM" value="+237">Cameroon +237</option><option data-country-code="CA" value="+1">Canada +1</option><option data-country-code="CV" value="+238">Cape Verde +238</option><option data-country-code="KY" value="+1345">Cayman Islands +1345</option><option data-country-code="CF" value="+236">Central African Republic +236</option><option data-country-code="TD" value="+235">Chad +235</option><option data-country-code="CL" value="+56">Chile +56</option><option data-country-code="CN" value="+86">China +86</option><option data-country-code="CX" value="+61">Christmas Island +61</option><option data-country-code="CC" value="+672">Cocos (Keeling) Islands +672</option><option data-country-code="CO" value="+57">Colombia +57</option><option data-country-code="KM" value="+269">Comoros +269</option><option data-country-code="CG" value="+242">Republic Of The Congo +242</option><option data-country-code="CD" value="+242">Democratic Republic Of The Congo +242</option><option data-country-code="CK" value="+682">Cook Islands +682</option><option data-country-code="CR" value="+506">Costa Rica +506</option><option data-country-code="CI" value="+225">Cote D'Ivoire (Ivory Coast) +225</option><option data-country-code="HR" value="+385">Croatia (Hrvatska) +385</option><option data-country-code="CU" value="+53">Cuba +53</option><option data-country-code="CY" value="+357">Cyprus +357</option><option data-country-code="CZ" value="+420">Czech Republic +420</option><option data-country-code="DK" value="+45">Denmark +45</option><option data-country-code="DJ" value="+253">Djibouti +253</option><option data-country-code="DM" value="+1767">Dominica +1767</option><option data-country-code="DO" value="+1809">Dominican Republic +1809</option><option data-country-code="TP" value="+670">East Timor +670</option><option data-country-code="EC" value="+593">Ecuador +593</option><option data-country-code="EG" value="+20">Egypt +20</option><option data-country-code="SV" value="+503">El Salvador +503</option><option data-country-code="GQ" value="+240">Equatorial Guinea +240</option><option data-country-code="ER" value="+291">Eritrea +291</option><option data-country-code="EE" value="+372">Estonia +372</option><option data-country-code="ET" value="+251">Ethiopia +251</option><option data-country-code="XA" value="+61">External Territories of Australia +61</option><option data-country-code="FK" value="+500">Falkland Islands +500</option><option data-country-code="FO" value="+298">Faroe Islands +298</option><option data-country-code="FJ" value="+679">Fiji Islands +679</option><option data-country-code="FI" value="+358">Finland +358</option><option data-country-code="FR" value="+33">France +33</option><option data-country-code="GF" value="+594">French Guiana +594</option><option data-country-code="PF" value="+689">French Polynesia +689</option><option data-country-code="TF" value="+0">French Southern Territories +0</option><option data-country-code="GA" value="+241">Gabon +241</option><option data-country-code="GM" value="+220">The Gambia +220</option><option data-country-code="GE" value="+995">Georgia +995</option><option data-country-code="DE" value="+49">Germany +49</option><option data-country-code="GH" value="+233">Ghana +233</option><option data-country-code="GI" value="+350">Gibraltar +350</option><option data-country-code="GR" value="+30">Greece +30</option><option data-country-code="GL" value="+299">Greenland +299</option><option data-country-code="GD" value="+1473">Grenada +1473</option><option data-country-code="GP" value="+590">Guadeloupe +590</option><option data-country-code="GU" value="+1671">Guam +1671</option><option data-country-code="GT" value="+502">Guatemala +502</option><option data-country-code="GG" value="+44">Guernsey and Alderney +44</option><option data-country-code="GN" value="+224">Guinea +224</option><option data-country-code="GW" value="+245">Guinea-Bissau +245</option><option data-country-code="GY" value="+592">Guyana +592</option><option data-country-code="HT" value="+509">Haiti +509</option><option data-country-code="HM" value="+0">Heard Island and McDonald Islands +0</option><option data-country-code="HN" value="+504">Honduras +504</option><option data-country-code="HK" value="+852">Hong Kong S.A.R. +852</option><option data-country-code="HU" value="+36">Hungary +36</option><option data-country-code="IS" value="+354">Iceland +354</option><option data-country-code="IN" value="+91" selected="">India +91</option><option data-country-code="ID" value="+62">Indonesia +62</option><option data-country-code="IR" value="+98">Iran +98</option><option data-country-code="IQ" value="+964">Iraq +964</option><option data-country-code="IE" value="+353">Ireland +353</option><option data-country-code="IL" value="+972">Israel +972</option><option data-country-code="IT" value="+39">Italy +39</option><option data-country-code="JM" value="+1876">Jamaica +1876</option><option data-country-code="JP" value="+81">Japan +81</option><option data-country-code="XJ" value="+44">Jersey +44</option><option data-country-code="JO" value="+962">Jordan +962</option><option data-country-code="KZ" value="+7">Kazakhstan +7</option><option data-country-code="KE" value="+254">Kenya +254</option><option data-country-code="KI" value="+686">Kiribati +686</option><option data-country-code="KP" value="+850">North Korea +850</option><option data-country-code="KR" value="+82">South Korea +82</option><option data-country-code="KW" value="+965">Kuwait +965</option><option data-country-code="KG" value="+996">Kyrgyzstan +996</option><option data-country-code="LA" value="+856">Laos +856</option><option data-country-code="LV" value="+371">Latvia +371</option><option data-country-code="LB" value="+961">Lebanon +961</option><option data-country-code="LS" value="+266">Lesotho +266</option><option data-country-code="LR" value="+231">Liberia +231</option><option data-country-code="LY" value="+218">Libya +218</option><option data-country-code="LI" value="+423">Liechtenstein +423</option><option data-country-code="LT" value="+370">Lithuania +370</option><option data-country-code="LU" value="+352">Luxembourg +352</option><option data-country-code="MO" value="+853">Macau S.A.R. +853</option><option data-country-code="MK" value="+389">Macedonia +389</option><option data-country-code="MG" value="+261">Madagascar +261</option><option data-country-code="MW" value="+265">Malawi +265</option><option data-country-code="MY" value="+60">Malaysia +60</option><option data-country-code="MV" value="+960">Maldives +960</option><option data-country-code="ML" value="+223">Mali +223</option><option data-country-code="MT" value="+356">Malta +356</option><option data-country-code="IM" value="+44">Isle of Man +44</option><option data-country-code="MH" value="+692">Marshall Islands +692</option><option data-country-code="MQ" value="+596">Martinique +596</option><option data-country-code="MR" value="+222">Mauritania +222</option><option data-country-code="MU" value="+230">Mauritius +230</option><option data-country-code="YT" value="+269">Mayotte +269</option><option data-country-code="MX" value="+52">Mexico +52</option><option data-country-code="FM" value="+691">Micronesia +691</option><option data-country-code="MD" value="+373">Moldova +373</option><option data-country-code="MC" value="+377">Monaco +377</option><option data-country-code="MN" value="+976">Mongolia +976</option><option data-country-code="MS" value="+1664">Montserrat +1664</option><option data-country-code="MA" value="+212">Morocco +212</option><option data-country-code="MZ" value="+258">Mozambique +258</option><option data-country-code="MM" value="+95">Myanmar +95</option><option data-country-code="NA" value="+264">Namibia +264</option><option data-country-code="NR" value="+674">Nauru +674</option><option data-country-code="NP" value="+977">Nepal +977</option><option data-country-code="AN" value="+599">Netherlands Antilles +599</option><option data-country-code="NL" value="+31">Netherlands +31</option><option data-country-code="NC" value="+687">New Caledonia +687</option><option data-country-code="NZ" value="+64">New Zealand +64</option><option data-country-code="NI" value="+505">Nicaragua +505</option><option data-country-code="NE" value="+227">Niger +227</option><option data-country-code="NG" value="+234">Nigeria +234</option><option data-country-code="NU" value="+683">Niue +683</option><option data-country-code="NF" value="+672">Norfolk Island +672</option><option data-country-code="MP" value="+1670">Northern Mariana Islands +1670</option><option data-country-code="NO" value="+47">Norway +47</option><option data-country-code="OM" value="+968">Oman +968</option><option data-country-code="PK" value="+92">Pakistan +92</option><option data-country-code="PW" value="+680">Palau +680</option><option data-country-code="PS" value="+970">Palestinian Territory Occupied +970</option><option data-country-code="PA" value="+507">Panama +507</option><option data-country-code="PG" value="+675">Papua New Guinea +675</option><option data-country-code="PY" value="+595">Paraguay +595</option><option data-country-code="PE" value="+51">Peru +51</option><option data-country-code="PH" value="+63">Philippines +63</option><option data-country-code="PN" value="+0">Pitcairn Islands +0</option><option data-country-code="PL" value="+48">Poland +48</option><option data-country-code="PT" value="+351">Portugal +351</option><option data-country-code="PR" value="+1787">Puerto Rico +1787</option><option data-country-code="QA" value="+974">Qatar +974</option><option data-country-code="RE" value="+262">Reunion +262</option><option data-country-code="RO" value="+40">Romania +40</option><option data-country-code="RU" value="+7">Russia +7</option><option data-country-code="RW" value="+250">Rwanda +250</option><option data-country-code="SH" value="+290">Saint Helena +290</option><option data-country-code="KN" value="+1869">Saint Kitts And Nevis +1869</option><option data-country-code="LC" value="+1758">Saint Lucia +1758</option><option data-country-code="PM" value="+508">Saint Pierre and Miquelon +508</option><option data-country-code="VC" value="+1784">Saint Vincent And The Grenadines +1784</option><option data-country-code="WS" value="+684">Samoa +684</option><option data-country-code="SM" value="+378">San Marino +378</option><option data-country-code="ST" value="+239">Sao Tome and Principe +239</option><option data-country-code="SA" value="+966">Saudi Arabia +966</option><option data-country-code="SN" value="+221">Senegal +221</option><option data-country-code="RS" value="+381">Serbia +381</option><option data-country-code="SC" value="+248">Seychelles +248</option><option data-country-code="SL" value="+232">Sierra Leone +232</option><option data-country-code="SG" value="+65">Singapore +65</option><option data-country-code="SK" value="+421">Slovakia +421</option><option data-country-code="SI" value="+386">Slovenia +386</option><option data-country-code="XG" value="+44">Smaller Territories of UK +44</option><option data-country-code="SB" value="+677">Solomon Islands +677</option><option data-country-code="SO" value="+252">Somalia +252</option><option data-country-code="ZA" value="+27">South Africa +27</option><option data-country-code="GS" value="+0">South Georgia +0</option><option data-country-code="SS" value="+211">South Sudan +211</option><option data-country-code="ES" value="+34">Spain +34</option><option data-country-code="LK" value="+94">Sri Lanka +94</option><option data-country-code="SD" value="+249">Sudan +249</option><option data-country-code="SR" value="+597">Suriname +597</option><option data-country-code="SJ" value="+47">Svalbard And Jan Mayen Islands +47</option><option data-country-code="SZ" value="+268">Swaziland +268</option><option data-country-code="SE" value="+46">Sweden +46</option><option data-country-code="CH" value="+41">Switzerland +41</option><option data-country-code="SY" value="+963">Syria +963</option><option data-country-code="TW" value="+886">Taiwan +886</option><option data-country-code="TJ" value="+992">Tajikistan +992</option><option data-country-code="TZ" value="+255">Tanzania +255</option><option data-country-code="TH" value="+66">Thailand +66</option><option data-country-code="TG" value="+228">Togo +228</option><option data-country-code="TK" value="+690">Tokelau +690</option><option data-country-code="TO" value="+676">Tonga +676</option><option data-country-code="TT" value="+1868">Trinidad And Tobago +1868</option><option data-country-code="TN" value="+216">Tunisia +216</option><option data-country-code="TR" value="+90">Turkey +90</option><option data-country-code="TM" value="+7370">Turkmenistan +7370</option><option data-country-code="TC" value="+1649">Turks And Caicos Islands +1649</option><option data-country-code="TV" value="+688">Tuvalu +688</option><option data-country-code="UG" value="+256">Uganda +256</option><option data-country-code="UA" value="+380">Ukraine +380</option><option data-country-code="AE" value="+971">United Arab Emirates +971</option><option data-country-code="GB" value="+44">United Kingdom +44</option><option data-country-code="US" value="+1">United States +1</option><option data-country-code="UM" value="+1">United States Minor Outlying Islands +1</option><option data-country-code="UY" value="+598">Uruguay +598</option><option data-country-code="UZ" value="+998">Uzbekistan +998</option><option data-country-code="VU" value="+678">Vanuatu +678</option><option data-country-code="VA" value="+39">Vatican City(Holy See) +39</option><option data-country-code="VE" value="+58">Venezuela +58</option><option data-country-code="VN" value="+84">Vietnam +84</option><option data-country-code="VG" value="+1284">Virgin Islands (British) +1284</option><option data-country-code="VI" value="+1340">Virgin Islands (US) +1340</option><option data-country-code="WF" value="+681">Wallis And Futuna Islands +681</option><option data-country-code="EH" value="+212">Western Sahara +212</option><option data-country-code="YE" value="+967">Yemen +967</option><option data-country-code="YU" value="+38">Yugoslavia +38</option><option data-country-code="ZM" value="+260">Zambia +260</option><option data-country-code="ZW" value="+263">Zimbabwe +263</option></select></div><div class="col-sm-6" style="float: left; width: 50%"><input class="form-control required" aria-required="true" name="Contact" type="number" style="float: left;" aria-placeholder="" placeholder=""></div></div> </div> 
								<div class="formElement_4 form-group fadeMe text clearfix col-sm-12 textfield paymentCount" data-count="4"><label class="fitText block_label" tabindex="0" for="form_input_4" aria-label="City" style="display: block;">City*</label><input class="form-control required" aria-required="true" name="City" id="form_input_4" type="text" aria-placeholder="" placeholder=""> </div> 
								<div class="formElement_5 form-group fadeMe text clearfix col-sm-12 number paymentCount" data-count="5"><label class="fitText block_label" for="form_input_5" tabindex="0" aria-label="Approx number of boxes/quandity required" style="display: block;">Approx number of boxes/quandity required</label><input class="form-control" id="form_input_5" name="Approx number of boxes/quandity required" type="number" aria-placeholder="" aria-valuemin="" aria-valuemax="" aria-required="false" placeholder="" onkeydown="if (!window.__cfRLUnblockHandlers) return false; preventInvalidInput(event)"> </div> 
								<div class="formElement_6 form-group fadeMe text clearfix col-sm-12 textarea paymentCount" data-count="6"><label class="fitText block_label" for="form_input_6" tabindex="0" aria-label="More details about the order - Types of products per box, special notes, ocassion, budget, or anything else you′d like us to know!" style="display: block;">More details about the order - Types of products per box, special notes, ocassion, budget, or anything else you′d like us to know!</label><textarea class="form-control" id="form_input_6" name="More details about the order - Types of products per box, special notes, ocassion, budget, or anything else you′d like us to know!" data-max="250" aria-valuemax="250" data-limiting="false" style="height: 50px" aria-required="false" aria-placeholder="" placeholder=""></textarea> </div> 
				</div>
				<div class="clearfix"></div>

				<div class="form_submit_div text-center">
					<button type="submit" class="btn">Submit <span class="price"></span></button>
				</div>
			</div>
	</div>
</div>


<style>
  .remove-image{
    margin-left: 5px;
    border: none;
    background: none;
    font-size: 17px;
    vertical-align: middle;
  }
  .remove-file{
    margin-left: 5px;
    border: none;
    background: none;
    font-size: 17px;
    vertical-align: middle;
  }
  .remove-multi-image{
    margin-left: 5px;
    border: none;
    background: none;
    font-size: 17px;
    vertical-align: middle;
  }
  .remove-multi-file{
    margin-left: 5px;
    border: none;
    background: none;
    font-size: 17px;
    vertical-align: middle;
  }
  .remove-signature{
    margin-left: 5px;
    border: none;
    background: none;
    font-size: 17px;
    vertical-align: middle;
  }
  .remove-multi-text{
    color: #333333;
    font-size: 12px;
  }
  .single-text-width{
    display: inline-block;
    max-width: 35ch;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    vertical-align: middle;
  }
  .multi-text-width{
    display: inline-block;
    max-width: 35ch;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    vertical-align: middle;
  }
  .remove-multi-file:hover {
    color: black;
    transform: scale(1.5);
    margin-left: 5px;
  }
  .remove-multi-image:hover{
    color: black;
    transform: scale(1.5);
    margin-left: 5px;
  }
  .remove-file:hover{
    color: black;
    transform: scale(1.5);
    margin-left: 5px;
  }
  .remove-image:hover{
    color: black;
    transform: scale(1.5);
    margin-left: 5px;
  }
  .remove-signature:hover {
    color: black;
    transform: scale(1.5);
    margin-left: 5px;
  }

	/* ********************* Product Choice Element CSS Start ********************* */
	.clear-selection-link {
		background: none;
		border: none;
		padding: 0;
		margin: 0;
		font-family: inherit;
		font-size: inherit;
		color: blue;
		text-decoration: underline;
		cursor: pointer;
		float: right;
		font-size: 13px;
	}

	.clear-selection-container{
		margin-bottom: 28px;
	}

	.clear-selection-link:hover {
		text-decoration: none;
	}
	/* ********************* Product Choice Element CSS End ********************* */

	/* ********************* Image Choice Description CSS Start ********************* */
	.wrap-text {
	    overflow-wrap: break-word; 
	    white-space: normal;
	}
	/* ********************* Image Choice Description CSS End ********************* */
</style>
				</div>
			</form>
		</div>
		<div class="after_form_submit" style="display:none;">
			<div class="form_generater_form_div text-center" tabindex="0"></div>
		</div>

			<p class="hulk-powered-wrapper text-right">Shopify Forms <a href="https://www.hulkapps.com/?utm_campaign=poweredby&amp;utm_medium=hulkapps&amp;utm_source=fb_app" alt="Shopify Forms Powered by HulkApps" target="_blank">Powered by HulkApps</a></p>


  <script type="text/javascript">
    function convertImageToBase64(imgUrl) {
      return new Promise((resolve, reject) => {
          var image = new Image();
          image.crossOrigin = 'anonymous';
          image.onload = function () {
              var canvas = document.createElement('canvas');
              var ctx = canvas.getContext('2d');
              canvas.height = image.naturalHeight;
              canvas.width = image.naturalWidth;
              ctx.drawImage(image, 0, 0);
              var dataUrl = canvas.toDataURL();
              resolve(dataUrl);
          };
          image.onerror = function () {
              reject(new Error('Failed to load image'));
          };
          image.src = imgUrl;
      });
    }

    function GeneratePdf() {
        var element = $('.response_heading')[0];
        var element1 = $('.question_content')[0];
        element.appendChild(element1);
        element.style.textAlign = "center";
        element1.style.border = "1px solid #ccc";
        element1.style.borderCollapse = "collapse";
        element1.style.borderSpacing = "0";
        element1.style.textAlign = "center";
        element1.style.marginLeft = "60px";
        element1.style.color = "black";
        element1.style.fontSize = "15px";
        element1.style.fontFamily = "Lato,sans-serif";
        element1.style.lineHeight = "26px";
        element1.style.letterSpacing = ".07rem";
        element1.style.width = "550px";
        element1.style.textTransform = "none";

        // Base64 encode third-party images
        const imgElements = element1.querySelectorAll('.question_content img');
        const promises = [];
        imgElements.forEach(img => {
            promises.push(
                convertImageToBase64(img.src)
                    .then(dataUrl => {
                        img.src = dataUrl;
                    })
                    .catch(error => {
                        console.error('Error converting image to base64:', error);
                        img.style.display = 'none'; 
                    })
            );
        });

        // Wait for all image promises to resolve
        Promise.all(promises)
        .then(() => {
          // Generate PDF
          html2pdf(element, { filename: 'Bulk Order Form' + '_response.pdf' });

          // Reset styles
          element1.style.setProperty('margin-left', 'initial');
          element1.style.setProperty('font-weight', 'initial');
          element1.style.setProperty('width', '100%');
          element1.style.setProperty('font-family', 'revert');
        })
        .catch(error => {
          console.error('Error fetching images:', error);
        });

    }

    function download(html, filename) {
      var data = [];
      var rows = document.querySelectorAll("table tr");
      for (var i = 0; i < rows.length; i++) {
        var row = [], cols = rows[i].querySelectorAll("td, th");
        for (var j = 0; j < cols.length; j++) {
          var cellData = '';
          //var imgs = cols[j].querySelectorAll("a:(:has(img))");
		  var imgs = cols[j].querySelectorAll("a:has(img)");
          var links = cols[j].querySelectorAll("a:not(:has(img))");
          
          // Append sources of all images in the cell
          for (var k = 0; k < imgs.length; k++) {
            //cellData += (k > 0 ? ',' : '') + imgs[k].src; // Add comma for multiple images
			cellData += (k > 0 ? ',' : '') + imgs[k].href; 
          }
          
          // Append href attributes of all links in the cell
          for (var k = 0; k < links.length; k++) {
            cellData += (k > 0 ? ',' : '') + links[k].href;
            // Add new line here
          }
          
          // Append text content of the cell
          cellData += (imgs.length > 0 || links.length > 0 ? '\n' : '') + cols[j].innerText.trim(); // New line if images or links exist
          
          // Add cellData to the row
          row.push(cellData.trim());
        }
        data.push(row.join(","));
      }
      downloadCSVFile(data.join("\n"), filename);
    }

    // function download(html, filename) {
    //     var data = [];
    //     var rows = document.querySelectorAll("table tr");
    //     for (var i = 0; i < rows.length; i++) {
    //         var row = [], cols = rows[i].querySelectorAll("td, th");
    //         for (var j = 0; j < cols.length; j++) {
    //             var cellData = cols[j].innerText.trim();
    //             // Check if cell contains an image
    //             var img = cols[j].querySelector("img");
    //             if (img) {
    //                 // Append the source URL of the first image found
    //                 cellData += " " + img.src;
    //             }
    //             // Check if cell contains a link
    //             var link = cols[j].querySelector("a");
    //             if (link) {
    //                 // Append the href attribute value of the first link found
    //                 cellData += " " + link.href;
    //             }
    //             row.push(cellData);
    //         }
    //         data.push(row.join(","));
    //     }
    //     downloadCSVFile(data.join("\n"), filename);
    // }

    function downloadCSVFile(csv, filename) {
        var csv_file, download_link;
        csv_file = new Blob([csv], {type: "text/csv"});
        download_link = document.createElement("a");
        download_link.download = 'Bulk Order Form' + '_response.csv';
        download_link.href = window.URL.createObjectURL(csv_file);
        download_link.style.display = "none";
        document.body.appendChild(download_link);
        download_link.click();
    }

		jQuery(document).ready(function(){

			var deletefile = [];
			var formData = {"div_back_gradient_1":"#fff","div_back_gradient_2":"#fff","back_color":"#fff","form_title":"","form_submit":"Submit","after_submit":"hideAndmessage","after_submit_msg":"","captcha_enable":"no","label_style":"blockLabels","input_border_radius":"2","back_type":"transparent","input_back_color":"#fff","input_back_color_hover":"#fff","back_shadow":"none","label_font_clr":"#333333","input_font_clr":"#333333","button_align":"fullBtn","button_clr":"#fff","button_back_clr":"#333333","button_border_radius":"2","form_width":"100%","form_border_size":"2","form_border_clr":"#c7c7c7","form_border_radius":"1","label_font_size":"14","input_font_size":"12","button_font_size":"16","form_padding":"35","input_border_color":"#ccc","input_border_color_hover":"#ccc","btn_border_clr":"#333333","btn_border_size":"1","form_name":"Bulk Order Form","":"","form_emails":"operations@thengacoco.com","admin_email_subject":"New form submission received.","admin_email_message":"Hi [first-name of store owner],<br>Someone just submitted a response to your form.<br>Please find the details below:","form_access_message":"<p>Please login to access the form<br>Do not have an account? Create account</p>","notification_email_send":true,"formElements":[{"type":"text","position":0,"label":"Name","customClass":"","halfwidth":"no","Conditions":{},"required":"yes","page_number":1},{"Conditions":{},"type":"text","position":1,"label":"Organisation Name (Optional)","page_number":1},{"type":"email","position":2,"label":"Email","required":"yes","email_confirm":"yes","Conditions":{},"page_number":1},{"Conditions":{},"type":"phone","position":3,"label":"Contact","required":"yes","default_country_code":"India +91","page_number":1},{"Conditions":{},"type":"text","position":4,"label":"City","required":"yes","page_number":1},{"Conditions":{},"type":"number","position":5,"label":"Approx number of boxes/quandity required","page_number":1,"required":"no"},{"Conditions":{},"type":"textarea","position":6,"label":"More details about the order - Types of products per box, special notes, ocassion, budget, or anything else you′d like us to know!","page_number":1,"required":"no"}]};


		if(formData['label_fonts_type'] == 'System Fonts'){
    }else if(formData['label_fonts_type'] == 'Custom Fonts'){
	    	if (typeof formData["label_custom_font_name"] !== 'undefined' && typeof formData["label_custom_font_url"] !== 'undefined') {
					var newStyle = document.createElement('style');
					newStyle.appendChild(document.createTextNode("\
						@font-face {\
						    font-family: " + formData["label_custom_font_name"] + ";\
						    src: url("+formData["label_custom_font_url"]+");\
						}\
					"));
					document.head.appendChild(newStyle);
			}
    }else{
		  if (typeof formData["label_font_family"] !== 'undefined') {              
				 $("head").append("<link href='https://fonts.googleapis.com/css?family=" + formData["label_font_family"] + "' rel='stylesheet' type='text/css'>");
			}
    }

    if(formData['input_fonts_type'] == 'System Fonts'){
    }else if(formData['input_fonts_type'] == 'Custom Fonts'){
	    	if (typeof formData["input_custom_font_name"] !== 'undefined' && typeof formData["input_custom_font_url"] !== 'undefined') {
					var newStyle = document.createElement('style');
					newStyle.appendChild(document.createTextNode("\
						@font-face {\
						    font-family: " + formData["input_custom_font_name"] + ";\
						    src: url("+formData["input_custom_font_url"]+");\
						}\
					"));
					document.head.appendChild(newStyle);
			}
    }else{
		  if (typeof formData["input_font_family"] !== 'undefined') {              
				 $("head").append("<link href='https://fonts.googleapis.com/css?family=" + formData["input_font_family"] + "' rel='stylesheet' type='text/css'>");
			}
    }

		var formElementCount = 0;

if(typeof formData['label_style'] !== 'undefined' && formData['label_style'] != 'blockLabels'){
    $(".card_deails_div .form-group").each(function(index){
        block_label = $(this).find('label').text();
        $(this).find(':input').attr('placeholder', block_label);
        $(this).find('label').css("display", "none");
    });
}

iframe_resize('no', 'no', 'initial');

if(typeof formData['button_align'] !== 'undefined'){
    if(formData['button_align'] == "leftBtn"){
        $(".form_generater_form_div div.form_submit_div ").addClass('text-left').removeClass('text-center');
    } else if(formData['button_align'] == "centerBtn"){
        $(".form_generater_form_div div.form_submit_div ").addClass('text-center');
    } else if(formData['button_align'] == "rightBtn"){
        $(".form_generater_form_div .form_submit_div ").addClass('text-right').removeClass('text-center');
    }
}

if (formData['form_banner_alignment'] !== undefined){
  if (formData['form_banner_alignment'] == "left"){
     $('.form_banner_div').find('img').css("float", "none");
     $('.form_banner_div').css('text-align', 'left');
  }else if(formData['form_banner_alignment'] == "center"){
     $('.form_banner_div').css('text-align', 'center');
     $('.form_banner_div').find('img').css("float", "none");
  }else{
     $('.form_banner_div').find('img').css("float", "none");
     $('.form_banner_div').css('text-align', 'right');
  }  
}

paymentDisplay();
$.each(formData['formElements'], function( index, value ) {
    var type = value['type'];
    var minDate = '';
    var maxDate = '';
    if(typeof value['minDate'] !== 'undefined'){
        minDate = value['minDate'];
    }
    if(typeof value['maxDate'] !== 'undefined'){
        maxDate = value['maxDate'];
    }

    if(type == "date"){
        if(value['datetime'] == "time"){
            $('#datetime_'+formElementCount).find(':input').datetimepicker({
                format: 'LT',
                ignoreReadonly: true,
                allowInputToggle: true
            });
        } else if(value['datetime'] == "date") {
            if((minDate != '') && (maxDate != '')){
                $('#datetime_'+formElementCount).find(':input').datetimepicker({
                    format: 'MM/DD/YYYY',
                    minDate: minDate,
                    maxDate: maxDate,
                    ignoreReadonly: true,
                    allowInputToggle: true
                });
            } else if((minDate == '') && (maxDate == '')){
                $('#datetime_'+formElementCount).find(':input').datetimepicker({
                    format: 'MM/DD/YYYY',
                    ignoreReadonly: true,
                    allowInputToggle: true
                });
            } else {
                if((minDate != '')){
                    $('#datetime_'+formElementCount).find(':input').datetimepicker({
                        format: 'MM/DD/YYYY',
                        minDate: minDate,
                        ignoreReadonly: true,
                        allowInputToggle: true
                    });
                } else if(maxDate != '') {
                    $('#datetime_'+formElementCount).find(':input').datetimepicker({
                        format: 'MM/DD/YYYY',
                        maxDate: maxDate,
                        ignoreReadonly: true,
                        allowInputToggle: true
                    });
                }
            }
        } else {
            if((minDate != '') && (maxDate != '')){
                $('#datetime_'+formElementCount).find(':input').datetimepicker({
                    minDate: minDate,
                    maxDate: maxDate,
                    ignoreReadonly: true,
                    allowInputToggle: true
                });
            } else if((minDate == '') && (maxDate == '')){
                $('#datetime_'+formElementCount).find(':input').datetimepicker({
                    ignoreReadonly: true,
                    allowInputToggle: true
                });
            } else {
                if((minDate != '')){
                    $('#datetime_'+formElementCount).find(':input').datetimepicker({
                        minDate: minDate,
                        ignoreReadonly: true,
                        allowInputToggle: true
                    });
                } else if(maxDate != '') {
                    $('#datetime_'+formElementCount).find(':input').datetimepicker({
                        maxDate: maxDate,
                        ignoreReadonly: true,
                        allowInputToggle: true
                    });
                }
            }
        }
    }



    if(type == "ratings"){
      var starCount = value['starCount'] ? value['starCount'] : 5
      var isChecked = value['halfwidth'] && value['halfwidth'] == 'yes' ? true : false
      var labelPadding, divMarginTop;
      if(starCount > 7 && isChecked == true){
          labelPadding = 5;
          divMarginTop = 5;
      }else{
          labelPadding = 10;
          divMarginTop = 0;
      }
      var starRating = '';
      for (var i = starCount; i >= 1; i--) {
          starRating += '<input id="star-'+i+'-'+formElementCount+'" type="radio" name="rating'+formElementCount+'" value="'+i+'" /><label class="rating-inline" tabindex="0" aria-label="Select '+i+'" for="star-'+i+'-'+formElementCount+'" title="'+i+' stars" style="padding:'+labelPadding+'px;"><i class="active fa fa-star" aria-hidden="true"></i></label>';
      }
      $('.star-rating-'+formElementCount).empty().append(starRating).css('margin-top', divMarginTop + 'px');
    }

    if(type == "picture_choice"){
        if (value['pictures'] !== undefined){
            var picture_choice_type = 'radio'
            if(typeof value['multiple_select'] !== undefined){
                if(value['multiple_select'] == 'yes'){
                    picture_choice_type = 'checkbox'
                }
            }
            
            pictures = value['pictures']

            var descriptions = [];
            let descriptionIndex = 0; 

            if (value['add_images_description'] == "yes") {
                descriptions = value['images_description'].split('\n').map(desc => desc.trim()).filter(desc => desc !== "");
            }

            $.each(pictures, function( ind, val ) {
                var imageNameWithExtension = ind.split('/').pop();
                var imageNameWithoutExtension = imageNameWithExtension.split('.').slice(0, -1).join('.');

                var imageDescription = (value['add_images_description'] == "yes" && descriptionIndex < descriptions.length) ? descriptions[descriptionIndex] : "";

                if (value['add_images_description'] == "yes") {
                    descriptionIndex++; 
                }

                var descriptionStyle = imageDescription ? 'height: 65px;' : '';
            
                $('.picture_choice .input' + formElementCount).append(
                    '<div class="col-md-6" id="picture-choice-' + val + '" tabindex="0" aria-label="' + imageNameWithoutExtension + '" style="width: 50%; float: left;">' +
                        '<label style="width: 100%">' +
                            '<input type="' + picture_choice_type + '" name="picture-choice-img-' + formElementCount + '" value="picture-choice-img-' + formElementCount + '">' +
                            '<img src="' + ind + '" class="picture_choice_img" style="width: 100%;margin-top: 10px;">' +
                        '</label>' +
                        '<div class="image-description wrap-text" style="text-align: center; ' + descriptionStyle + ' margin-top: 5px;">' + imageDescription + '</div>' +
                    '</div>'
                );
            })
        }

        if(formData['formElements'][formElementCount]['img_outline_clr'] !== undefined){
            radio_outline_color = '.formElement_'+formElementCount+'.picture_choice [type=radio]:checked + img{outline: 2px solid '+formData['formElements'][formElementCount]['img_outline_clr']+';}'
            checkbox_outline_colr = '.formElement_'+formElementCount+'.picture_choice [type=checkbox]:checked + img{outline: 2px solid '+formData['formElements'][formElementCount]['img_outline_clr']+';}' 
            $("#picture_choice_css").append(radio_outline_color);
            $("#picture_choice_css").append(checkbox_outline_colr);
        }
    }

    if(type == "product_choice"){
      if (value['products'] !== undefined){
        var product_choice_type = 'radio'
        if(typeof value['multiple_product_select'] !== undefined){
            if(value['multiple_product_select'] == 'yes'){
                product_choice_type = 'checkbox'
            }
        }

        products = value['products']

        var columnClassProducts = "col-sm-4"
        if(value['number_of_products'] == 2){
            columnClassProducts = "col-sm-6"
        }else if(value['number_of_products'] == 3){
            columnClassProducts = "col-sm-4"
        }else{
            columnClassProducts = "col-sm-3"
        }

        var imageHeightProduct;
        if(typeof value['productimageheight'] !== 'undefined'){
            imageHeightProduct = value['productimageheight'];
        }else{
          if (value['number_of_products'] == 3){
              imageHeightProduct = 150;
          }else if(value['number_of_products'] == 4){
              imageHeightProduct = 100;
          }else if(value['number_of_products'] == 2){
              imageHeightProduct = 200;
          }
        }

        var gridHTML = '<div class="product-grid product-grid-'+formElementCount+'">';
        $.each(products, function (ind, val) {
          gridHTML += '<div tabindex="0" aria-label="'+val.title+'" class="'+columnClassProducts+'" id="product-choice-img-'+val.id+'">' +
                  '<label>' +
                  '<input type="' + product_choice_type + '" name="product-choice-img-' + formElementCount + '" value="product-choice-img-' + formElementCount + '">' +
                  '<img src="' + val.image + '" alt="' + val.title + '" style="height:'+imageHeightProduct+'px; width: 300px;">' +
                  '<div class="product-title">' + val.title + '</div>' +
                  '</label></div>';
        });
        gridHTML += '</div>';

        if ($('.product_choice .input' + formElementCount + ' #product-grid-' + formElementCount).length === 0) {
            $('.product_choice .input' + formElementCount).append(gridHTML);
        } else {
          $('.product_choice .input' + formElementCount + ' #product-grid-' + formElementCount).append(gridHTML);
        }
      }

      if(formData['formElements'][formElementCount]['product_outline_clr'] !== undefined){
        radio_outline_color = '.formElement_'+formElementCount+'.product_choice [type=radio]:checked + img{outline: 2px solid '+formData['formElements'][formElementCount]['product_outline_clr']+';}'
        checkbox_outline_colr = '.formElement_'+formElementCount+'.product_choice [type=checkbox]:checked + img{outline: 2px solid '+formData['formElements'][formElementCount]['product_outline_clr']+';}'

        $("#product_choice_css").append(radio_outline_color);
        $("#product_choice_css").append(checkbox_outline_colr);
      }
    }

    if(type == "image_display"){
      if (value['image_display_url'] !== undefined){
        val = value['image_display_url']
        if(typeof value['imageheight'] !== 'undefined'){
            image_height = value['imageheight'];
        }else{
            image_height = 150;
        }
        if(typeof value['imagewidth'] !== 'undefined'){
            image_width = value['imagewidth'];
        }else{
            image_width = 300;
        }
        $('.image_display .input'+formElementCount).append('<div class="col-md-12" id="image-display-'+formElementCount+'"><img src="'+val+'" width="'+image_width+'px" height="'+image_height+'px"></div>');
        $('.image_display_preview_'+formElementCount).append('<div class="col-md-3"><img src="'+val+'" style="height: 100px"><a class="remove-image" id="display-delete-image-'+formElementCount+'" href="#" style="display: inline;">&#215;</a></div>');
        if(typeof value["image_alignmet"] !== 'undefined'){
          if(value["image_alignmet"] == 'left'){
            $('.image_display .input'+formElementCount).find('img').css("float", "none");
            $('.image_display .input'+formElementCount).find('div').css('text-align', '');
          }else if(value["image_alignmet"] == "center"){
            $('.image_display .input'+formElementCount).find('div').css('text-align', 'center');
            $('.image_display .input'+formElementCount).find('img').css("float", "none");
          }else{
            $('.image_display .input'+formElementCount).find('img').css("float", "right");
            $('.image_display .input'+formElementCount).find('div').css('text-align', 'none');
          }
        }else{
          $('.image_display .input'+formElementCount).find('img').css("float", "none");
          $('.image_display .input'+formElementCount).find('div').css('text-align', '');
        }
      }
    }

    if(formData['label_style'] == 'inlineLabels'){
      $(".formElement_"+formElementCount).each(function(index) {
        var email_validation_label = '';
        if(typeof value['email_validate_field_label'] !== 'undefined'){
          email_validation_label = value['email_validate_field_label'];
        }

        var phone_validation_label = '';
        if(typeof value['phone_validate_field_label'] !== 'undefined'){
          phone_validation_label = value['phone_validate_field_label'];
        }

        if($(this).hasClass('dateTime') || $(this).hasClass('textfield') || $(this).hasClass('url') || $(this).hasClass('textarea') || $(this).hasClass('number') || $(this).hasClass('dateTime') || $(this).hasClass('newDate') || $(this).hasClass('Time') || $(this).hasClass('multi_text')){
          $(this).find('label').css("display", "none");
          $(this).find(':input').attr("placeholder", $(this).find('label').text());
        } else if($(this).hasClass('address')){
          addressLabelChange('inlineLabels', formElementCount);
        } else if($(this).hasClass('multi_column_text')){
          multiColumnLabelChange('inlineLabels', formElementCount);
        } else if($(this).hasClass('select')){
          $(this).find('label').first().css("display", "none");
          $(this).find('select > option:first-child').text($(this).find('label').first().text());
          $(this).find('label').first().after($(this).find('select'));
          $(this).find('label').last().css("display", "none");
          $(this).find('label').last().after($(this).find(':input').last());
          $(this).find(':input').last().attr("placeholder", $(this).find('label').last().text());
          $(this).find('.other-fields :input').last().attr("aria-placeholder", $(this).find('.other-fields label').last().text());
        }

        if($(this).hasClass('checkbox-multi')){
          $(this).find('.other-fields label').last().css("display", "none");
          $(this).find('.other-fields :input').last().attr("placeholder", $(this).find('.other-fields label').last().text());
          $(this).find('.other-fields :input').last().attr("aria-placeholder", $(this).find('.other-fields label').last().text());

        }

        if($(this).hasClass('dateTime')){
          $(this).find('label').css("display", "none");
          $(this).find(':input').attr("placeholder", $(this).find('label').text());
          $(this).find(':input').attr("aria-placeholder", $(this).find('label').text());
        }

        if ($(this).hasClass('phone')){
          var labels = $(this).find('label');

          if(labels.length === 1){
            $(this).find('label').css("display", "none");
            $(this).find(':input').attr("placeholder", $(this).find('label').text());
            $(this).find(':input').attr("aria-placeholder", $(this).find('label').text());
          }else{
            var val_label_element = $(this).find('label').first().text();

            $(this).find('label').first().css("display", "none").text(val_label_element);
            $(this).find(':input[type="number"]').first().attr("placeholder", val_label_element);
            $(this).find(':input[type="number"]').first().attr("aria-placeholder", val_label_element);

            if (phone_validation_label.trim() === "") {
                phone_validation_label = val_label_element;
            }
            $(this).find('div.validation_div').css("margin-top", "10px");
            $(this).find('label').last().css("display", "none").text(phone_validation_label);
            $(this).find(':input[type="number"]').last().attr("placeholder", phone_validation_label);
            $(this).find(':input[type="number"]').last().attr("aria-placeholder", phone_validation_label);
          }
        }

        if ($(this).hasClass('password')){
          $(this).find('label').first().css("display", "none").text($(this).find('label').first().text());
          $(this).find(':input').first().attr("placeholder", $(this).find('label').first().text());
          var last_label = $(this).find('label').last().text();
          var last_placeholder = $(this).find(':input').last().attr('placeholder');
          $(this).find('label').last().css("display", "none").text(last_label);
          $(this).find(':input').last().attr("placeholder", last_label);
          $(this).find(':input').last().attr("aria-placeholder", last_label);
        }

        if ($(this).hasClass('email')) {
            var labels = $(this).find('label');

            if (labels.length === 1) {
                var val_label_element = $(this).find('label').first().text();
                $(this).find('label').first().attr("for", "").css("display", "none").text(val_label_element);
                $(this).find(':input').first().attr({
                    "id": "",
                    "placeholder": val_label_element,
                    "aria-placeholder": val_label_element
                });
                $(this).removeClass('has-float-label');
            } else {
                var val_label_element_first = $(this).find('label').first().text();
                $(this).find('label').first().attr("for", "").css("display", "none").text(val_label_element_first);
                $(this).find(':input').first().attr({
                    "id": "",
                    "placeholder": val_label_element_first,
                    "aria-placeholder": val_label_element_first
                });
                $(this).removeClass('has-float-label');

                var val_label_element_second = $(this).find('label').last().text().trim();

                if (val_label_element_second === "") {
                    val_label_element_second = val_label_element_first; 
                }

                $(this).find('label').last().attr("for", "").css("display", "none").text(val_label_element_second);

                $(this).find(':input').last().css("margin-top", "10px").attr({
                    "id": "",
                    "placeholder": val_label_element_second,
                    "aria-placeholder": val_label_element_second 
                });

                $(this).find('div').removeClass('has-float-label');
            }
        }

        if($(this).hasClass('validation_field')){
          $(this).find('label').first().css("display", "none").text($(this).find('label').first().text());
          $(this).find(':input').first().attr("placeholder", $(this).find('label').first().text());
          $(this).find(':input').last().attr("aria-placeholder", $(this).find('label').first().text());
          $(this).find(':input').last().css("margin-top", "10px")

          if($(this).find('label').last().text().trim() === ''){
              $(this).find('label').last().css("display", "none").text($(this).find('label').first().text());
              $(this).find(':input').last().attr("placeholder", $(this).find('label').first().text());
          }else{
              $(this).find('label').last().css("display", "none").text($(this).find('label').last().text());
              $(this).find(':input').last().attr("placeholder", $(this).find('label').last().text());
              $(this).find(':input').last().attr("aria-placeholder", $(this).find('label').last().text());
          }
        }
      });
    } else if (formData['label_style'] == 'blockLabels'){
      elementHolder = '';
      if(typeof value['placeholder'] !== 'undefined'){
          elementHolder = value['placeholder'];
      }

      var validation_second_label = '';
      if(typeof value['field2_validation_label'] !== 'undefined'){
        validation_second_label = value['field2_validation_label'];
      }

      var validation_second_placeholder = '';
      if(typeof value['field2_validation_placeholder'] !== 'undefined'){
        validation_second_placeholder = value['field2_validation_placeholder'];
      }

      var checkbox_for_validation_second_field = '';
      if(typeof value['another_field'] !== 'undefined'){
        checkbox_for_validation_second_field = value['another_field'];
      }

      $(".formElement_"+formElementCount).each(function(index) {
        if($(this).hasClass('textfield') || $(this).hasClass('textarea') || $(this).hasClass('number') || $(this).hasClass('email')){
          $(this).find('label').css("display", "block");
          $(this).find(':input').attr("placeholder", elementHolder);
        } else if($(this).hasClass('address')){
          addressLabelChange('blockLabels', formElementCount);
        }else if($(this).hasClass('multi_column_text')){
          multiColumnLabelChange('blockLabels', formElementCount);
        }

        if($(this).hasClass('select')){
          elementHolder = (elementHolder == "") ? "Please Select" : elementHolder;
          $(this).find('label').first().css("display", "block");
          $(this).find('select > option:first-child').text(elementHolder);
          $(this).find('label').first().after($(this).find('select'));
        }

        if ($(this).hasClass('phone')){
            let phone_validation_placeholder = ""
            if(typeof value['phone_validate_field_label'] !== 'undefined'){
              phone_validation_placeholder = value['phone_validate_field_placeholder'];

            }
            $(this).find('label').css("display", "block");
            $(this).find(':input').attr("placeholder", elementHolder);
            $(this).find(':input').last().attr("placeholder", phone_validation_placeholder);
        }
         if ($(this).hasClass('email')){
            let email_validate_field_placeholder = ""
            if(typeof value['email_validate_field_placeholder'] !== 'undefined'){
              email_validate_field_placeholder = value['email_validate_field_placeholder'];
              $(this).find(':input').last().attr("placeholder", email_validate_field_placeholder);
            }
            $(this).find('label').css("display", "block");
            
        }

        if ($(this).hasClass('validation_field')){
            if(checkbox_for_validation_second_field == "yes"){
                // if (validation_second_placeholder.trim() === "") {
                //     validation_second_placeholder = elementHolder;
                // }
                $(this).find('label').last().attr("for", "");
                $(this).find('label').last().css("margin-top", "5px")
                $(this).find(':input').last().attr("id", "");
                $(this).find(':input').last().css("margin-top", "0px")
                $(this).find(':input').last().attr("placeholder", validation_second_placeholder);
                $(this).find('label').last().css("display", "block").text(validation_second_label);
                $(this).find('label').last().after($(this).find(':input').last());
                $(this).find('div').removeClass('has-float-label');
            }
        }
        
      });
    } else{
      elementHolder = '';
      if(typeof value['placeholder'] !== 'undefined'){
          elementHolder = value['placeholder'];
      }
      $(".formElement_"+formElementCount).each(function(index) {
        var phone_validation_label = '';
        if(typeof value['phone_validate_field_label'] !== 'undefined'){
          phone_validation_label = value['phone_validate_field_label'];
        }

        if($(this).hasClass('dateTime') || $(this).hasClass('textfield') || $(this).hasClass('url') || $(this).hasClass('textarea') || $(this).hasClass('number') || $(this).hasClass('dateTime') || $(this).hasClass('newDate') || $(this).hasClass('Time')){
            if($(this).hasClass('dateTime') || $(this).hasClass('newDate') || $(this).hasClass('Time') || $(this).hasClass('dateTime')){    
                $(this).find('div').css("margin-left", "0px");
                $(this).find('div').css("margin-right", "0px");
                $(this).find('label').removeClass('col-sm-12');
                $(this).find('label').addClass('col-sm-0');
            }
            $(this).find(':input').attr("id", $(this).find('label').text());
            $(this).find('label').attr("for", $(this).find('label').text());
            $(this).find('label').css("display", "block").text($(this).find('label').text());
            $(this).find('label').before($(this).find(':input'));
            $(this).addClass('has-float-label');
        } else if($(this).hasClass('address')){
            addressLabelChange('floatingLabels', formElementCount);
        } else if($(this).hasClass('multi_column_text')){
          multiColumnLabelChange('floatingLabels', formElementCount);
        }

        if($(this).hasClass('select')){
          var elementHolder = (elementHolder == "") ? "Please Select" : elementHolder;
          $(this).find('label').first().css("display", "block").text(elementHolder);
          $(this).find('select > option:first-child').text(elementHolder);
          $(this).find('label').first().before($(this).find('select'));
          $(this).find('label').last().css("display", "block").text($(this).find('label').last().text());
          $(this).find('label').last().before($(this).find(':input').last());
          $(this).find(':input').last().attr("placeholder", $(this).find('label').last().text());
          $(this).find(':input').last().attr("id", $(this).find('label').last().text());
          $(this).find('label').last().attr("for", $(this).find('label').last().text());
          $(this).find('.for-floating-label').addClass('has-float-label');
        }
        if($(this).hasClass('checkbox-multi')){
          $(this).find('.other-fields label').last().css("display", "block").text($(this).find('label').last().text());
          $(this).find('.other-fields label').last().before($(this).find(':input').last());
          $(this).find('.other-fields label').last().css("left", "12px");
          $(this).find('.other-fields :input').last().attr("placeholder", $(this).find('label').last().text());
          $(this).find('.other-fields :input').last().attr("id", $(this).find('label').last().text());
          $(this).find('.other-fields label').last().attr("for", $(this).find('label').last().text());
          $(this).find('.for-floating-label').addClass('has-float-label');
        }
        if ($(this).hasClass('phone')){
            var labels = $(this).find('label');

            if(labels.length === 1){
                $(this).find('label').css("display", "block");
                $(this).find(':input').attr("placeholder", elementHolder);
                $(this).addClass('has-float-label');
            }else{
                var val_label_element = $(this).find('label').first().text();

                $(this).find('label').first().css("display", "block").text(val_label_element);;
                $(this).addClass('has-float-label');

                if (phone_validation_label.trim() === "") {
                    phone_validation_label = val_label_element;
                }

                $(this).find('div.validation_div').css("margin-top", "12px");
                $(this).find('label').last().css("display", "block").text(phone_validation_label);
                $(this).find('label').last().css("left", "6px");
                $(this).find('label').last().css("margin-top", "0px");
                $(this).find('div[class="validation_div"]').addClass('has-float-label');
            }
        }

        if($(this).hasClass('password')) {
            $(this).find('label').first().attr("for", $(this).find('label').first().text());
            $(this).find(':input').first().attr("id", $(this).find('label').first().text());
            $(this).find(':input').first().attr("placeholder", $(this).find('label').first().text());
            $(this).find('label').first().css("display", "block").text($(this).find('label').first().text());
            $(this).find('label').first().before($(this).find(':input').first());
            $(this).addClass('has-float-label');
            var last_label = $(this).find('label').last().text();
            $(this).find('label').last().attr("for", last_label);
            $(this).find(':input').last().attr("id", last_label);
            $(this).find(':input').last().attr("placeholder", last_label);
            $(this).find('label').last().css("display", "block").text(last_label);
            $(this).find('label[name$="_label"]').css("left", "6px");
            $(this).find('label').last().before($(this).find(':input').last());
            $(this).find('div').addClass('has-float-label');
        }

        if($(this).hasClass('email')){
            var labels = $(this).find('label');

            if (labels.length === 1) {

                $(this).find(':input').first().attr("id", $(this).find('label').text());
                $(this).find('label').first().attr("for", $(this).find('label').text());
                $(this).find('label').first().css("display", "block").text($(this).find('label').first().text());
                $(this).find(':input').first().attr("placeholder", $(this).find('label').first().text());
                $(this).find('label').first().css("left", "20px");
                $(this).find('label').first().css("margin-top", "0px");
                $(this).find(':input').first().css("margin-top", "0px");
                $(this).find('label').first().before($(this).find(':input'));
                $(this).addClass('has-float-label');
            }else{
                $(this).find(':input').first().attr("id", $(this).find('label').text());
                $(this).find('label').first().attr("for", $(this).find('label').text());
                $(this).find('label').first().css("display", "block").text($(this).find('label').first().text());
                $(this).find(':input').first().attr("placeholder", $(this).find('label').first().text());
                $(this).find('label').first().css("left", "20px");
                $(this).find('label').first().css("margin-top", "10px");
                $(this).find(':input').first().css("margin-top", "10px");
                $(this).find('label').first().before($(this).find(':input'));
                $(this).addClass('has-float-label');
                if($(this).find('label').last().text().trim() === ''){
                    email_label = $(this).find('label').first().text();
                }else{
                    email_label = $(this).find('label').last().text();
                }

                $(this).find('label').last().attr("for", email_label);
                $(this).find(':input').last().attr("id", email_label);
                $(this).find(':input').last().attr("placeholder", email_label);
                $(this).find('label').last().css("display", "block").text(email_label);
                $(this).find('label').last().css("left", "6px");
                $(this).find('label').last().css("margin-top", "0px");
                $(this).find(':input').last().css("margin-top", "10px");
                $(this).find('label').last().before($(this).find(':input').last());
                $(this).find('div').addClass('has-float-label');
            }
        }

        if($(this).hasClass('validation_field')){
            $(this).find('label').first().attr("for", $(this).find('label').first().text());
            $(this).find(':input').first().attr("id", $(this).find('label').first().text());
            $(this).find(':input').first().attr("placeholder", $(this).find('label').first().text());
            $(this).find('label').first().css("display", "block").text($(this).find('label').first().text());
            $(this).find('label').first().before($(this).find(':input').first());
            $(this).addClass('has-float-label');

            if($(this).find('label').last().text().trim() === ''){
                validation_label = $(this).find('label').first().text();
            }else{
                validation_label = $(this).find('label').last().text();
            }

            $(this).find('label').last().attr("for", validation_label);
            $(this).find(':input').last().attr("id", validation_label);
            $(this).find(':input').last().attr("placeholder", validation_label);
            $(this).find('label').last().css("display", "block").text(validation_label);
            $(this).find('label').last().css("left", "6px");
            $(this).find('label').last().css("margin-top", "0px");
            $(this).find(':input').last().css("margin-top", "10px");
            $(this).find('label').last().before($(this).find(':input').last());
            $(this).find('div').addClass('has-float-label');
        }

        if($(this).hasClass('multi_text')){
            $(this).find('input').attr("id", $(this).find('label').first().text());
            $(this).find('label').attr("for", $(this).find('label').first().text());
            $(this).find('label').css("display", "block").text(elementHolder);
            $(this).find('input').attr("placeholder", $(this).find('label').first().text());
            $(this).find(':input').after($(this).find('label'));
            $(this).addClass('has-float-label');
            $(this).find('label').last().remove();
        }
      });
    }
    formElementCount++;
});

 

$(document).on('click', '.alert_message .alert.alert-danger span', function(){
    $(".alert_message").css("display", "none");
    iframe_resize('no', 'no', 'error');
});

$('#stripePayment').change(function(){
    paymentDisplay();
});
iframe_resize('no', 'no', 'initial');

function securityValidation(input_field){
  var error_msg = ''
  var not_valid = false;

  if ('thengcoco.myshopify.com'.trim() == "1ef268-a0.myshopify.com") {
    if(isStoreSpecificCondition(input_field)) {
      error_msg = 'Avoid negative words: Don&#39;t use negative words in your contact message.';
      not_valid = true;
    }
  }

  if ('thengcoco.myshopify.com'.trim() == "staghead.myshopify.com") {
    if(isStoreSpecificForStaghead(input_field)) {
      error_msg = 'This form is for custom designs requests. For general inquiries please contact our team at info@stagheaddesigns.com';
      not_valid = true;
    }
  }

  if(isTags(input_field)){
    error_msg = 'HTML Tags are not allowed'
    not_valid = true;
  }else if (isSQL(input_field)){
    error_msg = 'SQL Queries are not allowed'
    not_valid = true;
  }else if(isDoubleQuotes(input_field)){
    error_msg = 'Double quotes are not allowed'
    not_valid = true;
  }
  return [error_msg, not_valid];
}

function securityEmailValidation(input_field){
  var error_msg = ''
  var not_valid = false;

  if(isTags(input_field)){
    error_msg = 'HTML Tags are not allowed'
    not_valid = true;
  }

  return [error_msg, not_valid];
}

function storeSpecificSecurityValidation(input_field) {
    var error_msg = '';
    var not_valid = false;

    if ('thengcoco.myshopify.com'.trim() === "vorwerk-sg.myshopify.com" || 'thengcoco.myshopify.com'.trim() === "vorwerk-my.myshopify.com") {
        var [error_msg, not_valid] = isStoreSpecificForVorwerk(input_field);
    }
    
    return [error_msg, not_valid];
}

var validate = 1
var filters = [];
var confirmationMail = '';
var email_check = '';
var phone_check = '';
var validMessage = '';
var hasInputValue = false;

$(document).on('click', '.form_submit_div .btn', function(e) {
    e.preventDefault();
    $('.form_submit_div .btn').prop('disabled',true);
    $('.error').removeClass('error');
    captch_check = 1;

    validateForm();

    if(captch_check != 1){
      filters.push("Please provide valid captcha response");
      validate = 0;
    } 

    stripeToken = '';

  if(validate != 1){
    if(filters.length > 0){
        $(".alert_message").html('<div class="alert alert-danger" role="alert">' + '<button type="button" class="close" data-dismiss="alert" aria-label="Close">' + '<span aria-hidden="true">&times;</span></button>' + filters.map(function(filter, index) {
          var textContent = filter.replace(/<[^>]*>/g, '');
        var concatenatedFilters = filters.slice(0, index + 1).map(f => f.replace(/<[^>]*>/g, '')).join(' ');
        return '<p tabindex="0" aria-label="' + (textContent.includes('Include') ? textContent : concatenatedFilters) + '" class="alert-danger">' + filter + '</p>';
        }).join('') + '</div>').css("display", "block");
    } else if(validMessage != ''){
        $(".alert_message").html('<div class="alert alert-danger" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><p tabindex="0" aria-label="'+validMessage+'" class="alert-danger">'+validMessage+'</div>').css("display", "block");
    } else {
        $(".alert_message").html('<div class="alert alert-danger" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button> <p tabindex="0" aria-label="Please provide valid data"  class="alert-danger">' + "Please provide valid data" + '</p> </div>').css("display", "block");
    }

    $(".alert_message p.alert-danger").first().focus();
    $('html, body').animate({scrollTop: $('#wizard-validation-form').offset().top }, 'slow');
    iframe_resize('yes', 'no', 'error');
    $('.form_submit_div .btn').prop('disabled',false);

  } else {
    if ($('#formGeneratorForm').data('disable-swal') != true){
      swal({
        content: {
            element: 'div',
            attributes: {
            className: 'loader-container',
            innerHTML: "<div class='loader' style='width:100px;height:100px;'></div><h4>Processing...</h4>"
            }
          },
          button: false
      });
    }
    iframe_resize('yes', 'no', 'success');
    $('html, body').animate({scrollTop: $('#wizard-validation-form').offset().top }, 'slow');
    var formResponse = {};
    var additional_price = 0.00;
    $(".form_container div[class^='formElement']").each(function(){ 
      if((!$(this).attr("id")) && (!$(this).hasClass('label')) && (!$(this).hasClass('lineBreak')) && (!$(this).hasClass('space'))){
        eCount = $(this).data('count');
        fElement = formData['formElements'][eCount];
        if($(this).hasClass('radio')){
          submit_value  = $(this).find("input:checked").val();
        } else if($(this).hasClass('checkbox')){
          if (!$(this).find("input").hasClass('result_in_yes_no')) {
            if(!$(this).find("input").is(':checked')){
                submit_value  = "Off";
            }else{
                submit_value  = "On";
            }
          }else{
            if(!$(this).find("input").is(':checked')){
                submit_value  = "No";
            }else{
                submit_value  = "Yes";
            }
          }
        } else if($(this).hasClass('checkbox-multi')){
          if ($(this).find('div').attr('other_value') === "1") {
            var checkValues = [];
            $(this).find("input[type='checkbox']:checked").each(function() {
              if ($(this).val() ===  'Other') {
                var otherValue = $(this).closest('.checkbox-multi').find('.other_class').val();
                if (otherValue !== undefined && otherValue.trim() !== "") {
                  checkValues.push($(this).val() + "(" + otherValue + ")");
                }
              } else {
                checkValues.push($(this).val());
              }
            });
            submit_value  = checkValues.join(", ");
          }else{
            var checkValues = [];
            $.each($("input[name='"+fElement['label']+"']:checked"), function(){
              checkValues.push($(this).val());
            });
            submit_value  = checkValues.join(", ");
          }
        } else if($(this).hasClass('password')){
          password = {}
          password['password_input'] = $(this).find(':input').val();
          if($(this).find(':input').val()){
            hasInputValue = true;
          }
          password['type'] = 'password';
          submit_value = password
        } else if($(this).hasClass('validation_field')) {
          submit_value = $(this).find(':input').val();
        } else if($(this).hasClass('select')){
          if($(this).find('select').attr('other_value') == "1"){
            if($(this).find('select').val() == 'Other' || $(this).find('select').find('option').last().val() == $(this).find('select').val()){
              if($(this).find('label[name$="_label"]').text() &&  $(this).find('input').val()){
                if ($(this).find('input').val() !== '' && $(this).find('label[name$="_label"]').text() != ''){
                  submit_value = $(this).find('select').val() + " (" + $(this).find('label[name$="_label"]').text().replace('*',"") + " : " + $(this).find('input').val() + ")";
                }else{
                  submit_value = $(this).find('select').val();
                }
              }else{
                submit_value = $(this).find('select').val();
              }
            }else{
              submit_value = $(this).find('select').val();
            }
          }else{
            submit_value = $(this).find('select').val();
          }
        } else if($(this).hasClass('multi_text')){
          mePos = fElement['position'];
          $(this).find($("div[class='input_fields_"+mePos+"_wrap'] div input[type=text]").each(function (){
            if(typeof submit_value !== 'undefined'){
              submit_value = submit_value + "\n" + this.value;
            }else{
              submit_value = this.value;
            }
          }));
        } else if($(this).hasClass('multi_column_text')){
          mePos = fElement['position'];
          var multiColumnTextData = $(this).find("div.input_fields_"+mePos+"_wrap div.multi-column-input-main div.multi-column-input").map(function() {
              var elementData = {};
              var key = $(this).find("input[name='key']").val();
              var value = $(this).find("input[name='value']").val();
              elementData[key] = value;
              return elementData;
          }).get();
          formResponse[fElement['label']] = multiColumnTextData;
        } else if($(this).hasClass('dateTime')){
          submit_value = $(this).find(':input').val();
        } else if($(this).hasClass('file')){
          if(typeof fileuploaded["fileupload_"+eCount] !== 'undefined'){
            if(fileuploaded["fileupload_"+eCount]['upload_type'] == 'multiple'){
              if (fileuploaded["fileupload_"+eCount].files.length > 0){
                hasInputValue = true;
              }
              formResponse[formData['formElements'][eCount]['label']] = fileuploaded["fileupload_"+eCount];
            } else {
              formResponse[formData['formElements'][eCount]['label']] = fileuploaded["fileupload_"+eCount];
              hasInputValue = true;
            }
          } else {
            formResponse[formData['formElements'][eCount]['label']] = '';
          }
        } else if($(this).hasClass('image')){
          if(typeof fileuploaded["imageupload_"+eCount] !== 'undefined'){
            if(fileuploaded["imageupload_"+eCount]['upload_type'] == 'multiple'){
              if (fileuploaded["imageupload_"+eCount].images.length > 0){
                hasInputValue = true;
              }
              formResponse[formData['formElements'][eCount]['label']] = fileuploaded["imageupload_"+eCount];
            } else {
              formResponse[formData['formElements'][eCount]['label']] = fileuploaded["imageupload_"+eCount];
              hasInputValue = true;
            }
          } else {
            formResponse[formData['formElements'][eCount]['label']] = '';
          }
        } else if($(this).hasClass('signature')){
          if(typeof fileuploaded["signatureupload_"+eCount] !== 'undefined'){
            formResponse[formData['formElements'][eCount]['label']] = fileuploaded["signatureupload_"+eCount];
              hasInputValue = true;
          } else {
            formResponse[formData['formElements'][eCount]['label']] = '';
          }   
        } else if($(this).hasClass('address')){
          var address_array = $(this).find(':input').map(function(){
          var obj = {};
          obj[ this.name ] = $(this).val();
          if ($(this).val()){
                hasInputValue = true;
          }
          return obj;
          }).get();
          formResponse[fElement['label']] = address_array;
        } else if($(this).hasClass('ratings')){
          submit_value = $(this).find('input[type="radio"]:checked').val() ? $(this).find('input[type="radio"]:checked').val() : "0"
        } else if($(this).hasClass('phone')){
          submit_value = $(this).find(':input').last().val() ? $(this).find(':input').val() + $(this).find(':input').last().val() : '';
        } else if($(this).hasClass('terms_conditions')){
          if(!$(this).find("input").is(':checked')){
            submit_value  = "Declined";
          } else {
            submit_value  = "Accepted";
          }
        } else if($(this).hasClass('emoji')){
          submit_value  = $(this).find("input:checked").siblings('span').text();
        } else if($(this).hasClass('picture_choice')){
            picture_choice = {}
            picture_choice['type'] = 'picture_choice';

            if($(this).find('input').attr('type') == 'radio'){
                var selectedImage = $(this).find("input:checked").parent().find('img');
                var descriptionElement = selectedImage.closest('.col-md-6').find('.image-description'); 
                picture_choice['url'] = selectedImage.attr('src');
                picture_choice['description'] = descriptionElement.text().trim(); 
                picture_choice['upload_type'] = 'single';

                if (selectedImage.attr('src')){
                    hasInputValue = true;
                }
            } else {
                picture_choice['images'] = []
                $.each($(this).find("input:checked"), function(){
                    var selectedImage = $(this).parent().find('img');
                    var descriptionElement = selectedImage.closest('.col-md-6').find('.image-description'); 

                    picture_choice['images'].push({
                        'url': selectedImage.attr('src'),
                        'description': descriptionElement.text().trim() 
                    });

                    if (selectedImage.attr('src')){
                        hasInputValue = true;
                    }
                });
                picture_choice['upload_type'] = 'multiple';
            }

            submit_value = picture_choice;
        } else if($(this).hasClass('url')){
            url_element = {}
            url_element['type'] = 'url';
            url_element['value'] = $(this).find(':input').val();
            submit_value = url_element;
        } else if($(this).hasClass('product_choice')){
          if($(this).find('input').attr('type') == 'radio') {
            var selectedRadio = $(this).find("input:checked");
            if (selectedRadio.length > 0) {
              submit_value = selectedRadio.parent().find('div.product-title').text();
            }
          }else{
            $.each($(this).find("input:checked"), function(){
              if(typeof submit_value !== 'undefined'){
                submit_value = submit_value + "\n" + $(this).parent().find('div.product-title').text();
              }else{
                submit_value = $(this).parent().find('div.product-title').text();
              }
            });
          }
        } else {
          submit_value = $(this).find(':input').val();
        }

        if(typeof submit_value !== 'undefined'){
          if (submit_value && !$(this).hasClass('password') && !$(this).hasClass('picture_choice')){
            hasInputValue = true;
          }
          if(typeof formResponse[fElement['label']] !== 'undefined'){
            fsArr = formResponse[fElement['label']];
            if($.isArray(fsArr)){
                fsArr.push(submit_value);
            } else {
                old_value = formResponse[fElement['label']];
                formResponse[fElement['label']] = [old_value];
                formResponse[fElement['label']].push(submit_value);
            }
          } else {
            formResponse[formData['formElements'][eCount]['label']] = submit_value;
          }
        }

        submit_value = undefined;
      }
    });

    var payment_details = {};


    var utm_params = {};

    var referrer_url = '';

    
    if(!hasInputValue){
      swal.close();
      $(".alert_message").html('<div class="alert alert-danger" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><p tabindex="0" aria-label="Please enter at least one field." class="alert-danger">'+ "Please enter at least one field." +'</div>').css("display", "block");
      $('.form_submit_div .btn').prop('disabled',false);
      iframe_resize('yes', 'no', 'error');
      return;
    }
    $.each(formResponse, function(key, value){
     if(typeof formResponse[key] == 'object'){
        if(typeof formResponse[key]['image_lists'] == 'object'){
          delete formResponse[key]['image_lists']
        }else if(typeof formResponse[key]['files_list'] == 'object'){
          delete formResponse[key]['files_list']
        }
      } 
    });
    
    $.ajax({
      type:"POST",
      beforeSend: function(xhr) {
        xhr.setRequestHeader('X-CSRF-Token', $('meta[name="csrf-token"]').attr('content'));
        xhr.setRequestHeader('X-Shop-UUID', "s9HWNTE2XC-za36CrLlWrg");
      },
      url: '/ajaxcall/formresponse',
      data: { form_uuid: "R9ZAcuu8O_n4vOQArkYnwA", formResponse: JSON.stringify(formResponse), confirmationMail: confirmationMail, payment_details: payment_details, utm_params: utm_params, referrer_url: referrer_url, email_check: email_check, phone_check: phone_check },
      success:function(data){
        swal.close();
        $('.error').removeClass('error');
        if(typeof data.charge_failed !== 'undefined'){
          if(data.message !== 'undefined' && data.message == "uniq_email_validation"){
            $(".alert_message").html('<div class="alert alert-danger" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><p tabindex="0" aria-label="Form with this email is already submitted" class="alert-danger"> Form with this email is already submitted</p> </div>').css("display", "block");
          } else if(data.message !== 'undefined' && data.message == "uniq_phone_validation"){
            $(".alert_message").html('<div class="alert alert-danger" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><p tabindex="0" aria-label="Form with this phone number is already submitted" class="alert-danger">Form with this phone number is already submitted</p> </div>').css("display", "block");
          } else if(data.message !== 'undefined' && data.message == "user_res_parse_error"){
            $(".alert_message").html('<div class="alert alert-danger" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><p tabindex="0" aria-label="Error while submitting the form" class="alert-danger"> Error while submitting the form</p> </div>').css("display", "block");
          } else {
            $(".alert_message").html('<div class="alert alert-danger" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><p tabindex="0" aria-label="'+data.message+'" class="alert-danger">'+ data.message +'</p></div>').css("display", "block");
          }
          $('.form_submit_div .btn').prop('disabled',false);
        } else {
          $('#stripeToken').val('');



          // Google Analytic 4 Start-------------------
          // Google Analytic 4 End---------------------

          // Google Tag Manager Start-------------------
          // Google Tag Manager End---------------------


          window.onbeforeunload = null;
          
          if ( window.location !== window.parent.location ) {
            if(formData['after_submit'] == 'clearAndPrevent'){
              $(".alert_message").html('<div class="alert alert-success" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><p tabindex="0" aria-label="Thank you! The form was submitted successfully." class="alert-success">'+"Thank you! The form was submitted successfully."+'</p></div>').css("display", "block");
              iframe_resize('no', 'no', 'success');
              $(".alert_message .alert").fadeOut(5000, function(){
                $(this).remove();
                $(".alert_message").css("display", "none");
                iframe_resize('yes', 'no', 'success');
              });
              $('#formGeneratorForm')[0].reset();
              $('.form_submit_div .btn').prop('disabled',true);
              iframe_resize('yes', 'no', 'success');
            } else if(formData['after_submit'] == 'clearAndAllow'){
              var rlurl = document.URL+'&form_sbmt=yes';
              window.location.replace(rlurl);
            } else if(formData['after_submit'] == 'redirect'){
              if(typeof formData['after_submit_url'] !== 'undefined'){
                if(typeof formData['openinnewtab'] !== 'undefined' && formData['openinnewtab'] == 'yes'){
                  var redirectURL = formData['after_submit_url'];
                  if(redirectURL == ''){
                    location.reload();
                  } else{
                    // window.open(redirectURL, '_blank');
                    var newTab = window.open(redirectURL, '_blank');
                    if (newTab) {
                      // New tab was successfully opened
                    } else {
                      // New tab was blocked, fallback to opening in the current window
                      window.top.location.href = redirectURL;
                    }
                    $(".formContainer").css("display", "none");
                    $(".formContainer").html('');
                    $(".after_form_submit .form_generater_form_div").html(formData['after_submit_msg']).attr({ 'tabindex': '0', 'aria-label': $("<div>").html(formData['after_submit_msg']).text() });
                    $(".after_form_submit").css("display", "block");
                    iframe_resize('yes', 'no', 'success');
                  }
                } else {
                  var redirectURL = formData['after_submit_url'];
                  if(redirectURL == ''){
                    location.reload();
                  } else{
                    window.top.location.href = redirectURL;
                  }
                }
              } else{
                location.reload();
              }
            } else if(formData['after_submit'] == 'hideAndmessage'){
              $(".formContainer").css("display", "none");
              $(".formContainer").html('');
              $(".after_form_submit .form_generater_form_div").html(formData['after_submit_msg']).attr({ 'tabindex': '0', 'aria-label': $("<div>").html(formData['after_submit_msg']).text() });
              $(".after_form_submit").css("display", "block");
              var formResponse = jQuery.parseJSON(data['user_response']);
              var formResponseString = JSON.stringify(formResponse);
              var hiddenInput = $('<input type="hidden" class="from_res">');
              hiddenInput.val(formResponseString);
              $(".after_form_submit").append(hiddenInput);
              iframe_resize('yes', 'no', 'success');
            } else if(formData['after_submit'] == 'responses'){
              var formResponse = jQuery.parseJSON(data['user_response']);
              var htmlrender = '<style type="text/css">.after_form_submit .form_generater_form_div table{border: 1px solid #ccc;}'+'.after_form_submit .form_generater_form_div tr{ border-bottom: 1px solid #ccc; }'+'.after_form_submit .form_generater_form_div tr:nth-child(2n) { background: #ededed; }'+'.after_form_submit .form_generater_form_div td {padding: 6px 5px; }'+'</style>';

              if ('thengcoco.myshopify.com' !== 'al-manaiya-oasis-festival.myshopify.com') {
                htmlrender += '<div class="response_div" style="float: right !important;"><button type="button" style="padding: 4px 15px; border: none; margin-right: 10px;" area-label="Download PDF" onclick="GeneratePdf()"><span>Download PDF</span></button><button type="button" style="padding: 4px 15px; border: none;" area-label="Download CSV" onclick="download()"><span>Download CSV</span></button></div>';
              }
              htmlrender += '<h3 class="response_heading" style="margin-top: 45px;"> ' + "Your response" + ' </h3>'+'<div class="content_div"><table class="question_content" cellpadding="15" border="1" cellspacing="0" width="100%" border-collapse="collapse" style="margin-top: 10px;"></div>';
              $.each(formResponse, function(index, value){
                htmlrender = htmlrender + '<tr><td><b>'+index+'</b></td><td style="word-wrap: break-word; max-width: 300px;">';
                if(typeof value != 'string') {
                  if(value['type'] == 'image' || value['type'] == 'picture_choice'){
                    if(value['upload_type'] == "multiple"){
                      $.each(value['images'], function(im_index, im_value){
                        htmlrender = htmlrender + '<a href="'+ im_value["url"]+'" target="_blank"><img src="'+ im_value["url"]+'" alt="'+index+'" width="150px" height="150px" style="margin-top: 15px;"></a>';

                        if (im_value["description"] && im_value["description"].trim() !== "") {
                            htmlrender += '<div style="margin-top: 5px;">' + im_value["description"] + '</div>';
                        }
                      });
                    } else {
                      if(value["url"] !== undefined){
                        htmlrender = htmlrender + '<a href="'+ value["url"]+'" target="_blank"><img src="'+ value["url"]+'" alt="'+index+'" width="150px" height="150px" alt="image" style="margin-top: 15px;"></a>';

                        if (value["description"] && value["description"].trim() !== "") {
                            htmlrender += '<div style="margin-top: 5px;">' + value["description"] + '</div>';
                        }
                      }
                    }
                  } else if(value['type'] == 'file' ){
                    if(value['upload_type'] == "multiple"){
                      $.each(value['files'], function(im_index, im_value){
                        htmlrender = htmlrender + '<br/><a href="'+ im_value["url"]+'" target="_blank" style="margin-bottom: 10px;"> ' + "Download file" + '</a>';
                      });
                    } else {
                      htmlrender = htmlrender + '<a href="'+ value["url"]+'" target="_blank">' + "Download file" + '</a>';
                    }
                  } else if(value['type'] == 'password'){
                    if(value['password_input'] != ''){
                      htmlrender = htmlrender +  '*'.repeat(value['password_input'].length);
                    }     
                  } else if(typeof value["url"] !== 'undefined'){
                    htmlrender = htmlrender + ' <a href="'+ value["url"]+'" target="_blank">' + "Download file" + '</a>';
                  } else if(value['type'] == 'url'){
                    function insertLineBreaks(text, length) {
                        return text.replace(new RegExp(`(.{${length}})`, 'g'), '$1<br/>');
                    }
                    htmlrender = htmlrender + ' ' + '<p style="color: unset;">' + insertLineBreaks(value['value'], 35) + '</p>';
                  } else {
                    $.each(value, function(index, address_value){
                      $.each(address_value, function(im_index, im_value){
                        if(im_value.trim() != ''){
                          htmlrender = htmlrender + im_index + ': ' + im_value + '</br>';
                        }
                      });
                    });
                  }
                } else {
                  htmlrender = htmlrender + ' ' +value.toString();
                }
                htmlrender = htmlrender + '</td></tr>';
              });
              htmlrender = htmlrender + '</table>';

              $(".formContainer").css("display", "none");
              $(".formContainer").html('');
              $(".after_form_submit .form_generater_form_div").html(htmlrender);
              $(".after_form_submit").css("display", "block");
              iframe_resize('yes', 'no', 'success');
            }
          } else {
            if(formData['after_submit'] == 'clearAndPrevent' || formData['after_submit'] == 'redirect'){
              $(".alert_message").html('<div class="alert alert-success" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><p tabindex="0" aria-label="Thank you! The form was submitted successfully." class="alert-success">'+"Thank you! The form was submitted successfully."+'</p></div>').css("display", "block");
              iframe_resize('no', 'no', 'success');
              $(".alert_message .alert").fadeOut(5000, function(){
                $(this).remove();
                $(".alert_message").css("display", "none");
                iframe_resize('yes', 'no', 'success');
              });
              $('#formGeneratorForm')[0].reset();
              $('.form_submit_div .btn').prop('disabled',true);
              iframe_resize('yes', 'no', 'success');
            } else if(formData['after_submit'] == 'clearAndAllow'){
              var rlurl = document.URL+'&form_sbmt=yes';
              window.location.replace(rlurl);
              $('.form_submit_div .btn').prop('disabled',false);
              iframe_resize('yes', 'no', 'success');
            } else if(formData['after_submit'] == 'hideAndmessage'){
              $(".formContainer").css("display", "none");
              $(".formContainer").html('');
              $(".after_form_submit .form_generater_form_div").html(formData['after_submit_msg']).attr({ 'tabindex': '0', 'aria-label': $("<div>").html(formData['after_submit_msg']).text() });
              $(".after_form_submit").css("display", "block");
              var formResponse = jQuery.parseJSON(data['user_response']);
              var formResponseString = JSON.stringify(formResponse);
              var hiddenInput = $('<input type="hidden" class="from_res">');
              hiddenInput.val(formResponseString);
              $(".after_form_submit").append(hiddenInput);
              iframe_resize('yes', 'no', 'success');
            } else if(formData['after_submit'] == 'responses'){
              var formResponse = jQuery.parseJSON(data['user_response']);
              var htmlrender = '<style type="text/css">.after_form_submit .form_generater_form_div table{border: 1px solid #ccc;}'+
                    '.after_form_submit .form_generater_form_div tr{ border-bottom: 1px solid #ccc; }'+
                    '.after_form_submit .form_generater_form_div tr:nth-child(2n) { background: #ededed; }'+
                    '.after_form_submit .form_generater_form_div td {padding: 6px 5px; }'+
                    '</style>'+
                    '<h3> ' + "Your response" + ' </h3>'+
                    '<table class="question_content" style="background-color: #fdfdfd;" cellpadding="15" border="1" cellspacing="0" width="100%" border-collapse="collapse">';
              $.each(formResponse, function(index, value){
                htmlrender = htmlrender + '<tr><td><b>'+index+'</b></td><td style="word-wrap: break-word; max-width: 300px;">';
                if(typeof value != 'string') {
                  if(value['type'] == 'image'){
                    if(value['upload_type'] == "multiple"){
                      $.each(value['images'], function(im_index, im_value){
                        htmlrender = htmlrender + '<a href="'+ im_value["url"]+'" target="_blank"><img src="'+ im_value["url"]+'" alt="'+index+'" width="150"></a>';
                      });
                    } else {
                      htmlrender = htmlrender + '<a href="'+ value["url"]+'" target="_blank"><img src="'+ value["url"]+'" alt="'+index+'" width="150"></a>';
                    }
                  }else if(value['type'] == 'password'){
                    if(value['password_input'] != ''){
                      htmlrender = htmlrender +  '*'.repeat(value['password_input'].length);
                    }
                      
                  }else if(typeof value["url"] !== 'undefined'){
                    htmlrender = htmlrender + ' <a href="'+ value["url"]+'"  target="_blank">' + "Download file" + '</a>';
                  } else {
                    try {
                      $.each(value, function(index, address_value){
                        $.each(address_value, function(im_index, im_value){
                          if(im_value.trim() != ''){
                            htmlrender = htmlrender + im_index + ': ' + im_value + '</br>';
                          }
                        });
                      });
                    }catch(err) {
                      console.log('error in response', err.message,value);
                    }
                  }
                } else {
                  htmlrender = htmlrender + ' ' +value.toString();
                }
                htmlrender = htmlrender + '</td></tr>';
              });
              htmlrender = htmlrender + '</table>';

              $(".formContainer").css("display", "none");
              $(".formContainer").html('');
              $(".after_form_submit .form_generater_form_div").html(htmlrender);
              $(".after_form_submit").css("display", "block");
              iframe_resize('yes', 'no', 'success');
            }
          }
          $('span.fileres').text('');
          var fileuploaded = {};
          var htmlrender = '';
          var formResponse = {};
          captch_check = 0;
        }
        phone_check = '';
        email_check = '';
      },
      error:function(data){
        swal.close();
        $(".alert_message").html('<div class="alert alert-danger" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button><p tabindex="0" aria-label="Error occur.Please try again after sometime." class="alert-danger">'+ "Error occur.Please try again after sometime." +'</p></div>').css("display", "block");
        $('.form_submit_div .btn').prop('disabled',false);
        iframe_resize('yes', 'no', 'error');
      }
    });
    hasInputValue = false;
    
  }
  return false;
});

function isEmail(email) {
    var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    return regex.test(email);
}

function isTags(tags) {
    var regex = /<\/?(script|style|object|iframe|video|embed).*?>|<(video).*?<\/\2>+$/;
    return regex.test(tags.toLowerCase()); 
}

function isStoreSpecificCondition(query) {
    var regex = /^(cunt|fuck|fat|ugly|nigger|black|bitch|sherelled|sm|miss mattis|mattis|miss sherelle mattis|caroline street|care home|saint healthcare|hewitt homes|pay|staff|bakeevencakery|does not|josh|charles|slag|tramp|dbs|wayne|fatso|shit|shit head|fanny|suck|lips|fugly|zero|food rating)/;
    return regex.test(query.toLowerCase());
}

function isStoreSpecificForStaghead(words) {
    var regex = /^(manager|director|coordinator|seo|consultant|specialist)/;
    return regex.test(words.toLowerCase());
}

function isStoreSpecificForVorwerk(words) {
    var regex = /\b(http|www)\b/i;
    if (regex.test(words)) {
        return ["The words &#39;http&#39; and &#39;www&#39; are not allowed. Please remove them and try again.", true]; 
    }
    return ["", false]; 
}

function isDoubleQuotes(quotes) {
    var validate_double_quotes = 'false'
    if(validate_double_quotes == 'true'){
        var regex = /((").*?)+$/;
        return regex.test(quotes);
    }
}

function isPassword(password){
    return /[\!\@\\\#\$\%\^\&\,\.\:\;\<\=\'\"\/\>\?\[\]\`\{\}\~\*\(\)\_\+\|\!\-]/.test(password) && /[a-z]/.test(password) && /[0-9]/.test(password) && /[A-Z]/.test(password)
}

function checkPasswordRules(password, password_input_length, password_minlength, password_maxlength, password_input_field_name) {
    var special_character_msg = ''
    var lowercase_msg = ''
    var uppercase_msg = ''
    var number_msg = ''
    var length_msg = ''
    var not_valid = false
    var special_char_valid = false
    var lowercase_valid = false
    var uppercase_valid = false
    var number_valid = false
    var length_valid = false

    var password_msg = password_input_field_name + " needs to: "
    if(/[\!\@\\\#\$\%\^\&\,\.\:\;\<\=\'\"\/\>\?\[\]\`\{\}\~\*\(\)\_\+\|\!\-]/.test(password)){
        special_character_msg = password_msg + '<p style="color: green; margin-left: 30px;">✓ Include at least one special character</p>'
        special_char_valid = false
     }else{
        special_character_msg = password_msg + '<p style="color: red; margin-left: 30px;" tabindex= "0" aria-label="Include at least one special character">✕ Include at least one special character</p>'
        special_char_valid = true
    }

    if(/[a-z]/.test(password)){
        lowercase_msg = special_character_msg + '<p style="color: green; margin-top: 0px; margin-left: 30px;">✓ Include at least one lowercase character</p>'
        lowercase_valid = false
    }else{
        lowercase_msg = special_character_msg + '<p style="color: red; margin-top: 0px; margin-left: 30px;" tabindex= "0" aria-label="Include at least one lowercase character">✕ Include at least one lowercase character</p>'
        lowercase_valid = true
    }

    if(/[A-Z]/.test(password)){
        uppercase_msg = lowercase_msg + '<p style="color: green; margin-top: 0px; margin-left: 30px;">✓ Include at least one uppercase character</p>'
        uppercase_valid = false
    }else{
        uppercase_msg = lowercase_msg + '<p style="color: red; margin-top: 0px; margin-left: 30px;" tabindex= "0" aria-label="Include at least one uppercase character">✕ Include at least one uppercase character</p>'
        uppercase_valid = true
    }

    if(/[0-9]/.test(password)){
        number_msg = uppercase_msg + '<p style="color: green; margin-top: 0px; margin-left: 30px;" >✓ Include at least one number</p>'
        number_valid = false
    }else{
        number_msg = uppercase_msg + '<p style="color: red; margin-top: 0px; margin-left: 30px;" tabindex= "0" aria-label="Include at least one number">✕ Include at least one number</p>'
        number_valid = true
    }

    if(password_input_length >= parseInt(password_minlength)){
        if(parseInt(password_minlength) == parseInt(password_maxlength)){
            input = 'Must have 8 characters long'
            input = input.replace(/\b8\b/, password_minlength);
            length_msg = number_msg + "<p style='color: green; margin-top: 0px; margin-left: 30px;'>✓  "+input+"</p>"
            length_valid = false
        }else{
            input = 'Be between 8 and 12 characters long'
            input = input.replace(/\b8\b/, password_minlength).replace(/\b12\b/, password_maxlength);
            length_msg = number_msg + "<p style='color: green; margin-top: 0px; margin-left: 30px;'>✓ "+ input +"</p>"
            length_valid = false
        }
    }else{
        if(parseInt(password_minlength) == parseInt(password_maxlength)){
            input = 'Must have 8 characters long'
            input = input.replace(/\b8\b/, password_minlength);
            length_msg = number_msg + "<p tabindex='0' tabindex='0' aria-label='"+input+"' style='color: red; margin-top: 0px; margin-left: 30px;'>✕ "+input+"</p>"
            length_valid = true
        }else{
            input = 'Be between 8 and 12 characters long'
            input = input.replace(/\b8\b/, password_minlength).replace(/\b12\b/, password_maxlength);
            length_msg = number_msg + "<p tabindex='0' aria-label='"+input+"' style='color: red; margin-top: 0px; margin-left: 30px;'>✕ "+input+"</p>"
            length_valid = true
        }
    }

    if(special_char_valid == true || lowercase_valid == true || uppercase_valid == true || number_valid == true || length_valid == true){
        not_valid = true
    }else{
        not_valid = false
    }

    return [length_msg, not_valid];
}

function isSQL(query) {
    var regex = /^(ALTER|alter|CREATE|create|DELETE|delete|DROP|drop|EXEC(UTE){0,1}|INSERT( +INTO){0,1}|insert( +into){0,1}|MERGE|merge|SELECT|select|UPDATE|update|UNION( +ALL){0,1}|union( +all){0,1})/;
    return regex.test(query);
}

function isPhone(phone, dial_code, country_code) {
    return ((phone.length == 7 || phone.length == 8 || phone.length == 9 || phone.length == 10 || phone.length == 11) && isPhoneValid(phone, dial_code, country_code)) ? true : false;
}

function validateUrl(url) {
    var urlregex = new RegExp("^(http:\/\/|https:\/\/|www.){1}([0-9A-Za-z]+\.)");
    return urlregex.test(url);
}

var fileuploaded = {};
 

$('.dropdown-toggle').dropdown();
var width = $(window).width();

$(window).resize(function(){
    if($(this).width() != width){
        width = $(this).width();
        iframe_resize('no', 'no', 'initial');
    }
});



$(document).on('click', '#formGeneratorForm .form_generater_form_div a[target!="_parent"]', function(e){
    e.preventDefault();
    var redirectURL = $(this).attr('href');
    window.open(redirectURL, '_blank');
});

$('[data-toggle="tooltip"]').tooltip();


$('.paymentCount :input').change(function(){
    paymentDisplay();
    return false;
});

function paymentDisplay(){
    var selected_price = payment_calculation(),
  display_price = 'no',
  currency_select = '$';
    if((typeof formData['payment_integration'] != 'undefined') && (typeof formData['payment_integration']['payment_currency_symbol'] != 'undefined')){
        currency_select = formData['payment_integration']['payment_currency_symbol'];
    }
    if((typeof formData['payment_integration'] != 'undefined') && (typeof formData['payment_integration']['show_price'] != 'undefined')){
        display_price = formData['payment_integration']['show_price'];
    }
    $(".form_generater_form_div .card_deails_div").css('display', 'block');
    if((typeof formData['payment_integration'] != 'undefined') && (typeof formData['payment_integration']['hide_cart_detail_for_zero'] != 'undefined') && (formData['payment_integration']['payment_type']  != 'donation')){
        if(formData['payment_integration']['hide_cart_detail_for_zero'] == "yes") {
            if(selected_price <= 0 || isNaN(selected_price) || selected_price == ""){
                $(".form_generater_form_div .card_deails_div").css('display', 'none');
        $("#card-element").removeClass('StripeElement--empty');
                display_price = 'no';
            
            }
        }
    }
    if (!isNaN(selected_price)) {
    if(display_price == 'yes'){
    } else {
      $('.form_submit_div span.price').text('');
    }
  }
}

function conditionalHide(division_id){
        if($("."+division_id).hasClass('checkbox-multi')){
            $("."+division_id + ' input[type=checkbox]').prop( "checked", false).trigger('change');
        } else if($("."+division_id).hasClass('checkbox')){
            if($("."+division_id).children('.checkbox-list').attr('aria-prechecked') == "true"){
                $("."+division_id + ' input[type=checkbox]').prop( "checked", true).trigger('change');
            }else{
                $("."+division_id + ' input[type=checkbox]').prop( "checked", false).trigger('change');
            }
           
        } else if($("."+division_id).hasClass('radio')){
            $("."+division_id + ' input[type=radio]').removeAttr('checked').trigger('change');
        } else if($("."+division_id).hasClass('select')){
            $("."+division_id + ' select').val('').trigger('change');
        }
    showTab(currentTab);
    PositionOfLastPageElements();
}


function addressLabelChange(label_style, formElementCount){
    if(label_style == 'inlineLabels'){
        $('.formElement_'+formElementCount+' :input').each(function(){
            $(this).closest('.form-group').find('label').css("display", 'none');
            ship_label = $(this).closest('.form-group').find('label').text();
            if(ship_label == 'Country'){
                $(this).find('option:first-child').text(ship_label);
            } else{
                $(this).attr('placeholder', ship_label);
            }
        });
    } else if(label_style == 'blockLabels'){
        $('.formElement_'+formElementCount+' :input').each(function(){
            $(this).closest('.form-group').find('label').css("display", 'block');
            ship_label = $(this).closest('.form-group').find('label').text();
            if(ship_label == 'Country'){
                $(this).find('option:first-child').text('- Country -');
            } else{
                $(this).attr('placeholder', '');
            }
        });
    }else{
        $('.formElement_'+formElementCount+' :input').each(function(){
            $(this).closest('.form-group').find('label').css("display", 'block');
            ship_label = $(this).closest('.form-group').find('label').text();
            if(ship_label == 'Country'){
                $(this).closest('.form-group').find('label').css("display", "block").text(ship_label);
                $(this).closest('.form-group').find('select > option:first-child').text(ship_label);
                $(this).closest('.form-group').find('label').before($(this).closest('.form-group').find('select'));
                $(this).closest('.form-group').addClass('has-float-label');
            } else{
                $(this).closest('.form-group').find(':input').attr("id", ship_label);
                $(this).closest('.form-group').find('label').attr("for", ship_label);
                $(this).attr('placeholder', ship_label);
                $(this).closest('.form-group').find('label').before($(this).closest('.form-group').find(':input'));
                $(this).closest('.form-group').addClass('has-float-label');
            }
        });
    }
}

function multiColumnLabelChange(label_style, formElementCount){
  $('.formElement_'+formElementCount).find('.column1-desc').removeClass('has-float-label');
  $('.formElement_'+formElementCount).find('.column1-desc .header_column1').remove();
  $('.formElement_'+formElementCount).find('.column2-desc').removeClass('has-float-label');
  $('.formElement_'+formElementCount).find('.column2-desc .header_column2').remove();
  $('.formElement_'+formElementCount).removeClass('has-float-label')
  if(label_style == 'inlineLabels'){
      $('.formElement_'+formElementCount+' :input').each(function(){
        $(this).closest('.form-group').find('.row .header_column1').css("display", 'none');
        $(this).closest('.form-group').find('.row .header_column2').css("display", 'none');
        ship_label1 = $(this).closest('.form-group').find('.row .header_column1').text();
        ship_label2 = $(this).closest('.form-group').find('.row .header_column2').text();
        if($(this).attr('name') === 'key'){
           $(this).attr('placeholder', ship_label1); 
        }else{
          $(this).attr('placeholder', ship_label2); 
        }

      });
  }else if(label_style == 'blockLabels'){
    $('.formElement_'+formElementCount+' :input').each(function(){
       $(this).closest('.form-group').find('.row .header_column1').css("display", 'block');
        $(this).closest('.form-group').find('.row .header_column2').css("display", 'block');
        ship_label1 = $(this).closest('.form-group').find('.row .header_column1').text();
        ship_label2 = $(this).closest('.form-group').find('.row .header_column2').text();
        $(this).attr('placeholder', ''); 
      });
  }else{
    $('.formElement_'+formElementCount).addClass('has-float-label');
    $('.formElement_'+formElementCount+' :input').each(function(){
      $(this).closest('.form-group').find('label').css("display", 'block');
      $(this).closest('.form-group').find('label').first().css("font-size", '14px');
      $(this).closest('.form-group').find('label').first().css("left", '15px');
      ship_label1 = $(this).closest('.form-group').find('.row .header_column1').text();
      ship_label2 = $(this).closest('.form-group').find('.row .header_column2').text();
      if($(this).attr('name') === 'key'){
        $(this).attr('placeholder', ship_label1);
        $(this).closest('div.column1-desc').find(':input').after('<label class="col-sm-6 header_column1 block_label" for="'+ship_label1+'">'+ship_label1+'</label>');
        $(this).closest('div.column1-desc').addClass('has-float-label');
      }else{
        $(this).attr('placeholder', ship_label2);
        $(this).closest('div.column2-desc').find(':input').after('<label class="col-sm-6 header_column2 block_label" for="'+ship_label2+'">'+ship_label2+'</div>');
        $(this).closest('div.column2-desc').addClass('has-float-label');
      }   
    });
    $('.formElement_'+formElementCount).find('.row .header_column1').css("display", 'none');
    $('.formElement_'+formElementCount).find('.row .header_column2').css("display", 'none');
  }
}

function payment_calculation(){
    var additional_price = 0.00;
    $(".form_container div[class^='formElement']").each(function(){ 
        if((!$(this).attr("id")) && ($(this).hasClass('radio') || $(this).hasClass('checkbox-multi') || $(this).hasClass('select'))){
            eCount = $(this).data('count');
            if($(this).hasClass('radio')){
                var select_value = $(this).find("input:checked").val();
                if(typeof formData['formElements'][eCount]['elementCost'] !== 'undefined' && typeof formData['formElements'][eCount]['elementCost'][select_value] !== 'undefined'){
                    additional_price += parseFloat(formData['formElements'][eCount]['elementCost'][select_value]);
                }                       
            } else if($(this).hasClass('checkbox-multi')){
                $.each($("input[name='"+formData['formElements'][eCount]['label']+"']:checked"), function(){
                    if(typeof formData['formElements'][eCount]['elementCost'] !== 'undefined' && typeof formData['formElements'][eCount]['elementCost'][$(this).val()] != 'undefined'){
                        additional_price += parseFloat(formData['formElements'][eCount]['elementCost'][$(this).val()]);
                    }
                });
            } else if($(this).hasClass('select')){
                var select_value = $(this).find('select').val();
                if(typeof formData['formElements'][eCount]['elementCost'] !== 'undefined' && typeof formData['formElements'][eCount]['elementCost'][select_value] != 'undefined'){
                    additional_price += parseFloat(formData['formElements'][eCount]['elementCost'][select_value]);
                }
            }
        }
    });

    var stripePayment = 0.00;
    if(typeof formData['payment_integration'] !== 'undefined' && typeof formData['payment_integration']['payment_cost'] !== 'undefined'){
        stripePayment = parseFloat(formData['payment_integration']['payment_cost']);
        if(typeof formData['payment_integration']['price_change'] !== 'undefined' && formData['payment_integration']['price_change'] == 'yes' ){
            if (typeof $('#stripePayment').val() !== 'undefined'){
                stripePayment = parseFloat($('#stripePayment').val());
            }
        }
    }

    var combined_payment = stripePayment + additional_price;
    return combined_payment.toFixed(2);
}

window.onbeforeunload = function() {
    $.each(fileuploaded,function(i,val){
        $.each(val,function(img,img_val){
            if(img == 'images'){
                $.each(img_val,function(img_arr_i,img_arr_val){
                    image_id = img_arr_val.id;
                    $.ajax({
                        url: '/ajaxcall/imagedelete',
                        data: {image_id: image_id },
                        success: function(data){
                        }
                    });
                });
            }
            if(img == 'files'){
                $.each(img_val,function(img_arr_i,img_arr_val){
                    file_id = img_arr_val.id;
                    $.ajax({
                        url: '/ajaxcall/filedelete',
                        data: {file_id: file_id },
                        success: function(data){

                        }
                    });
                });
            }
        });
        $.each(fileuploaded,function(i,val){
           if (val.type == "signature"){
               signature_id = val.id;
               $.ajax({
                  url: '/ajaxcall/signaturedelete',
                  data: {signature_id: signature_id },
                  success: function(data){
                  }
               });
           }
           if (val.type == "image"){
               image_id = val.id;
               $.ajax({
                  url: '/ajaxcall/imagedelete',
                  data: {image_id: image_id },
                  success: function(data){
                  }
               });
           }
           if (val.type == "file"){
               file_id = val.id;
               $.ajax({
                  url: '/ajaxcall/filedelete',
                  data: {file_id: file_id },
                  success: function(data){
                  }
               });
           }    
        });
    });
};


/****************** Add More Element Logic ******************/
$(document).on('click , dblclick', '.add_new', function(e) {
    curele = $(this).attr('data-elementcount');
    ele_len = $(this).closest('.add_more_element').find('.form-group').length;
    if(ele_len == 1){
        $('.formElement_'+curele+':first').prepend('<span class="field-close" data-elementcount="'+curele+'"></span>')
    }
    duplicate_html = $('.formElement_'+curele+':first').clone();
    $(this).closest('.add_more_element').find('.element_holder').append(duplicate_html).html();
    iframe_resize('no', 'no', 'initial');
});

$(document).on('click', '.add_more_element .field-close', function(){
    ele_len = $(this).closest('.element_holder').find('.form-group').length;
    curele = $(this).attr('data-elementcount');
    if(ele_len > 1){
        $(this).closest('.form-group').remove();
    }
    if(ele_len == 2){
        $('.formElement_'+curele+':first').find('.field-close').remove();
    }
    iframe_resize('no', 'no', 'initial');
});
iframe_resize('no', 'no', 'initial');



//var currentTab = 0; // Current tab is set to be the first tab (0)
showTab(currentTab); // Display the current tab

function showTab(n) {
  // This function will display the specified tab of the form...
  var x = document.getElementsByClassName("tab");
  x[n].style.display = "block";
    
    if(n > 0){
        var firstElement = x[n].querySelector('label[tabindex="0"], .browse-files-btn');
        if (firstElement) {
            firstElement.focus();
        }
    }
  
  //... and fix the Previous/Next buttons:
  if (n == 0) {
    if (document.getElementById("prevBtn")){
        document.getElementById("prevBtn").style.display = "none";
    }
  } else {
    document.getElementById("prevBtn").style.display = "inline";
    }
  if (n == (x.length - 1)) {
    if (document.getElementById("nextBtn")){
        document.getElementById("nextBtn").style.display = "none";
    }
  } else {
    document.getElementById("nextBtn").style.display = "inline";
  }
  //... and run a function that will display the correct step indicator:
  fixStepIndicator(n)
}

function nextPrev(n, buttonId) { 
  // This function will figure out which tab to display
  var x = document.getElementsByClassName("tab");
    // Conditionally perform validateForm() based on the button that triggered the function - Perform when field is Invalid/Required
    if (buttonId === 'nextBtn') {
        if (!validateForm()) return false; // Only validate if 'nextBtn' triggered the function
    }
  // Hide the current tab:
  x[currentTab].style.display = "none";
  // Increase or decrease the current tab by 1:
  currentTab = currentTab + n;
  // if you have reached the end of the form...
  if (currentTab >= x.length) {
    // ... the form gets submitted:
    document.getElementById("regForm").submit();
    return false;
  }
  // Otherwise, display the correct tab:
  showTab(currentTab);
  PositionOfLastPageElements();
}

function nextFormPreviewPrev(n) {
    var x = document.getElementsByClassName("tab");
    x[currentTab].style.display = "none";
    currentTab = currentTab + n;
    if (currentTab >= x.length) {
        document.getElementById("regForm").submit();
        return false;
    }
    showTab(currentTab);
    PositionOfLastPageElements();
}

function PositionOfLastPageElements(){
    var totalTabs = $(".tab").length
    var lastTab = 0;
    var submit_element = '';
    var card_elements = '';
    var captcha_elements = '';
    for(var i = totalTabs - 1; i > 0; i--){
        if($(".tab:eq("+(i)+") .form_container [id^=conditionInclude]").length != $(".tab:eq("+(i)+") .form_container div[class^='formElement']").length ){
            lastTab = i;
            break
        }
    }
    if (lastTab > 0){
        submit_element = $(".form_submit_div");
        card_elements = $(".card_deails_div");
        captcha_elements = $(".form_captcha_div");
        if(card_elements.length > 0){
            $(".card_deails_div").remove();
            $(".tab:eq("+(lastTab)+") .row .form_element").append(card_elements);
        }
        if(captcha_elements.length > 0){
            $(".form_captcha_div").remove();
            $(".tab:eq("+(lastTab)+") .row .form_element").append(captcha_elements);
        }
        if(submit_element.length > 0){  
            $(".form_submit_div").remove();
            $(".tab:eq("+(lastTab)+") .row .form_element").append(submit_element);
            }
            if (currentTab > 0 && lastTab < totalTabs - 1 && currentTab == lastTab){
            document.getElementById("nextBtn").style.display = "none"
            }
    }
}

function validateForm(){
// This function deals with validation of the form fields
  var x, y, i, valid = true;
  x = document.getElementsByClassName("tab");
  y = x[currentTab].getElementsByTagName("input");
  validate = 1
  filters = [];
  confirmationMail = '';
  validMessage = '';
  $(".required").removeClass('error');
  // A loop that checks every input field in the current tab:
  $(".tab:eq("+currentTab+") .form_container div[class^='formElement']").each(function(){
    if(!$(this).attr("id")){
      if(formData['formElements'][$(this).data('count')]['required'] == 'yes'){
        var required_message = " is required";  
        if($(this).hasClass('radio')){
          if(!$(this).find("input:checked").val()){
            validate = 0;
            filters.push($(this).find(":input").attr('name') + required_message);
            $("input[name='"+$(this).find('.block_label').text() +"']");
          }
        } else if($(this).hasClass('checkbox')){
          if(!$(this).find(":input").is(':checked')){
              validate = 0;
              filters.push($(this).find(":input").attr('name') + required_message);
              $(this).find(":input").addClass('error');
          }
        } else if($(this).hasClass('checkbox-multi')){
          if($(this).find(".checkboxmulti_"+$(this).data('count')+":checkbox:checked").length <= 0){
              validate = 0;
              filters.push($(this).find(':input').attr('name') + required_message);
          }
        } else if($(this).hasClass('select')){
          if($(this).find('select').val() == ''){
            validate = 0;
            filters.push($(this).find(":input").attr('name') + required_message);
            $(this).find('select').addClass('error');
          }
        } else if($(this).hasClass('dateTime')){
          if($(this).find(':input').val().trim() == ''){
            validate = 0;
            filters.push($(this).find(":input").attr('name') + required_message);
            $(this).find(':input').addClass('error');
          }
        } else if($(this).hasClass('file')){
          if(typeof fileuploaded["fileupload_"+$(this).data('count')] == 'undefined'){
              validate = 0;
              if (formData['formElements'][$(this).data('count')]['enable_drag_and_drop'] == 'yes'){
                filters.push($(this).find(".dz-message").find('span').text() + required_message);
                $(this).find('.dropzone').addClass('error');
              }else{
                filters.push($(this).find(":input").attr('name') + required_message);
                $(this).find('label').addClass('error');
              }
          }

          if(typeof fileuploaded["fileupload_"+$(this).data('count')] !== 'undefined' && fileuploaded["fileupload_"+$(this).data('count')]['upload_type'] == 'multiple' && fileuploaded["fileupload_"+$(this).data('count')]['files'].length <= 0) {
              validate = 0;
              if (formData['formElements'][$(this).data('count')]['enable_drag_and_drop'] == 'yes'){
                filters.push($(this).find(".dz-message").find('span').text() + required_message);
                $(this).find('.dropzone').addClass('error');
              }else{
                filters.push($(this).find(":input").attr('name') + required_message);
                $(this).find('label').addClass('error');
              }
          }
        } else if($(this).hasClass('image')){
          if(typeof fileuploaded["imageupload_"+$(this).data('count')] == 'undefined'){
              validate = 0;
              if (formData['formElements'][$(this).data('count')]['enable_drag_and_drop'] == 'yes'){
                filters.push($(this).find(".dz-message").find('span').text() + required_message);
                $(this).find('.dropzone').addClass('error');
              }else{
                filters.push($(this).find(":input").attr('name') + required_message);
                $(this).find('label').addClass('error');
              }   
            } 
                        
            if(typeof fileuploaded["imageupload_"+$(this).data('count')] !== 'undefined' && fileuploaded["imageupload_"+$(this).data('count')]['upload_type'] == 'multiple' && fileuploaded["imageupload_"+$(this).data('count')]['images'].length <= 0) {
                validate = 0;
                if (formData['formElements'][$(this).data('count')]['enable_drag_and_drop'] == 'yes'){
                    filters.push($(this).find(".dz-message").find('span').text() + required_message);
                    $(this).find('.dropzone').addClass('error');
                }else{
                    filters.push($(this).find(":input").attr('name') + required_message);
                    $(this).find('label').addClass('error');
                }
            }
        } else if($(this).hasClass('address')){
          field_name = formData['formElements'][$(this).data('count')]['label'];
          $(this).find(':input.required').each(function(){
            if($(this).val().trim() == ''){
                validate = 0;
                sub_name = $(this).closest('.form-group').find('.block_label').text();
                filters.push(field_name + ' - ' + sub_name + required_message);
                $(this).addClass('error');
            }
          });
        } else if($(this).hasClass('multi_column_text')){
            field_name = formData['formElements'][$(this).data('count')]['label'];
    
            let emptyCount = 0;

            $(this).find(':input.required').each(function () {
                if ($(this).val().trim() === '' && emptyCount < 2) {
                    $(this).addClass('error');
                    validate = 0;
                    filters.push(field_name + required_message);
                    emptyCount++;
                }
            });
        }else if($(this).hasClass('raw_html')){
          //Don't Do anything, these are only for display
        } else if($(this).hasClass('ratings')){
          if ($(this).find('input[type="radio"]:checked').val() == undefined){
            validate = 0;
            filters.push('Rating' + required_message);
            $(this).find('.star-rating').addClass('error');
          }
        } else if($(this).hasClass('emoji')){
          if ($(this).find('input[type="radio"]:checked').val() == undefined){
             validate = 0;    
             filters.push('Feedback' + required_message);
             $(this).find('.emoji-feedback').addClass('error');
          }
        } else if($(this).hasClass('picture_choice')){
          if ($(this).find('input[type="radio"]:checked').val() == undefined && $(this).find('input[type="checkbox"]:checked').val() == undefined){
            validate = 0;
            filters.push('Image Choice' + required_message);
            $(this).find('label').first().addClass('error');
          }
        } else if($(this).hasClass('product_choice')){
          if ($(this).find('input[type="radio"]:checked').val() == undefined && $(this).find('input[type="checkbox"]:checked').val() == undefined){
              validate = 0;
              filters.push('Product Choice' + required_message);
              $(this).find('label').first().addClass('error');
          }
        } else if($(this).hasClass('phone')){
          if ($(this).find('.phone_div :input').last().val() == ''){
            validate = 0;
            filters.push($(this).find(":input").last().attr('name') + required_message);
            $(this).find(':input').last().addClass('error');
          }else{
            if(!isPhone($(this).find(".phone_div :input").last().val(),$(this).find(':input').val(),$(this).find('option:selected').data('country-code'))){
                var message = "Provide valid phone number";
                validate = 0;
                //filters.push("Provide valid phone number");
                if (!filters.includes(message)) {
                    filters.push(message);
                }
                validMessage = "Provide valid phone number";
                $(this).find(".phone_div :input").last().addClass('error');
            }
          }
        } else if($(this).hasClass('terms_conditions')){
          if(!$(this).find(":input").is(':checked')){
            validate = 0;
            error_msg = '';
            class_array = $(this).attr('class').split(' ')
            class_array.forEach(function(value){
              if (value.startsWith('formElement_')){
                id = value.split('_')[1]
                error_msg = formData['formElements'][id]['tc'] ? formData['formElements'][id]['tc'] : 'Terms and Conditions'+required_message ;
              }
            })
            filters.push(error_msg);
            $(this).find('label').first().addClass('error');
          }
        } else if($(this).hasClass('signature')){
          if (formData['formElements'][$(this).data('count')]['enable_drag_and_drop'] == 'yes'){
            if($(this).find('.dz-image').find('img').attr('src') == undefined){
                validate = 0;
                filters.push($(this).find(".dz-message").find('span').text() + required_message);
                $(this).find('.dropzone').addClass('error');
            }
          }else{
            if($(this).find(':input').val().trim() == ''){
                validate = 0;
                filters.push($(this).find(":input").attr('name') + required_message);
                $(this).find('label').addClass('error');
            }
          } 
        } else if($(this).hasClass('password')){
            var password_field = $(this).find(':input').val();
            var confirm_field = $(this).find('input[name$="_input"]').val();
            if(password_field == ''){
              validate = 0;
              filters.push($(this).find(":input").attr('name') + required_message);
              $(this).find('input').addClass('error');
              $(this).find('input[name$="_input"]').addClass('error');
            }
        } else if($(this).hasClass('validation_field')){
          var first_field = $(this).find(':input').val();
          var inputs = $(this).find(':input');
          if(first_field == ''){
            validate = 0;
            filters.push($(this).find(":input").attr('name') + required_message);
            //$(this).find('input').addClass('error');
            inputs.each(function() {
              if ($(this).val() === "") {
                $(this).addClass('error');
              }
            });
          }
        } else if($(this).hasClass('multi_text')){
            const $firstInput = $(this).find(':input').first();
            if($firstInput.val().trim() === '') {
                validate = 0;
                filters.push($firstInput.attr('name') + required_message);
                $firstInput.addClass('error');
                $(this).find(':button').removeClass('error');
            }
        } else {
            if(!$(this).hasClass('headings')){
              if($(this).find(':input').val().trim() == ''){
                validate = 0;
                filters.push($(this).find(":input").attr('name') + required_message);
                $(this).find(':input').addClass('error');
              }
            }
        }       
      }

      if($(this).hasClass('email')){
        var field_label = $(this).find(":input").attr('name');
        var first_field = $(this).find(':input').val();
        var second_field_value = $(this).find('input[class*="validation-email-label"]').val();

        if (first_field != '' && second_field_value == '') {
          var second_field_require_msg = field_label + " is required";
          validate = 0;
          filters.push(second_field_require_msg);
          $(this).find(':input').addClass('error');
        }

        if(first_field != '' && first_field != second_field_value ) {
          if (second_field_value != '') {
            if ((first_field != undefined && second_field_value != undefined)) {
              var both_field_same_msg = field_label + " values must be same";
              validate = 0;
              filters.push(both_field_same_msg);
              $(this).find(':input').addClass('error');
            }
          }
        }

        if($(this).find(':input').val() != ""){
          var cur_email_value = $(this).find(':input').val();
          var [err_msg, not_valid] = securityEmailValidation(cur_email_value);
          if (not_valid) {
              validate = 0;
              $(this).find(':input').addClass('error');
          }else{
            if(!isEmail(cur_email_value)){
              validate = 0;
              filters.push("Provide valid email format");
              validMessage = "Provide valid email format";
              $(this).find(':input').addClass('error');
            } else {
              var blk_email = "";
              if(blk_email != ''){
                blocked_emails = blk_email.split(',');
                $.each(blocked_emails, function(index, value) {
                    cDom = value.trim();
                    var isFullEmail = cDom.includes("@");
                    
                    var last = isFullEmail ? cDom : cDom.substring(cDom.lastIndexOf("@") + 1);
                    
                    var n = cur_email_value.endsWith("@" + last);
                    var m = cur_email_value.endsWith("." + last);
                    
                    if (n == true || m == true) {
                        validate = 0;
                        validMessage = "This form does not accept addresses from  " + last;
                        filters.push(validMessage);
                    } else if (cur_email_value == cDom) {
                        validate = 0;
                        validMessage = "This form does not accept addresses from  " + last;
                        filters.push(validMessage);
                    }
                });
              }

              if(email_check != ''){
                email_check = email_check + ',' + cur_email_value;
              } else {
                email_check = cur_email_value;
              }

              if($(this).find(':input').hasClass('email_confirm')){
                if(confirmationMail != ''){
                  confirmationMail = confirmationMail + ',' + cur_email_value;
                } else {
                  confirmationMail = cur_email_value;
                }
              }
            }
          }
        }
      }

      if($(this).find(':input').hasClass('url')){
        if($(this).find(':input').val() != ""){
          var [err_msg, not_valid] = securityValidation($(this).find(':input').val());
          if (not_valid) {
            validate = 0;
            $(this).find(':input').addClass('error');
          }else{
            if(!validateUrl($(this).find(':input').val())){
              validate = 0;
              filters.push("Provide valid URL");
              validMessage = "Provide valid URL";
              $(this).find(':input').addClass('error');
            }
          }
        }
      }

      if($(this).hasClass('number')){
          var number_val = $(this).find(':input').val();
          if(number_val != ""){
              if(isNaN(parseInt(number_val))) {
                  validate = 0;
                  filters.push("Provide valid number in "+ $(this).find(':input').attr('name'));
                  validMessage = "Provide valid number in "+ $(this).find(':input').attr('name');
                  $(this).find(':input').addClass('error');
              } else{
                  if(typeof formData['formElements'][$(this).data('count')]['maxNumber'] !== 'undefined'){
                      if(parseInt(number_val) > parseInt(formData['formElements'][$(this).data('count')]['maxNumber'])){
                          validate = 0;
                          validMessage = $(this).find(':input').attr('name') + " must be less than " + formData['formElements'][$(this).data('count')]['maxNumber'].toString();
                          filters.push($(this).find(':input').attr('name') + " must be less than " + formData['formElements'][$(this).data('count')]['maxNumber'].toString());
                          $(this).find(':input').addClass('error');
                      }
                  }
                  if(typeof formData['formElements'][$(this).data('count')]['minNumber'] !== 'undefined'){
                      if(parseInt(number_val) < parseInt(formData['formElements'][$(this).data('count')]['minNumber'])){
                          validate = 0;
                          validMessage = $(this).find(':input').attr('name') + " must be more than "+ formData['formElements'][$(this).data('count')]['minNumber'].toString();
                          filters.push($(this).find(':input').attr('name') + " must be more than "+ formData['formElements'][$(this).data('count')]['minNumber'].toString());
                          $(this).find(':input').addClass('error');
                      }
                  }
              }
          }
      }

      if($(this).hasClass('phone')){
          var first_field_label = $(this).find("label").first().text().replace(/\s*\*$/, '');
          var first_field_value = $(this).find('.phone_div :input').last().val();
          var first_field_code = $(this).find('.phone_div option:selected').data('country-code');
          var first_field_country_code = $(this).find('.phone_div :input').first().val();

          var second_field_label = $(this).find(".validation_div label").text();
          var second_field_value = $(this).find('.validation_div :input').last().val();
          var second_field_code = $(this).find('.validation_div option:selected').data('country-code');
          var second_field_country_code = $(this).find('.validation_div :input').first().val();

          if((first_field_value == '' && $(this).find('.phone_div :input').last().hasClass('required') == true) || (first_field_value == '' && second_field_value != undefined && second_field_value !== '')){
            $(this).find('.phone_div :input').last().addClass('error');
          }

          if (first_field_value !== '' && second_field_value === '') {
            var second_field_require_msg = first_field_label + " is required";
            validate = 0;
            filters.push(second_field_require_msg);
            $(this).find('.validation_div :input').last().addClass('error');
          }

          // if ((first_field_value !== '' && second_field_value === '') || (first_field_value === '' && first_field_value !== undefined && second_field_value !== '' && second_field_value !== undefined)) {
          //     var second_field_require_msg = first_field_label + " is required";
          //     validate = 0;
          //     filters.push(second_field_require_msg);
          //     $(this).find(':input').addClass('error');
          // }

          if(first_field_value !== '' && (first_field_value !== second_field_value || first_field_code !== second_field_code || first_field_country_code !== second_field_country_code)) {
            if (second_field_value != '') {
              if ((first_field_value != undefined && second_field_value != undefined)) {
                var both_field_same_msg = first_field_label + " values must be same";
                validate = 0;
                filters.push(both_field_same_msg);
                if(first_field_code !== second_field_code){
                  $(this).find(':input').addClass('error');
                }else{
                  $(this).find('.phone_div :input').last().addClass('error');
                  $(this).find('.validation_div :input').last().addClass('error');

                }
                 
              }
            }
          }

          if($(this).find(":input").last().val() && !isPhone($(this).find(":input").last().val(), $(this).find(':input').val(), $(this).find('option:selected').data('country-code'))){
              var message = "Provide valid phone number";
              validate = 0;
              //filters.push("Provide valid phone number");
              if (!filters.includes(message)) {
                filters.push(message);
              }
              validMessage = "Provide valid phone number";
              //$(this).find('select').addClass('error');
              $(this).find(':input').last().addClass('error');
          }else{
              if($(this).find(':input').last().val()){
                  if(phone_check != ''){
                      phone_check = phone_check + ',' + $(this).find(':input').val() + $(this).find(':input').last().val();
                  } else {
                      phone_check = $(this).find(':input').val() + $(this).find(':input').last().val();
                  }
              }
          }
      }

        if ($(this).hasClass('text') || $(this).hasClass('textarea')) {            
            var inputElement = $(this).find(':input'); 

            if (inputElement.val()) {
                var input_field = inputElement.val().trim();
                
                if (input_field !== '') {
                    var [err_msg, not_valid] = storeSpecificSecurityValidation(input_field);
                    
                    if (not_valid) {
                        validate = 0;
                        filters.push(err_msg);

                        if ($(this).hasClass('text')) {
                            $(this).find('input').addClass('error'); 
                        }
                        if ($(this).hasClass('textarea')) {
                            $(this).find('textarea').addClass('error');
                        }
                    }
                }
            }
        }

      if($(this).hasClass('address')){
        field_name = formData['formElements'][$(this).data('count')]['label'];
        $(this).find(':input').each(function(){
          if ($(this).val()){
            var value = $(this).val().trim();
            if(value != ''){
              var [err_msg, not_valid] = securityValidation(value);
              if (not_valid) {
                validate = 0;
                filters.push(err_msg);
                $(this).find(':input').addClass('error');
              }
            }
          }
        });
      } else if($(this).hasClass('select')){
        var select_val = $(this).find('select').val()
        var other_val = 'Other'
        if($(this).find('select').attr('other_value') == "1"){
          if(select_val == other_val || $(this).find('select').find('option').last().val() == select_val){
            var input_field = $(this).last().find('.other-fields').last().find(':input').last().val();
            if(input_field == ''){
              validate = 0;
              filters.push("Please enter required data");
              $(this).last().find('.other-fields').last().find(':input').last().addClass('error');
            }else{
              var [err_msg, not_valid] = securityValidation(input_field);
              if (not_valid) {
                validate = 0;
                filters.push(err_msg);
                $(this).last().find('.other-fields').last().find(':input').last().addClass('error');
              }
            }
          }
        }
      } else if($(this).hasClass('checkbox-multi')){
        if ($(this).find('div').attr('other_value') === "1") {
          $(this).find("input[type='checkbox']:checked").each(function() {
            if ($(this).val() ===  'Other') {
              var select_val = $(this).val();
              var other_val = 'Other'

              if(select_val == other_val){
                var input_field = $(this).closest('.checkbox-multi').find('.other_class').val();
                if(input_field == undefined || input_field == ''){
                  validate = 0;
                  filters.push("Please enter required data");
                  $(this).closest('.checkbox-multi').find('.other_class').addClass('error');
                }else{
                  var [err_msg, not_valid] = securityValidation(input_field);
                  if (not_valid) {
                    validate = 0;
                    filters.push(err_msg);
                    $(this).closest('.checkbox-multi').find('.other_class').addClass('error');
                  }
                }
              }
            }
          });
        }
      } else if($(this).hasClass('password')){
        var input_field = $(this).find(':input').val();
        var input_field_length = $(this).find(':input').val().length;
        var input_field_name = $(this).find(':input').attr('name');
        var confirm_field = $(this).find('input[name$="_input"]').val();
        var minlength = $(this).find(':input').attr('minlength')
        var maxlength = $(this).find(':input').attr('maxlength')

        if(input_field){
            if(input_field) {
                if (input_field != '') {
                    var [err_msg, not_valid] = securityValidation(input_field);
                    if (not_valid) {
                        validate = 0;
                        filters.push(err_msg);
                        $(this).find(':input').addClass('error');
                        $(this).find('input[name$="_input"]').addClass('error');
                    }
                    var [error_string, not_valid] = checkPasswordRules(input_field, input_field_length, minlength, maxlength, input_field_name)
                    if(not_valid){
                        validate = 0;
                        filters.push(error_string);
                        $(this).find(':input').addClass('error');
                        $(this).find('input[name$="_input"]').addClass('error');
                    }
                    else if (confirm_field == '') {
                        var confirm_require_msg = "Confirmation password is required ";
                        validate = 0;
                        if(jQuery.inArray(confirm_require_msg, filters) == -1){
                            filters.push(confirm_require_msg);
                        }
                        $(this).find(':input').addClass('error');
                        $(this).find('input[name$="_input"]').addClass('error');
                    }
                }
            }
        }

        if(input_field != confirm_field ) {
            if (confirm_field != '') {
                if ((input_field != undefined && confirm_field != undefined)) {
                    var password_msg = "Password and Confirm Password must be same.";
                    validate = 0;
                    if (jQuery.inArray(password_msg, filters) == -1) {
                        filters.push(password_msg);
                    }
                    $(this).find(':input').addClass('error');
                    $(this).find('input[name$="_input"]').addClass('error');
                }
            }
        }
      } else if($(this).hasClass('validation_field')){
        var field_label = $(this).find(":input").attr('name');
        var first_field = $(this).find(':input').val();
        var second_field_value = $(this).find('input[class$="_second"]').val();

        if(first_field) {
          if (first_field != '') {
            var [err_msg, not_valid] = securityValidation(first_field);
            if (not_valid) {
                validate = 0;
                filters.push(err_msg);
                $(this).find(':input').addClass('error');
            }
            else if(second_field_value == '') {
              $(this).find(':input').first().removeClass('error');
              var second_field_require_msg = field_label + " is required";
              validate = 0;
              filters.push(second_field_require_msg);
              $(this).find(':input').last().addClass('error');
            }
          }
        }
        if(second_field_value !== '' && second_field_value !== undefined){
          $(this).find(':input').last().removeClass('error');
          if(first_field === '' ){
            const firstFieldRequireMsg = field_label + " is required";
            validate = 0;
            filters.push(firstFieldRequireMsg);
            $(this).find(':input').first().addClass('error');
          }
        }

        if(first_field !== '' && second_field_value !== '' && first_field != second_field_value ) {
            if (second_field_value != '') {
                if ((first_field != undefined && second_field_value != undefined)) {
                    var both_field_same_msg = field_label + " values must be same";
                    validate = 0;
                    filters.push(both_field_same_msg);
                    $(this).find(':input').addClass('error');
                }
            }
        }
      } else if($(this).hasClass('multi_text')){
        if ($(this).find(':input').val()){
            var input_fields_wrap = $("div[class^='input_fields_']").length;
            for (var i = 1; i <= input_fields_wrap; i++ ) {
                $(this).find($("div[class='input_fields_"+i+"_wrap'] div input[type=text]").each(function (index){
                    var input_field_value = $(this).val();
                    if(input_field_value != '') {
                        var [err_msg, not_valid] = securityValidation(input_field_value);
                        if (not_valid) {
                            validate = 0;
                            filters.push(err_msg);
                            $("div[class='input_fields_"+i+"_wrap'] div input[type=text]").eq(index).addClass('error');
                        }
                    }
                }));
            }
        }
      } else if($(this).hasClass('email')){
        var input_field = $(this).find(':input').val().trim();
        if(input_field != '') {
          var [err_msg, not_valid] = securityEmailValidation(input_field);
          if (not_valid) {
            validate = 0;
            filters.push(err_msg);
            $(this).find(':input').addClass('error');
          }
        }
      } else if($(this).hasClass('hidden')){
      } else {
        if ($(this).find(':input').val()){
          var input_field = $(this).find(':input').val().trim();
          if(input_field != '') {
            var [err_msg, not_valid] = securityValidation(input_field);
            if (not_valid) {
              validate = 0;
              filters.push(err_msg);
              $(this).find(':input').addClass('error');
            }else if(input_field.length > 65535 ){
                validate = 0;
                filters.push("Character limit is maximum 65,535");
                $(this).find(':input').addClass('error');
            }
          }
        }
      }
      filters = $.unique(filters);
    }
  });

  if(filters.length > 0){
    valid = false
    $(".alert_message").html('<div class="alert alert-danger" role="alert">' + '<button type="button" class="close" data-dismiss="alert" aria-label="Close">' + '<span aria-hidden="true">&times;</span></button>' + filters.map(function(filter, index) {

      var textContent = filter.replace(/<[^>]*>/g, '');
      var concatenatedFilters = filters.slice(0, index + 1).map(f => f.replace(/<[^>]*>/g, '')).join(' ');
        return '<p tabindex="0" aria-label="' + (textContent.includes('Include') ? textContent : concatenatedFilters) + '" class="alert-danger">' + filter + '</p>';
    }).join('') + '</div>').css("display", "block");
    $(".alert_message p.alert-danger").first().focus();
  }else{
    if ($(".tab:eq("+currentTab+")").find(".form_submit_div").length == 0){
      validate = 0;
      validMessage = "Please go next"
    }
  }
  // If the valid status is true, mark the step as finished and valid:
  if (valid) {
    $(".alert_message .alert-danger").remove()
  }
  return valid; // return the valid status
}

function fixStepIndicator(n) {
  // This function removes the "active" class of all steps...
  var i, x = document.getElementsByClassName("step");
  for (i = 0; i < x.length; i++) {
    x[i].className = x[i].className.replace(" active", "");
  }
  if (x[n]){
    //... and adds the "active" class on the current step:
    x[n].className += " active";
  }
}

$(document).on('click', '#prevBtn', function(){
    var n = -1
    var prevTab = currentTab - 1;
    for(var i = currentTab - 1; i >= 0; i--){
        if($(".tab:eq("+(prevTab)+") .form_container [id^=conditionInclude]").length == $(".tab:eq("+(prevTab)+") .form_container div[class^='formElement']").length ){
            n = n - 1
        }else{
            break;
        }
        prevTab = prevTab - 1
    }
    if ($(this).hasClass('form-preview-previous-btn')) {
        nextFormPreviewPrev(n);
    } else {
        nextPrev(n, 'prevBtn');
    }
    var x = document.getElementsByClassName("tab");
    var firstElement = x[currentTab].querySelector('label[tabindex="0"]');
    if (firstElement) {
        firstElement.focus();
    }

});

$(document).on('click', '#nextBtn', function(){
  var n = 1
  var nextTab = currentTab + 1;
  remTabs = $(".tab").length - currentTab
  for(var i = 1; i < remTabs - 1; i++){
    if($(".tab:eq("+(nextTab)+") .form_container [id^=conditionInclude]").length == $(".tab:eq("+(nextTab)+") .form_container div[class^='formElement']").length ){
        n = n + 1
    }else{
        break;
    }
    nextTab = nextTab + 1;
  }
    if ($(this).hasClass('form-preview-next-btn')) {
        nextFormPreviewPrev(n);
    } else {
        nextPrev(n, 'nextBtn');
    }
});

function isChrome108() {
    var test = navigator.userAgent.match(/chrom(?:e|ium)\/(\d+)\./i);
    if (test) {
      return (parseInt(test[1], 10) === 108);
    }
    return false;
}
function inIframe() {
    try {
        return window.self !== window.top;
    } catch (e) {
        return true;
    }
}
function CorrectDropDown(){
  if (isChrome108() && inIframe()) {
    $('select').focus(function() {
        $(this).attr('size','3');
    });
    $('select').blur(function() {
        $(this).attr('size','1');
    });
    $('select').change(function() {
        $(this).attr('size','1');
        $(this).blur();
    });
  }
}
//CorrectDropDown();

window.addEventListener('message', ({ data}) => {
    try {
          var theme_css = JSON.parse(data)
          $.each(theme_css, function( index, themecss ) {
                if(themecss["form_uuid"] == "R9ZAcuu8O_n4vOQArkYnwA"){
                    if(themecss["form_settings"] == "true"){
                        $(".hulk_form_"+themecss["form_uuid"]).find(".form_generater_form_div").css({
                                'background': themecss["fill_color"],
                                'padding': themecss["padding"]+'px',
                                'border-color': themecss["border_color"],
                                'border-radius': themecss["border_radius"]+'px',
                                'border-width': themecss["border"]+'px',
                                'max-width': themecss['form_width']+'px',
                                'font-family': themecss['fonts'],
                        });
                        $(".hulk_form_"+themecss["form_uuid"]).find('.block_label').css({
                            'color': themecss["font_color"],
                            'font-size': themecss["size"]+'px',
                            'font-family': themecss['fonts']
                        });
                        $(".hulk_form_"+themecss["form_uuid"]).find(".form_submit_div").find('button').text(themecss["btn_text"])
                        $(".hulk_form_"+themecss["form_uuid"]).find("div.form_submit_div button, div.form_submit_div button:hover").css({
                            'cssText': 'background: '+themecss['sub_btn_bg_color']+' !important; color: '+themecss['sub_btn_txt_color']+' !important',
                            'border-radius': themecss['sub_btn_bdr_rad']+'px',
                            'font-size': themecss['sub_btn_font_size']+'px',
                            'border': themecss['sub_btn_bdr_width']+'px solid '+themecss['sub_btn_bdr_color'],
                            'font-family': themecss['fonts']
                        })
                        $(".hulk_form_"+themecss["form_uuid"]).find('input, textarea, select, .checkbox-inline label, .checkbox-inline input[type="checkbox"] + label, .radio-inline label, .radio-inline input[type="radio"] + label, .image label,.file label, .signature label').css({
                            'color': themecss['input_font_color'],
                            'font-size': themecss['input_size']+'px',
                            'font-family': themecss['fonts']
                        });
                        $(".hulk_form_"+themecss["form_uuid"]).find('input,textarea, select, .image label, .file label, .signature label, .form-control[disabled], .form-control[readonly]').css({
                            'background': themecss['input_background_color'],
                            'border-radius': themecss['input_border_radius']+'px',
                            'border': '1px solid '+ themecss["input_border_color"]
                        });
                        $('#'+themecss["form_uuid"]+'_themeStyle').remove()
                        $("<style id='"+themecss["form_uuid"]+"_themeStyle' type='text/css'> .hulk_form_"+themecss["form_uuid"]+" input:focus, textarea:focus, select:focus, .image label:focus,.signature label:focus,.file label:focus {background: "+themecss['input_background_color_focus']+" !important; border: 1px solid "+themecss['input_border_color_focus']+" !important;} </style>").appendTo("head");
                    }
                }
           });
    }
    catch(err) {
    }
});

// For Multi Text Element - Start
$(document).on('click', '[class$="_button"]', function(e) {
    e.preventDefault();
    var btn_id =  $(this).attr('class').split('_')[1];
    var max_fields =  $(this).attr('data-max');
    if($('.add_element_'+btn_id).length < max_fields){
        var $firstInput = $("div.input_fields_" + btn_id + "_wrap div input[type=text]").first();
        var input_placeholder = $("div[class='input_fields_"+btn_id+"_wrap'] div input[type=text]").attr('placeholder');
        // var input_class = $("div[class='input_fields_"+btn_id+"_wrap'] div input[type=text]").attr('class');
        var input_classes = $firstInput.attr('class').split(' ').filter(function(cls) {
                return cls !== 'error';
            }).join(' ') + ' new-input';
        var input_id = $("div[class='input_fields_"+btn_id+"_wrap'] div input[type=text]").attr('id');
        $('.input_fields_'+btn_id+'_wrap').append('<div style="display: flex; margin-top: 10px;"><input class="'+input_classes+'" name="add_element_'+btn_id+'" id="'+input_id+'" placeholder="'+input_placeholder+'" aria-placeholder="'+input_placeholder+'"  type="text"/> <button style="border: unset; background: none; margin-left: 10px; margin-top: -5px; font-size: 39px; color: gray;" class="remove_button_'+btn_id+'" aria-label="Remove button">-</button> </div>');
        iframe_resize('no', 'no', 'initial');
        $("div[class='input_fields_"+btn_id+"_wrap']").find('p.error').remove();
    }else{
        $("div[class='input_fields_"+btn_id+"_wrap']").find('p.error').remove()
        $("div[class='input_fields_"+btn_id+"_wrap']").append('<p class="error" tabindex="0" aria-label="You have added the maximum number of text fields." style="color: red; border: unset !important; font-size:9px; margin: unset !important; width: 105%;">You have added the maximum number of text fields.</p>');
    }
});

$(document).on('click', '[class^="remove_button_"]', function(e){
    $(this).parent().parent().find('p.error').remove()
    $(this).parent().remove();
});
// For Multi Text Element - End

// For Multi Column Element - Start
$(document).on('click', '[class$="_rowbutton"]', function(e) {
    e.preventDefault();
    var btn_id = $(this).attr('data-element');
    var max_fields =  $(this).attr('data-max');
    var required = $(this).attr('data-required');
    var aria_require = $(this).attr('data-required');
    var lable1_placeholder = $(".multi-column-input-" + btn_id).find("input[name='key']").attr('placeholder');
    var lable2_placeholder = $(".multi-column-input-" + btn_id).find("input[name='value']").attr('placeholder');
    if($('.multi-column-input-'+btn_id).length < max_fields){
      var row_field_text = '<div class="multi-column-input multi-column-input-'+btn_id+'"><div class="column1-desc"><input class="form-control add_element_'+btn_id+''+required+'"  name="key" aria-required="'+aria_require+'" type="text"  placeholder="'+lable1_placeholder+'" ></div><div class="column2-desc"><input class="form-control add_element_'+btn_id+''+required+'"  name="value" aria-required="'+aria_require+'" type="text"  placeholder="'+lable2_placeholder+'" ></div><button class="multi-colum-delete-button" data-element="'+btn_id+'">-</button></div>'
      $('.input_fields_'+btn_id+'_wrap').find('.multi-column-input-main').append(row_field_text);
      $("div[class='input_fields_"+btn_id+"_wrap']").find('p.error').remove();
    }else{
        $("div[class='input_fields_"+btn_id+"_wrap']").find('p.error').remove()
        $("div[class='input_fields_"+btn_id+"_wrap']").append('<p class="error" tabindex="0" aria-label="You have added the maximum number of text fields." style="color: red; border: unset !important; font-size:9px; margin: unset !important; width: 105%;">You have added the maximum number of text fields.</p>');
    }
});

$(document).on('click', '.multi-colum-delete-button', function(e) {
  e.preventDefault();
  var element_id = $(this).attr('data-element');
  $(this).parent('.multi-column-input').remove();
  var max_fields = $('[data-element="'+element_id+'"]').attr('data-max');
  if ($(".multi-column-input-"+element_id).length < max_fields) {
    $("div[class='input_fields_"+element_id+"_wrap']").find('p.error').remove();
  }
});
// For Multi Column Element - End

$(document).on("click",".remove-file",function (e) {
    e.preventDefault();
    var file_id = $(this).attr('id').split('_').pop();
    var form_element_count = $(this).attr('data-element-count');
    $.ajax({
        url: '/ajaxcall/filedelete',
        data: {file_id: file_id},
        success: function (data) {
           $("#span_file_id_"+file_id).remove();
           $("#div_file_id_"+file_id).remove();
           $("#file_id_"+file_id).remove();
           $("#fileupload_"+form_element_count).val('');
           var forAttributeValue = "fileupload_"+form_element_count;
            var labelElement = $("label[for='" + forAttributeValue + "']");
            labelElement.focus();
            file = fileuploaded['fileupload_'+form_element_count]
            delete fileuploaded['fileupload_'+form_element_count]
        },
    })
});

$(document).on("click",".remove-image",function (e) {
    e.preventDefault();
    var image_id = $(this).attr('id').split('_').pop();
    var form_element_count = $(this).attr('data-element-count');
    $.ajax({
        url: '/ajaxcall/imagedelete',
        data: {image_id: image_id},
        success: function(data){
            $("#span_image_id_"+image_id).remove();
            $("#div_image_id_"+image_id).remove();
            $("#image_id_"+image_id).remove();
            $("#imageupload_"+form_element_count).val('');
            var forAttributeValue = "fileupload_"+form_element_count;
            var labelElement = $("label[for='" + forAttributeValue + "']");
            labelElement.focus();
            image = fileuploaded['imageupload_'+form_element_count]
            delete fileuploaded['imageupload_'+form_element_count]
        }
    });
});

$(document).on("click",".remove-signature",function (e) {
    e.preventDefault();
    var signature_id = $(this).attr('id').split('_').pop();
    var form_element_count = $(this).attr('data-element-count');
    $.ajax({
        url: '/ajaxcall/signaturedelete',
        data: {signature_id: signature_id },
        success: function(data){
            $("#span_signature_id_"+signature_id).remove();
            $("#div_signature_id_"+signature_id).remove();
            $("#signature_id_"+signature_id).remove();
            $("#signatureupload_"+form_element_count).val('');
            var forAttributeValue = "fileupload_"+form_element_count;
            var labelElement = $("label[for='" + forAttributeValue + "']");
             labelElement.focus();
            signature = fileuploaded['signatureupload_'+form_element_count]
            delete fileuploaded['signatureupload_'+form_element_count]
        }
    });
});

$(document).on("click",".remove-multi-file",function (e) {
    e.preventDefault();
    var file_id = $(this).attr('id').split('_').pop();
    var file_name = $(this).attr('name');
    var form_element_count = $(this).attr('data-element-count');
    $.ajax({
        url: '/ajaxcall/filedelete',
        data: {file_id: file_id},
        success: function (data) {
            $("#span_multi_file_id_"+file_id).remove();
            $("#div_file_id_"+file_id).remove();
            if($('.formElement_'+form_element_count).find('span[id^=\"span_multi_file_id_\"]:first')){
                $('.formElement_'+form_element_count).find('span[id^=\"span_multi_file_id_\"]:first').css('margin-left', '0px');
            }
            $("#fileupload_"+form_element_count).val('');
            $("#multi_file_"+file_id).remove();
            $("#break_file_id_"+file_id).remove();
            files = fileuploaded['fileupload_'+form_element_count]['files']
            files.some(function (entry, i) {
              if (entry.id == file_id) {
                index = i;
                return true;
              }
            });
            files.splice(index, 1)
            fileuploaded['fileupload_'+form_element_count]['files'] = files
            var indexmew = ''
            file_list = fileuploaded['fileupload_'+form_element_count]['files_list']
            file_list.some(function (entry, i) {
              if (entry.name == file_name) {
                indexmew = i;
                return true;
              }
            });
            file_list.splice(indexmew, 1)
            fileuploaded['fileupload_'+form_element_count]['files_list'] = file_list
            if(files.length == 1){
              $('.formElement_'+form_element_count).find(".remove-multi-files").remove();
            }
        },
    })
});

$(document).on("click",".remove-multi-image",function (e) {
    e.preventDefault();
    var image_id = $(this).attr('id').split('_').pop();
    var image_name = $(this).attr('name');
    var form_element_count = $(this).attr('data-element-count');
    $.ajax({
        url: '/ajaxcall/imagedelete',
        data: {image_id: image_id},
        success: function(data){
            $("#span_multi_image_id_"+image_id).remove();
            $("#div_image_id_"+image_id).remove();
            if($('.formElement_'+form_element_count).find('span[id^=\"span_multi_image_id_\"]:first')){
                $('.formElement_'+form_element_count).find('span[id^=\"span_multi_image_id_\"]:first').css('margin-left', '0px');
            }
            $("#imageupload_"+form_element_count).val('');
            $("#multi_image_"+image_id).remove();
            $("#break_image_id_"+image_id).remove();
            images = fileuploaded['imageupload_'+form_element_count]['images']
            images.some(function (entry, i) {
              if (entry.id == image_id) {
                index = i;
                return true;
              }
            });
            images.splice(index, 1)
            fileuploaded['imageupload_'+form_element_count]['images'] = images
            var indexmew = ''
            image_list = fileuploaded['imageupload_'+form_element_count]['image_lists']
            image_list.some(function (entry, i) {
              if (entry.name == image_name) {
                indexmew = i;
                return true;
              }
            });
            image_list.splice(indexmew, 1)
            fileuploaded['imageupload_'+form_element_count]['image_lists'] = image_list
            if(images.length == 1){
              $('.formElement_'+form_element_count).find(".remove-multi-files").remove();
            }
        }
    });
});

$(document).on('click', '[id="nextBtn"]', function(e){
 iframe_resize('yes', 'no', 'success');
});

$(document).on('click', '[id="prevBtn"]', function(e){
 iframe_resize('yes', 'no', 'success');
});

function isPhoneValid(phone_number, dial_code, country_code){
    let phoneNumber = libphonenumber.parsePhoneNumber(dial_code+phone_number, country_code).formatInternational();
    return libphonenumber.isValidNumber(phoneNumber);
}

// ******************* Product Choice Element JS Start *******************
$(document).on('click', '.product_choice input[type="radio"]', function(e) {
    var radio = $(this);
    var formElement = radio.closest('.form-group').attr('class');
    var formElementId = formElement.match(/formElement_\d+/);

    if (formElementId) {
        formElementId = formElementId[0].split('_')[1];

        var clearBtn = $('.formElement_' + formElementId + '.product_choice .clear-selection-btn');
        if (clearBtn.length === 0) {
            clearBtn = $('<div>')
                    .addClass('clear-selection-container')
                    .append(
                            $('<button tabindex="0" aria-label="Clear Selection">')
                                    .text('Clear Selection')
                                    .addClass('clear-selection-btn')
                                    .addClass('clear-selection-link')
                                    .attr('data-form-element-id', formElementId)
                                    .on('click', function() {
                                        var formElementId = $(this).attr('data-form-element-id');
                                        $('input[type="radio"][name="product-choice-img-' + formElementId + '"]').prop('checked', false);
                                        $(this).parent().remove();
                                    })
                    );

            $('.formElement_' + formElementId + '.product_choice label:first').after(clearBtn);
        }
    }
});
// ******************* Product Choice Element JS End *******************

// ******************* Picture Choice Element JS Start *******************
$(document).on('click', '.picture_choice input[type="radio"]', function(e) {
    var radio = $(this);
    var formElement = radio.closest('.form-group').attr('class');
    var formElementId = formElement.match(/formElement_\d+/);

    if (formElementId) {
        formElementId = formElementId[0].split('_')[1];

        var clearBtn = $('.formElement_' + formElementId + '.picture_choice .clear-selection-btn');
        if (clearBtn.length === 0) {
            clearBtn = $('<div>')
                    .addClass('clear-selection-container')
                    .append(
                            $('<button tabindex="0" aria-label="Clear Selection">')
                                    .text('Clear Selection')
                                    .addClass('clear-selection-btn')
                                    .addClass('clear-selection-link')
                                    .attr('data-form-element-id', formElementId)
                                    .on('click', function() {
                                        var formElementId = $(this).attr('data-form-element-id');
                                        $('input[type="radio"][name="picture-choice-img-' + formElementId + '"]').prop('checked', false);
                                        $(this).parent().remove();
                                    })
                    );

            $('.formElement_' + formElementId + '.picture_choice label:first').after(clearBtn);
        }
    }
});
// ******************* Picture Choice Element JS End *******************

//phone fields shouldn't accept these chars
$(".phone input").keydown(function (e) {
    if(e.key=='e' || e.key=='.' || e.key=='-'){
        return false;
    }
});

$(".toggle-password").click(function() {
  $(this).toggleClass("fa-eye fa-eye-slash");
  input = $(this).parent().find("input:first");
  if (input.attr("type") == "password") {
      input.attr("type", "text");
  } else {
      input.attr("type", "password");
  }
});

$(".toggle-password-confirm").click(function() {
  $(this).toggleClass("fa-eye fa-eye-slash");
  input = $(this).parent().find('input[name$="_input"]');
  if (input.attr("type") == "password") {
      input.attr("type", "text");
  } else {
      input.attr("type", "password");
  }
});

//prevent enter key press when dropzone elements present
$("input").keydown(function (e) {
    if ($('.dropzone').length > 0){
        if(e.key=='Enter'){
            e.preventDefault();
        }
    }
});

window.keyboardAccess = function(){
    const radios = document.querySelectorAll('.radio-inline, .checkbox-inline, .rating-inline');
    const emojiContainer = document.querySelector('.emoji-feedback');
    const productContainers = document.querySelectorAll('.product-grid, .picture_choice');
    const fileUploadContainers = document.querySelectorAll('.file, .image, .signature');
    const checkboxContainers = document.querySelectorAll('.checkbox .checkbox-inline');
    const dropzoneElements = document.querySelectorAll('.dropzone');

    if (radios.length > 0) {
        radios.forEach((radio) => {
            radio.addEventListener('keydown', (event) => {
                if (event.key === 'Enter') {
                    radio.focus();
                    radio.click();
                }
            });
        });
    }

    if (emojiContainer) {
        emojiContainer.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                const emojiInputs = emojiContainer.querySelectorAll('.ef-radio');
                emojiInputs.forEach((emojiInput) => {
                    emojiInput.checked = false;
                });
                event.target.querySelector('input').checked = true;
            }
        });
    }

    const handleProductChoices = (container) => {
        container.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                const radios = container.querySelectorAll('input[type="radio"]');
                const checkboxes = container.querySelectorAll('input[type="checkbox"]');
                
                if (radios.length > 0 && radios[0].type === 'radio') {
                    radios.forEach(radio => {
                        radio.checked = false;
                    });
                    event.target.querySelector('input[type="radio"]').checked = true;
                } else if (checkboxes.length > 0 && checkboxes[0].type === 'checkbox') {
                    const targetCheckbox = event.target.querySelector('input[type="checkbox"]');
                    if (targetCheckbox) {
                        targetCheckbox.checked = !targetCheckbox.checked;
                    }
                }
            }
        });
    };

    productContainers.forEach(handleProductChoices);

    const handleFileUpload = (container) => {
        const inputElement = container.querySelector('input[type="file"]');
        const labelElement = container.querySelector('label');

        if (labelElement) {
            labelElement.addEventListener('keydown', (event) => {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    inputElement.click();
                }
            });
        }
    };

    fileUploadContainers.forEach(handleFileUpload);

    if (dropzoneElements.length > 0) {
        dropzoneElements.forEach(dropzoneElement => {
            dropzoneElement.addEventListener('keydown', (event) => {
                if (event.key === 'Enter') {
                    dropzoneElement.click();
                    event.preventDefault();
                }
            });
        });
    }

    if (checkboxContainers.length > 0) {
        checkboxContainers.forEach((container) => {
            container.addEventListener('keydown', function handleKeydown(event) {
                if (event.key === 'Enter') {
                    event.preventDefault(); 
                    const checkbox = container.querySelector('input[type="checkbox"]');
                    if (checkbox) {
                        checkbox.checked = !checkbox.checked; 
                    }
                }
            });
        });
    }
};
keyboardAccess();

// Remove all button for files and images --- Start
$(document).on('click','.remove-multi-files', function(e){
    e.preventDefault();

    var form_element_count = $(this).attr('data-element-count');
    form_element = $(".formElement_"+form_element_count)

    var elements;
    if(form_element.hasClass("file")){
      elements = $(".formElement_"+form_element_count).find('.remove-multi-file');
    }else if(form_element.hasClass("image")){
      elements = $(".formElement_"+form_element_count).find('.remove-multi-image');
    }

    if(elements.length > 0){
      $.each(elements, function(index, value){
        $(this).trigger('click');
      });
      $(this).closest('.remove-multi-files').remove();
    }
});
// Remove all button for files and images --- End

function fileExists(files, file) {
  for (var i = 0; i < files.length; i++) {
    if (files[i].name === file.name) {
      return true;
    }
  }
  return false;
}

function setupSingleImageUpload(formElementCount, allow100Mb, messageList, formDetails) {
  $('#imageupload_'+formElementCount).change(function(){
    var ext = $(this).val().split('.').pop().toLowerCase();
    if(ext.trim() != ''){
      if($.inArray(ext, ['jpg', 'jpeg', 'png', 'svg']) == -1) {
        $('.formElement_'+formElementCount + 'span.fileres').html('');
        $('.formElement_'+formElementCount + 'span.fileres').html(messageList['image_extension']);
        return false;
      } else{
        swal({ content: {element: 'div', attributes: {className: 'loader'}}, button: false });
        var file_target = this;
        var formData = new FormData();
        formData.append('upimage[form_uuid]', formDetails['uuid']);
        formData.append('upimage[shop_uuid]', formDetails['shop_uuid']);
        formData.append('upimage[shop_id]', "129155");
        formData.append('upimage[formcreator_id]', formDetails['id']);
        $('.formElement_' + formElementCount + 'span.fileres').html('');
        jQuery.each(file_target.files, function(i, file) {
          if (allow100Mb == 'true'){
            if ((file.size/1000000) > 100){
              restrict_file = true
              upload = false
            }else{
              restrict_file = false
              formData.append('upimage[images]', file);
            }
          }else{
            if ((file.size/1000000) > 20){
              restrict_file = true
            }else{
              restrict_file = false
              formData.append('upimage[images]', file);
            }
          }
        });

        if (restrict_file == true){
          swal('', messageList['image_must_less'], 'error');
          $('.sweet-alert .sa-button-container').css('cssText', 'display: block !important;');
          return false
        }

        $.ajax({
          url: '/ajaxcall/imagefileupload',
          type: 'POST',
          data: formData,
          contentType: false,
          cache: false,
          processData:false,
          success: function(data){
            if(typeof fileuploaded['imageupload_'+formElementCount] !== 'undefined'){
              $.ajax({
                url: '/ajaxcall/imagedelete',
                data: {image_id: fileuploaded['imageupload_'+formElementCount]['id'] },
                success: function(data){
                }
              });
            }
            $('.formElement_'+formElementCount).find('.single-text-width').remove();
            $('[data-element-count="' + formElementCount + '"]').remove();
            var url= data['image']['url'];
            fileuploaded['imageupload_'+ formElementCount] = {};
            fileuploaded['imageupload_'+ formElementCount]['url'] = url;
            var image_name_url = url.split('/').pop();
            var image_name_id = image_name_url.split('_').pop();
            var image_name = image_name_url.split('_'+image_name_id).join('');
            var image_format = image_name_url.split('.').pop();
            var image_id = data['id'];
            fileuploaded['imageupload_'+ formElementCount]['type'] = 'image';
            fileuploaded['imageupload_'+ formElementCount]['upload_type'] = 'single';
            fileuploaded['imageupload_'+ formElementCount]['id'] = data['id'];
            $('.formElement_'+formElementCount).append('<div style="display: flex;" id="div_image_id_'+image_id+'"><span class="fileres single-text-width" id="span_image_id_'+image_id+'"> '+image_name+'.'+image_format+' </span><button title="Remove Image" data-element-count="'+formElementCount+'" class="remove-image" id="image_id_'+image_id+'">×</button></div>');
            //$('.formElement_'+formElementCount).append('<button title="Remove Image" data-element-count="'+formElementCount+'" class="remove-image" id="image_id_'+image_id+'">×</button>');
            swal.close();
          },
          error: function(){
            $('.formElement_' + formElementCount + 'span.fileres').html(messageList['error_image_upload']);
            swal.close();
          }
        });
        // swal.close();
      }
    }
    iframe_resize('no', 'no', 'initial');
  });
}

function setupMultipleImageUpload(formElementCount, allImageMulti, allow100Mb, messageList, formDetails){
  fileuploaded['imageupload_'+formElementCount] = {};
  fileuploaded['imageupload_'+formElementCount]['images'] = [];
  fileuploaded['imageupload_'+formElementCount]['image_lists'] = [];
  fileuploaded['imageupload_'+formElementCount]['type'] = 'image';
  fileuploaded['imageupload_'+formElementCount]['upload_type'] = 'multiple';
  
  $('#imageupload_'+formElementCount).change(function(){
    var file_to_uploads = fileuploaded['imageupload_'+formElementCount]['image_lists']
    var ext = $(this).val().split('.').pop().toLowerCase();
    if(ext.trim() != ''){
      if($.inArray(ext, ['jpg', 'jpeg', 'png', 'svg']) == -1) {
        swal('', messageList['image_extension'], 'error');
        $('.sweet-alert .sa-button-container').css('cssText', 'display: block !important;');
        return false;
      } else {
        swal({ content: {element: 'div', attributes: {className: 'loader'}}, button: false });

        $('.formElement_'+ formElementCount + 'span.fileres').html('');
        var input = this;
        upload_count = 0;
        var tmIU = fileuploaded['imageupload_'+formElementCount];
        var total_fields = $('.formElement_'+formElementCount).find('span[id^=span_multi_image_id_]').length;
        if(input.files.length + total_fields <= allImageMulti){
          var file_to_upload = [];
          var formData = new FormData();
          formData.append('upimage[form_uuid]', formDetails['uuid']);
          formData.append('upimage[shop_uuid]', formDetails['shop_uuid']);
          formData.append('upimage[shop_id]', "129155");
          formData.append('upimage[formcreator_id]', formDetails['id']);
          if(tmIU.length > 0) {
            jQuery.each(tmIU['images'], function(i, file) {
              file_to_upload.push(file);
              fileuploaded['imageupload_'+formElementCount]['image_lists'].push(file);
              formData.append('upimage[images][]', file);
            });
          }

          var upload = true;

          jQuery.each(input.files, function(i, file) {
            if (fileExists(file_to_uploads, file)) {
              swal('', messageList['file_already_exist'], 'error');
              $('.sweet-alert .sa-button-container').css('cssText', 'display: block !important;');
              upload = false;
              //iframe_resize('yes', 'no', 'error');
              return false;
            }
            file_to_upload.push(file);
            fileuploaded['imageupload_'+formElementCount]['image_lists'].push(file);
            formData.append('upimage[images][]', file);
            if (allow100Mb == 'true'){
              if ((file.size/1000000) > 100){
                restrict_file = true
                upload = false
              }else{
                restrict_file = false
              }
            }else{
              if ((file.size/1000000) > 20){
                restrict_file = true
                upload = false
              }else{
                restrict_file = false
              }
            }
          });

          if (restrict_file == true){
            swal('', messageList['image_must_less'], 'error');
            $('.sweet-alert .sa-button-container').css('cssText', 'display: block !important;');
            return false
          }

          if(upload){
            swal({ content: {element: 'div', attributes: {className: 'loader'}}, button: false });

            $.ajax({
              url: '/ajaxcall/multipleimageupload',
              type: 'POST',
              data: formData,
              contentType: false,
              cache: false,
              processData:false,
              success: function(data){
                if(data.length > 0){
                  $.each(data, function(i, imag_upld) {
                    newImage = {};
                    newImage['url'] = imag_upld['image']['url'];
                    newImage['type'] = 'image';
                    newImage['id'] = imag_upld['id'];
                    tmIU['images'].push(newImage);
                    var url = newImage['url']
                    var image_name_url = url.split('/').pop();
                    var image_name_id = image_name_url.split('_').pop();
                    var image_name = image_name_url.split('_'+image_name_id).join('');
                    var image_format = image_name_url.split('.').pop();
                    var image_id = newImage['id']
                    var full_image_name = image_name + '.' + image_format;
                    if(document.querySelectorAll('.formElement_' + formElementCount + ' .infoMessage').length <= 0){
                      var label_width = document.querySelector('.formElement_' + formElementCount + ' label').offsetWidth + 5;
                    }

                    $('.formElement_'+formElementCount).append('<div style="display: flex;" id="div_image_id_'+image_id+'"><span class="remove-multi-text multi-text-width" id="span_multi_image_id_'+image_id+'" tabindex="0" aria-label="'+image_name+'"> '+image_name+'.'+image_format+' </span><button title="Remove Image" data-element-count="'+formElementCount+'" class="remove-multi-image" id="multi_image_'+image_id+'" tabindex="0" name="'+full_image_name+'">×</button><span id="break_image_id_'+image_id+'"><br/></span></div>');
                    //$('.formElement_'+formElementCount).append('<button title="Remove Image" data-element-count="'+formElementCount+'" class="remove-multi-image" id="multi_image_'+image_id+'" tabindex="0" name="'+full_image_name+'">×</button>');
                    //$('.formElement_'+formElementCount).append('<span id="break_image_id_'+image_id+'"><br/></span>');

                    if($('.formElement_'+formElementCount).find('span[id^=\"span_multi_image_id_\"]:first')){                                                    
                      $('.formElement_'+formElementCount).find('span[id^=\"span_multi_image_id_\"]:first').css('margin-left', '0px');
                    }

                    var existingButton = $('#multi_file_'+formElementCount);
                    if (existingButton.length) {
                      existingButton.remove(); 
                    }   
                  
                    if($('.remove-multi-image').length > 1){
                       $('.formElement_'+formElementCount).append('<span title="'+messageList['remove_all_for_file_image_upload']+'" href="javascript:void(0)" onclick="event.preventDefault()" data-element-count="'+formElementCount+'" class="remove-multi-files" id="multi_file_'+ formElementCount+'" tabindex="0">'+messageList['remove_all_for_file_image_upload']+'</span>');
                    }
                  });
                  
                  var links = document.querySelectorAll('button.remove-multi-image');                   
                  if (links.length > 0) {
                    links.forEach((link) => {
                      link.addEventListener('keydown', (event) => {
                        if (event.key === 'Enter') {
                          link.click();
                          event.preventDefault();
                        }
                      });
                    });
                  }

                } else {
                  $('.formElement_'+formElementCount + 'span.fileres').html(messageList['error_image_upload'])
                }
                swal.close();
              },
              error: function(){
                $('.formElement_' + formElementCount + 'span.fileres').html(messageList['error_image_upload']);
                swal.close();
              }
            });
          }
          // swal.close();
        } else {
          swal('', allImageMulti + ' ' + messageList['image_number'], 'error');
          $('.sweet-alert .sa-button-container').css('cssText', 'display: block !important;');
        }
        iframe_resize('no', 'no', 'initial');
      }
    }
  });
}

function setUpDragAndDropImage(formElementCount, allow100Mb, messageList , formDetails,allImageMulti,preview_mode) {
  var allowed_file_size = 20
  var maxFiles = 1
  if (allow100Mb == 'true'){
    allowed_file_size = 100
  }
  if (allImageMulti > 1){
    maxFiles = allImageMulti
    fileuploaded['imageupload_'+formElementCount] = {};
    fileuploaded['imageupload_'+formElementCount]['images'] = [];
    fileuploaded['imageupload_'+formElementCount]['image_lists'] = [];
    fileuploaded['imageupload_'+formElementCount]['type'] = 'image';
    fileuploaded['imageupload_'+formElementCount]['upload_type'] = 'multiple';
  }

  if (preview_mode !== 'true'){
    $('#image-dropzone-'+formElementCount).dropzone({
      url: '/ajaxcall/dropzoneimageupload',
      params: {
      form_uuid: formDetails['uuid'],
      shop_uuid: formDetails['shop_uuid'],
      formcreator_id: formDetails['id'],
      shop_id: "129155",
      }, 
      paramName: 'image',
      maxFilesize: allowed_file_size,
      addRemoveLinks: true,
      acceptedFiles: '.jpg,.png,.jpeg,.svg',
      maxFiles: maxFiles,
      accept: function(file, done) {
        if (allImageMulti > 1){
          file_to_uploads = fileuploaded['imageupload_'+formElementCount]['image_lists']
          if (fileExists(file_to_uploads, file)) {
            swal('', messageList['file_already_exist'], 'error');
            $('.sweet-alert .sa-button-container').css('cssText', 'display: block !important;');
            //iframe_resize('yes', 'no', 'error');
            file.previewElement.remove(); // Remove the file from Dropzone
            return;
          }
          fileuploaded['imageupload_'+formElementCount]['image_lists'].push(file);
        }
        done();
     },
      success: function (file, response) {
        data = response;
        file.id = data['id']; 
        if (allImageMulti > 1){
          newImage = {};
          newImage['url'] = data['image']['url'];
          newImage['type'] = 'image';
          newImage['id'] = data['id'];
          fileuploaded['imageupload_'+formElementCount]['images'].push(newImage);
        }else{
          $('.formElement_'+formElementCount).find('.single-text-width').remove();
          $('[data-element-count="' + formElementCount + '"]').remove();
          var url= data['image']['url'];
          fileuploaded['imageupload_'+formElementCount] = {};
          fileuploaded['imageupload_'+formElementCount]['url'] = url;
          fileuploaded['imageupload_'+formElementCount]['type'] = 'image';
          fileuploaded['imageupload_'+formElementCount]['upload_type'] = 'single';
          fileuploaded['imageupload_'+formElementCount]['id'] = data['id'];
        }
        var links = document.querySelectorAll('a.dz-remove');
        if (links.length > 0) {
          links.forEach((link) => {
            link.addEventListener('keydown', (event) => {
                if (event.key === 'Enter') {
                  link.click();
                  event.preventDefault();
                }
            });
          });
        }

        if (links.length > 1) {
            $('#image-dropzone-' + formElementCount).find(".remove-multi-images-dropzone").css('display', 'block');

            $('#image-dropzone-' + formElementCount).find(".remove-multi-images-dropzone").on('click', function () {
                removeAllFiles(formElementCount);
            });
        }

        iframe_resize('no', 'no', 'initial');
      },
      error: function (file, response) {
        swal('', response , 'error');
        $('.sweet-alert .sa-button-container').css('cssText', 'display: block !important;');
        file.previewElement.remove();
        $('#image-dropzone-'+formElementCount).find('.dz-message').show();
      },
      removedfile: function(file) {
          $.ajax({
            url: '/ajaxcall/imagedelete',
            data: {image_id: file.id},
            success: function(data){
              file.previewElement.remove();
              if (allImageMulti > 1){
                images = fileuploaded['imageupload_'+formElementCount]['images']
                images.some(function (entry, i) {
                  if (entry.id == file.id) {
                    index = i;
                    return true;
                  }
                });
                images.splice(index, 1)
                fileuploaded['imageupload_'+formElementCount]['images'] = images
                var indexmew = ''
                images_list = fileuploaded['imageupload_'+formElementCount]['image_lists']
                images_list.some(function (entry, i) {
                  if (entry.name == file.name) {
                    indexmew = i;
                    return true;
                  }
                });
                images_list.splice(indexmew, 1)
                fileuploaded['imageupload_'+formElementCount]['image_lists'] = images_list
              }else{
                delete fileuploaded['imageupload_'+formElementCount]
              }
              iframe_resize('no', 'no', 'initial');
            }
          });

        var numFiles = $('#image-dropzone-' + formElementCount).find(".dz-preview").length - 1;

        if (numFiles <= 1) {
          $('#image-dropzone-' + formElementCount).find(".remove-multi-images-dropzone").css('display', 'none');
        }
      }
    });

    function removeAllFiles(formElementCount) {
        var dropzoneInstance = Dropzone.forElement('#image-dropzone-' + formElementCount);
        dropzoneInstance.removeAllFiles(true);
        $('#image-dropzone-'+formElementCount).find(".remove-multi-images-dropzone").css('display', 'none');
    }
  }
}

function setupMultipleFileUpload(formElementCount, allFileMulti, allow100Mb, messageList, formDetails){
  fileuploaded['fileupload_'+formElementCount] = {};
  fileuploaded['fileupload_'+formElementCount]['files'] = [];
  fileuploaded['fileupload_'+formElementCount]['files_list'] = [];
  fileuploaded['fileupload_'+formElementCount]['type'] = 'file';
  fileuploaded['fileupload_'+formElementCount]['upload_type'] = 'multiple';
  $('#fileupload_'+formElementCount).change(function(){
    var file_to_uploads = fileuploaded['fileupload_'+formElementCount]['files_list']
    var ext = $(this).val().split('.').pop().toLowerCase();
    if(ext.trim() != ''){
      if($.inArray(ext, ['', 'exe']) == 1) {
        swal('', messageList['file_extension'], 'error');
        $('.sweet-alert .sa-button-container').css('cssText', 'display: block !important;');
        return false;
      } else {
        swal({ content: {element: 'div', attributes: {className: 'loader'}}, button: false });
        $('.formElement_' + formElementCount + ' span.fileres').html('');
        var input = this;
        upload_count = 0;
        var tmIU = fileuploaded['fileupload_'+formElementCount];
        var total_fields = $('.formElement_'+formElementCount).find('span[id^=span_multi_file_id_]').length;
        if(input.files.length + total_fields <= allFileMulti){
          var file_to_upload = [];
          var formData = new FormData();
          formData.append('upimage[form_uuid]', formDetails['uuid']);
          formData.append('upimage[shop_uuid]', formDetails['shop_uuid']);
          formData.append('upimage[shop_id]',"129155");
          formData.append('upimage[formcreator_id]', formDetails['id']);
          if(tmIU.length > 0) {
            jQuery.each(tmIU['files'], function(i, file) {
              file_to_upload.push(file);
              formData.append('upimage[files][]', file);
              fileuploaded['fileupload_'+formElementCount]['files_list'].push(file);
            });
          }
          var upload = true;
          

          jQuery.each(input.files, function(i, file) {
            if (fileExists(file_to_uploads, file)) {
              swal('', messageList['file_already_exist'], 'error');
              $('.sweet-alert .sa-button-container').css('cssText', 'display: block !important;');
              upload = false;
              //iframe_resize('yes', 'no', 'error');
              return false;
            }
            file_to_upload.push(file);
            fileuploaded['fileupload_'+formElementCount]['files_list'].push(file);
            formData.append('upimage[files][]', file);
            if (allow100Mb == 'true'){
              if ((file.size/1000000) > 100){
                restrict_file = true
                upload = false
              }else{
                restrict_file = false
              }
            }else{
              if ((file.size/1000000) > 20){
                restrict_file = true
                upload = false
              }else{
                restrict_file = false
              }
            }
          });

          if (restrict_file == true){
            swal('', messageList['file_must_less'], 'error');
            $('.sweet-alert .sa-button-container').css('cssText', 'display: block !important;');
            return false
          }


          if(upload){
            swal({ content: {element: 'div', attributes: {className: 'loader'}}, button: false });
            $.ajax({
              url: '/ajaxcall/multiplefileupload',
              type: 'POST',
              data: formData,
              contentType: false,
              cache: false,
              processData:false,
              success: function(data){
                if(data.length > 0){
                  $.each(data, function(i, imag_upld) {
                    newImage = {};
                    newImage['url'] = imag_upld['file']['url'];
                    newImage['type'] = 'file';
                    newImage['id'] = imag_upld['id'];
                    tmIU['files'].push(newImage);
                    var url = newImage['url']
                    var file_name_url = url.split('/').pop();
                    var file_name_id = file_name_url.split('_').pop();
                    var file_name = file_name_url.split('_'+file_name_id).join('');
                    var file_format = file_name_url.split('.').pop();
                    var file_id = newImage['id']
                    var full_file_name = file_name+'.'+file_format
                    if(document.querySelectorAll('.formElement_' + formElementCount + ' .infoMessage').length <= 0){
                      var label_width = document.querySelector('.formElement_' + formElementCount + ' label').offsetWidth + 5;
                    }

                    $('.formElement_'+formElementCount).append('<div style="display: flex" id="div_file_id_'+file_id+'"><span class="remove-multi-text multi-text-width" id="span_multi_file_id_'+file_id+'" tabindex="0" aria-label="'+file_name+'">'+file_name+'.'+file_format+'</span><button title="Remove File" data-element-count="'+formElementCount+'" class="remove-multi-file" id="multi_file_'+file_id+'" tabindex="0"  name="'+full_file_name+'">×</button><span id="break_file_id_'+file_id+'"><br/></span></div>');
                    //$('.formElement_'+formElementCount).append('<button title="Remove File" data-element-count="'+formElementCount+'" class="remove-multi-file" id="multi_file_'+file_id+'" tabindex="0"  name="'+full_file_name+'">×</button>');
                    //$('.formElement_'+formElementCount).append('<span id="break_file_id_'+file_id+'"><br/></span>');
                    if($('.formElement_'+formElementCount).find('span[id^=\"span_multi_file_id_\"]:first')){                                                    
                      $('.formElement_'+formElementCount).find('span[id^=\"span_multi_file_id_\"]:first').css('margin-left', '0px');
                    }


                    var existingButton = $('#multi_file_'+formElementCount);
                    if (existingButton.length) {
                      existingButton.remove();
                    }  


                    if($('.remove-multi-file').length > 1){
                      $('.formElement_'+formElementCount).append('<span title="'+messageList['remove_all_for_file_image_upload']+'" href="javascript:void(0)" onclick="event.preventDefault()" data-element-count="'+formElementCount+'" class="remove-multi-files" id="multi_file_'+ formElementCount+'" tabindex="0">'+messageList['remove_all_for_file_image_upload']+'</span>');


                    }
                  });
                  
                  var links = document.querySelectorAll('button.remove-multi-file');
                  if (links.length > 0) {
                    links.forEach((link) => {
                      link.addEventListener('keydown', (event) => {
                        if (event.key === 'Enter') {
                          link.click();
                          event.preventDefault();
                        }
                      });
                    });
                  }


                } else {
                  $('.formElement_'+formElementCount + 'span.fileres').html(messageList['error_file_upload'])
                }
                swal.close();
              },
              error: function(){
                $('.formElement_'+formElementCount + 'span.fileres').html(messageList['error_file_upload']);
                swal.close();
              }
            });
          }
          // swal.close();
        } else {
          swal('', allFileMulti + ' ' + messageList['only_file_number_alloud'], 'error');
          $('.sweet-alert .sa-button-container').css('cssText', 'display: block !important;');
        }
        iframe_resize('no', 'no', 'initial');
      }
    }
  });
}

function setupSingleFileUpload(formElementCount, allow100Mb, messageList, formDetails) {
 $('#fileupload_'+formElementCount).change(function(){
   var ext = $(this).val().split('.').pop().toLowerCase();
   if(ext != '') {
     swal({ content: {element: 'div', attributes: {className: 'loader'}}, button: false });
     var file_target = this;
     var formData = new FormData();
     formData.append('upimage[shop_uuid]', formDetails['shop_uuid']);
     formData.append('upimage[form_uuid]',formDetails['uuid']);
     formData.append('upimage[shop_id]', "129155");
     formData.append('upimage[formcreator_id]', formDetails['id']);
     $('.formElement_'+ formElementCount + ' span.fileres').html('');
     jQuery.each(file_target.files, function(i, file) {
       if (allow100Mb == 'true'){
         if ((file.size/1000000) > 100){
           restrict_file = true
           upload = false
         }else{
           restrict_file = false
           formData.append('upimage[files]', file);
         }
       }else{
         if ((file.size/1000000) > 20){
           restrict_file = true
         }else{
           restrict_file = false
           formData.append('upimage[files]', file);
         }
       }
     });
     if (restrict_file == true){
       swal('', messageList['file_must_less'], 'error');
       $('.sweet-alert .sa-button-container').css('cssText', 'display: block !important;');
       return false
     }


     $.ajax({
       url: '/ajaxcall/fileupload',
       type: 'POST',
       data: formData,
       contentType: false,
       cache: false,
       processData:false,
       success: function(data){
         if (typeof fileuploaded['fileupload_' + formElementCount] !== 'undefined') {
           $.ajax({
             url: '/ajaxcall/filedelete',
             data: {file_id: fileuploaded['fileupload_' + formElementCount]['id'] },
             success: function(data){
             }
           });
         }
         $('.formElement_'+formElementCount).find('.single-text-width').remove();
         $('[data-element-count="' + formElementCount + '"]').remove();
         var url= data['file']['url'];
         fileuploaded['fileupload_'+formElementCount] = {};
         fileuploaded['fileupload_'+formElementCount]['url'] = url;
         var file_name_url = url.split('/').pop();
         var file_name_id = file_name_url.split('_').pop();
         var file_name = file_name_url.split('_'+file_name_id).join('');
         var file_format = file_name_url.split('.').pop();
         var file_id = data['id'];
         fileuploaded['fileupload_'+ formElementCount ]['type'] = 'file';
         fileuploaded['fileupload_'+ formElementCount]['id'] = data['id'];
         $('.formElement_'+ formElementCount +  'span.fileres').remove();
         $('.formElement_'+ formElementCount).append('<div style="display: flex;" id="div_file_id_'+file_id+'"><span class="fileres single-text-width" id="span_file_id_'+file_id+'"> '+file_name+'.'+file_format+' </span><button title="Remove File" data-element-count="'+formElementCount+'" class="remove-file" id="file_id_'+file_id+'">×</button></div>');
        //$('.formElement_'+formElementCount).append('<button title="Remove File" data-element-count="'+formElementCount+'" class="remove-file" id="file_id_'+file_id+'">×</button>');
         swal.close();
       },
       error: function(){
         swal.close();
         swal('', messageList['error_file_upload'], 'error');
       }
     });
   }
 })
}

function setUpDragAndDropFile(formElementCount, allow100Mb, messageList, formDetails,allFileMulti,preview_mode) {
 var fupld = '';
 var allowed_file_size = 20
 var maxFiles = 1
 if (allow100Mb == 'true'){
   allowed_file_size = 100
 }
 if (allFileMulti > 1){
   maxFiles = allFileMulti
   fileuploaded['fileupload_'+formElementCount] = {};
   fileuploaded['fileupload_'+formElementCount]['files'] = [];
   fileuploaded['fileupload_'+formElementCount]['files_list'] = [];
   fileuploaded['fileupload_'+formElementCount]['type'] = 'file';
   fileuploaded['fileupload_'+formElementCount]['upload_type'] = 'multiple';
 }

 if (preview_mode !== 'true'){
   var acceptedFiles = "thengcoco.myshopify.com" == 'dr-martens-repairs.myshopify.com' 
    ? '.jpeg,.png,.pdf' 
    : ("thengcoco.myshopify.com" == '630cf7-2.myshopify.com' 
        ? '.pdf' 
        : ("thengcoco.myshopify.com" == 'un-per-due-llc.myshopify.com' 
            ? '.mov, .mp4, .avi' 
            : ''));

   $('#file-dropzone-'+formElementCount).dropzone({
     url: '/ajaxcall/dropzonefileupload',
     params: {
     form_uuid: formDetails['uuid'],
     shop_uuid: formDetails['shop_uuid'],
     formcreator_id: formDetails['id'],
     shop_id: "129155",
     },
     paramName: 'file',
     maxFilesize: allowed_file_size,
     addRemoveLinks: true,
     acceptedFiles: acceptedFiles,
     maxFiles: maxFiles,
     accept: function(file, done) {
      if (allFileMulti > 1){
        file_to_uploads = fileuploaded['fileupload_'+formElementCount]['files_list']
        if (fileExists(file_to_uploads, file)) {
          swal('', messageList['file_already_exist'], 'error');
          $('.sweet-alert .sa-button-container').css('cssText', 'display: block !important;');
          //iframe_resize('initial', 'no', 'error');
          file.previewElement.remove(); // Remove the file from Dropzone
          return;
        }
        fileuploaded['fileupload_'+formElementCount]['files_list'].push(file);
      }
      ext = file.name.split('.').pop().toLowerCase()
      if($.inArray(ext.trim(), ['', 'exe']) == 1){
        done(''+ message_list['file_extension']);
      } else {
        done();
      }
      
     },
     success: function (file, response) {
      data = response;
      file.id = data['id'];
      if (allFileMulti > 1){
        newImage = {};
        newImage['url'] = data['file']['url'];
        newImage['type'] = 'file';
        newImage['id'] = data['id'];
        fileuploaded['fileupload_'+formElementCount]['files'].push(newImage);
      }else{
        $('.formElement_'+formElementCount).find('.single-text-width').remove();
        $('[data-element-count="' + formElementCount + '"]').remove();
        var url= data['file']['url'];
        fileuploaded['fileupload_'+formElementCount] = {};
        fileuploaded['fileupload_'+formElementCount]['url'] = url;
        fileuploaded['fileupload_'+formElementCount]['type'] = 'file';
        fileuploaded['fileupload_'+formElementCount]['id'] = data['id'];
      }
      var links = document.querySelectorAll('a.dz-remove');
      if (links.length > 0) {
        links.forEach((link) => {
          link.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
              link.click();
              event.preventDefault();
            }
          });
        });
      }

      if (links.length > 1) {
        $('#file-dropzone-' + formElementCount).find(".remove-multi-files-dropzone").css('display', 'block');

        $('#file-dropzone-' + formElementCount).find(".remove-multi-files-dropzone").on('click', function () {
            removeAllFiles(formElementCount);
        });
      }

      iframe_resize('no', 'no', 'initial');
     },
     error: function (file, response) {
      swal('', response , 'error');
      $('.sweet-alert .sa-button-container').css('cssText', 'display: block !important;');
      file.previewElement.remove();
      $('#file-dropzone-'+formElementCount).find('.dz-message').show();
     },
     removedfile: function(file) {
        $.ajax({
          url: '/ajaxcall/filedelete',
          data: {file_id: file.id},
          success: function(data){
            file.previewElement.remove();
              if (allFileMulti > 1){
                files = fileuploaded['fileupload_'+formElementCount]['files']
                files.some(function (entry, i) {
                  if (entry.id == file.id) {
                    index = i;
                    return true;
                  }
                });
                files.splice(index, 1)
                fileuploaded['fileupload_'+formElementCount]['files'] = files
                var indexmew = ''
                file_list = fileuploaded['fileupload_'+formElementCount]['files_list']
                file_list.some(function (entry, i) {
                  if (entry.name == file.name) {
                    indexmew = i;
                    return true;
                  }
                });
                file_list.splice(indexmew, 1)
                fileuploaded['fileupload_'+formElementCount]['files_list'] = file_list
              }else{
                delete fileuploaded['fileupload_'+formElementCount]
              }
              iframe_resize('no', 'no', 'initial');
            }
          });

       var numFiles = $('#file-dropzone-' + formElementCount).find(".dz-preview").length - 1;

       if (numFiles <= 1) {
          $('#file-dropzone-' + formElementCount).find(".remove-multi-files-dropzone").css('display', 'none');
       }
     }
   });

    function removeAllFiles(formElementCount) {
        var dropzoneInstance = Dropzone.forElement('#file-dropzone-' + formElementCount);
        dropzoneInstance.removeAllFiles(true);
        $('#file-dropzone-'+formElementCount).find(".remove-multi-files-dropzone").css('display', 'none');
    }
 }
}

function setUpDragAndDropSignature(formElementCount,allow100Mb,messageList,formDetails,preview_mode) {
  var allowed_file_size = 20
    var maxFiles = 1
  if (allow100Mb == 'true'){
    allowed_file_size = 100
  }

  if (preview_mode !== 'true'){
    $('#signature-dropzone-'+formElementCount).dropzone({
        url: '/ajaxcall/dropzonesignatureupload',
        params: {
          form_uuid: formDetails['uuid'],
          shop_uuid:  formDetails['shop_uuid'],
          formcreator_id: formDetails['id'],
          shop_id: "129155"
        }, 
        paramName: 'signature',
        maxFilesize: allowed_file_size,
        addRemoveLinks: true,
        acceptedFiles: '.jpg,.png,.jpeg,.svg',
        maxFiles: maxFiles,
        success: function (file, response) {
          data = response;
          file.id = data['id'];
          $('.formElement_'+formElementCount).find('.single-text-width').remove();
          $('[data-element-count="' + formElementCount + '"]').remove();
          var url= data['signature']['url'];
          fileuploaded['signatureupload_'+formElementCount] = {};
          fileuploaded['signatureupload_'+formElementCount]['url'] = url;
          fileuploaded['signatureupload_'+formElementCount]['type'] = 'signature';
          fileuploaded['signatureupload_'+formElementCount]['upload_type'] = 'single';
          fileuploaded['signatureupload_'+formElementCount]['id'] = data['id'];
          iframe_resize('no', 'no', 'initial');
        },
        error: function (file, response) {
          swal('', response , 'error');
          $('.sweet-alert .sa-button-container').css('cssText', 'display: block !important;');
          $('.sweet-alert ').css('top', '10%');
          iframe_resize('yes', 'no', 'error');
          file.previewElement.remove();
          $('#signature-dropzone-'+formElementCount).find('.dz-message').show();
          $('.sweet-alert').focus();
        },
        removedfile: function(file) {
            //x = confirm('Do you want to delete?');
            //if(x){
              $.ajax({
                  url: '/ajaxcall/signaturedelete',
                  data: {signature_id: file.id},
                  success: function(data){
                    file.previewElement.remove();
                    delete fileuploaded['signatureupload_'+ formElementCount]
                    iframe_resize('no', 'no', 'initial');
                  }
              });
            //}else{
              //return false;
            //}
        },init: function() {
          this.on("addedfile", function(file) {
            // Remove previous file
            if (this.files.length > 1) {
                this.removeFile(this.files[0]);
            }
            file.deletedFromInit = false;
          });
        }
    });
  }
}

function setupSingleSignatureUpload(formElementCount,allow100Mb,messageList,formDetails){
  $('#signatureupload_'+formElementCount).change(function(){
    var ext = $(this).val().split('.').pop().toLowerCase();
    if(ext.trim() != ''){
      if($.inArray(ext, ['jpg', 'jpeg', 'png', 'svg']) == -1) {
        $('.formElement_'+formElementCount + 'span.fileres').html('');
        $('.formElement_'+formElementCount + 'span.fileres').html(messageList['image_extension']);
        return false;
      } else{
        swal({ content: {element: 'div', attributes: {className: 'loader'}}, button: false });
        var file_target = this;
        var formData = new FormData();
        formData.append('upimage[shop_uuid]', formDetails['shop_uuid']);
        formData.append('upimage[form_uuid]', formDetails['uuid']);
        formData.append('upimage[shop_id]', "129155");
        formData.append('upimage[formcreator_id]', formDetails['id']);
        $('.formElement_'+formElementCount + 'span.fileres').html('');
        jQuery.each(file_target.files, function(i, file) {
          if ((file.size/1000000) > 20){
            restrict_file = true
          }else{
            restrict_file = false
            formData.append('upimage[signatures]', file);
          }
        });

        if (restrict_file == true){
          swal('', messageList['image_must_less'], 'error');
          $('.sweet-alert .sa-button-container').css('cssText', 'display: block !important;');
          return false
        }

        $.ajax({
          url: '/ajaxcall/signatureupload',
          type: 'POST',
          data: formData,
          contentType: false,
          cache: false,
          processData:false,
          success: function(data){
            if(typeof fileuploaded['signatureupload_'+formElementCount] !== 'undefined'){
              $.ajax({
                url: '/ajaxcall/signaturedelete',
                data: {signature_id: fileuploaded['signatureupload_'+formElementCount]['id'] },
                success: function(data){
                }
              });
            }
            $('.formElement_'+formElementCount).find('.single-text-width').remove();
            $('[data-element-count="' + formElementCount + '"]').remove();
            var url= data['signature']['url'];
            fileuploaded['signatureupload_'+formElementCount] = {};
            fileuploaded['signatureupload_'+formElementCount]['url'] = url;
            var signature_name_url = url.split('/').pop();
            var signature_name_id = signature_name_url.split('_').pop();
            var signature_name = signature_name_url.split('_'+signature_name_id).join('');
            var signature_format = signature_name_url.split('.').pop();
            var signature_id = data['id'];
            fileuploaded['signatureupload_'+formElementCount]['type'] = 'signature';
            fileuploaded['signatureupload_'+formElementCount]['upload_type'] = 'single';
            fileuploaded['signatureupload_'+formElementCount]['id'] = data['id'];
            $('.formElement_'+formElementCount).append('<div style="display: flex;" id="div_signature_id_'+signature_id+'"><span class="fileres single-text-width" id="span_signature_id_'+signature_id+'"> '+signature_name+'.'+signature_format+' </span><button title="Remove Signature" data-element-count="'+formElementCount+'" class="remove-signature" id="signature_id_'+signature_id+'">×</button></div>');
            //$('.formElement_'+formElementCount).append('<button title="Remove Signature" data-element-count="'+formElementCount+'" class="remove-signature" id="signature_id_'+signature_id+'">×</button>');
            swal.close();
          },
          error: function(){
            $('.formElement_' + formElementCount + 'span.fileres').html(messageList['error_image_upload']);
            swal.close();
          }
        });
      }
    }
    iframe_resize('no', 'no', 'initial');
  });
}

		});

		
		jQuery(document).ready(function(){
			iframe_resize('no', 'no', 'initial');
		});
		

		function iframe_resize(scrVal, scrl_bottom, scroll_action){
			var scroll_to = false;
			if(scrVal == 'yes'){
				scroll_to = true;
			}

			if(scroll_action == 'error'){
			}

			if(scroll_action == 'success'){
			}

			if ( window.location !== window.parent.location ) {
				var parenturl = (window.location != window.parent.location) ? document.referrer : document.location;
        var urlArray = document.referrer.split('/');
				if(urlArray.count > 3){
					urlArray.pop();
					urlArray.pop();
				}
				var url = urlArray.join('/');
        var form_sbmt = "false"
        if(url == '' || url == "" || form_sbmt == "true"){
          url = "https://www.thengacoco.com/pages/bulk-gifting-page"
        }
				var body = document.body;
        
				if (parent.postMessage) {
						var height = Math.max(body.offsetHeight, body.scrollHeight);
						parent.postMessage({formid: "R9ZAcuu8O_n4vOQArkYnwA", height: height + 70, scroll_to: scroll_to, scrl_bottom: scrl_bottom }, url);
				}
			} else {
				if(scroll_to){
					$('html, body').animate({ scrollTop: $('#wizard-validation-form').offset().top }, 'slow');
				}
			}
		}

		function onSubmit(token) {
			if (window.innerWidth < 100 ) {
				var destElementOffset = window.innerWidth;
				iframe_resize('yes', 'yes', 'error')
			}
		}

		function preventInvalidInput(event) {
		  // Allow control keys such as backspace, delete, arrow keys, etc.
		  if (
		    event.key === 'Backspace' || 
		    event.key === 'Delete' || 
		    event.key === 'ArrowLeft' || 
		    event.key === 'ArrowRight' || 
		    event.key === 'Tab'
		  ) {
		    return;
		  }
		  
		  // Prevent `+`, `-`, and `e` from being entered
		  if (event.key === '+' || event.key === '-' || event.key.toLowerCase() === 'e' || event.key.toLowerCase() === '.' || event.key.toLowerCase() === ',') {
		    event.preventDefault();
		  }
		}
	</script>
	<style id="advance_css_text">
		.sweet-alert[data-has-confirm-button=false][data-has-cancel-button=false] {
			padding-bottom: 17px;
		}
		@media (max-width: 480px) {
			body {
    			font-size:16px;
			}
			input,select,textarea{
    			font-size:100%
			}
		}
	</style>


	<script type="text/javascript">
	</script>
  </div>



<style>
  .remove-image{
    margin-left: 5px;
    border: none;
    background: none;
    font-size: 17px;
    vertical-align: middle;
  }
  .remove-file{
    margin-left: 5px;
    border: none;
    background: none;
    font-size: 17px;
    vertical-align: middle;
  }
  .remove-multi-image{
    margin-left: 5px;
    border: none;
    background: none;
    font-size: 17px;
    vertical-align: middle;
  }
  .remove-multi-file{
    margin-left: 5px;
    border: none;
    background: none;
    font-size: 17px;
    vertical-align: middle;
  }
  .remove-signature{
    margin-left: 5px;
    border: none;
    background: none;
    font-size: 17px;
    vertical-align: middle;
  }
  .remove-multi-files{
    font-size: 12px;
    color: inherit;
    cursor: pointer;
    text-decoration: underline;
  }
  .remove-multi-text{
    color: #333333;
    font-size: 12px;
  }
  .single-text-width{
    display: inline-block;
    max-width: 35ch;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    vertical-align: middle;
  }
  .multi-text-width{
    display: inline-block;
    max-width: 35ch;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    vertical-align: middle;
  }
  .remove-multi-file:hover {
    color: black;
    transform: scale(1.5);
    margin-left: 5px;
  }
  .remove-multi-image:hover{
    color: black;
    transform: scale(1.5);
    margin-left: 5px;
  }
  .remove-file:hover{
    color: black;
    transform: scale(1.5);
    margin-left: 5px;
  }
  .remove-image:hover{
    color: black;
    transform: scale(1.5);
    margin-left: 5px;
  }
  .remove-signature:hover {
    color: black;
    transform: scale(1.5);
    margin-left: 5px;
  }

	/* ********** Product Choice Element CSS Start ********* */
	.clear-selection-link {
		background: none;
		border: none;
		padding: 0;
		margin: 0;
		font-family: inherit;
		font-size: inherit;
		color: blue;
		text-decoration: underline;
		cursor: pointer;
		float: right;
		font-size: 13px;
	}

	.clear-selection-container{
		margin-bottom: 28px;
	}

	.clear-selection-link:hover {
		text-decoration: none;
	}
	/* *********** Product Choice Element CSS End *********** */

	.swal-button{
    background-color: #f27474;
  }
  .swal-footer{
  	text-align: center;
  }
  .swal-button:not([disabled]):hover{
  	background-color: #f27474;
  }
  .has-float-label .multi-column-input{
  	margin-top: 20px;
  }
  .raw_html iframe{
  	width: 100%;
  }
</style>

<script type="text/javascript">
function update(count) {
  let input = document.getElementsByClassName('input' + count);
  for (let i of input) {
	  if($('.input'+count).attr('other_value') == "1"){
    	if (i.value == 'Other' || $('#form_input_'+count+' option:last').val() == i.value) {
        $(".optional-field-span-"+count).show();
    	} else {
        $(".optional-field-span-"+count).hide();
  		}
  	}
	}
}

function multiUpdate(count) {
    let input = document.getElementsByClassName('input' + count);
    if ($('.input'+count).attr('other_value') == "1") {
        let checkboxDiv = document.querySelector('.input' + count);
        let otherValue = 'Other'
        let otherCheckbox = checkboxDiv.querySelector('.checkboxmulti_' + count + '[value="' + otherValue + '"]');
        
        if (otherCheckbox && otherCheckbox.checked) {
            $(".optional-multi-field-span-" + count).show();
        } else {
            $(".optional-multi-field-span-" + count).hide();
        }
    }
}
</script></body></html>